function JT(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function YT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var H_={exports:{}},Eu={},K_={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var el=Symbol.for("react.element"),XT=Symbol.for("react.portal"),ZT=Symbol.for("react.fragment"),eS=Symbol.for("react.strict_mode"),tS=Symbol.for("react.profiler"),rS=Symbol.for("react.provider"),nS=Symbol.for("react.context"),sS=Symbol.for("react.forward_ref"),iS=Symbol.for("react.suspense"),oS=Symbol.for("react.memo"),aS=Symbol.for("react.lazy"),vy=Symbol.iterator;function lS(t){return t===null||typeof t!="object"?null:(t=vy&&t[vy]||t["@@iterator"],typeof t=="function"?t:null)}var G_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q_=Object.assign,J_={};function Zi(t,e,r){this.props=t,this.context=e,this.refs=J_,this.updater=r||G_}Zi.prototype.isReactComponent={};Zi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Y_(){}Y_.prototype=Zi.prototype;function wp(t,e,r){this.props=t,this.context=e,this.refs=J_,this.updater=r||G_}var xp=wp.prototype=new Y_;xp.constructor=wp;Q_(xp,Zi.prototype);xp.isPureReactComponent=!0;var _y=Array.isArray,X_=Object.prototype.hasOwnProperty,bp={current:null},Z_={key:!0,ref:!0,__self:!0,__source:!0};function ew(t,e,r){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)X_.call(e,n)&&!Z_.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var l=Array(a),h=0;h<a;h++)l[h]=arguments[h+2];s.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:el,type:t,key:i,ref:o,props:s,_owner:bp.current}}function cS(t,e){return{$$typeof:el,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ep(t){return typeof t=="object"&&t!==null&&t.$$typeof===el}function uS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var wy=/\/+/g;function jh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uS(""+t.key):e.toString(36)}function ic(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case el:case XT:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+jh(o,0):n,_y(s)?(r="",t!=null&&(r=t.replace(wy,"$&/")+"/"),ic(s,e,r,"",function(h){return h})):s!=null&&(Ep(s)&&(s=cS(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(wy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",_y(t))for(var a=0;a<t.length;a++){i=t[a];var l=n+jh(i,a);o+=ic(i,e,r,l,s)}else if(l=lS(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=n+jh(i,a++),o+=ic(i,e,r,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nl(t,e,r){if(t==null)return t;var n=[],s=0;return ic(t,n,"","",function(i){return e.call(r,i,s++)}),n}function hS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},oc={transition:null},dS={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:oc,ReactCurrentOwner:bp};function tw(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:Nl,forEach:function(t,e,r){Nl(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Nl(t,function(){e++}),e},toArray:function(t){return Nl(t,function(e){return e})||[]},only:function(t){if(!Ep(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=Zi;ne.Fragment=ZT;ne.Profiler=tS;ne.PureComponent=wp;ne.StrictMode=eS;ne.Suspense=iS;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dS;ne.act=tw;ne.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Q_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=bp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)X_.call(e,l)&&!Z_.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var h=0;h<l;h++)a[h]=arguments[h+2];n.children=a}return{$$typeof:el,type:t.type,key:s,ref:i,props:n,_owner:o}};ne.createContext=function(t){return t={$$typeof:nS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rS,_context:t},t.Consumer=t};ne.createElement=ew;ne.createFactory=function(t){var e=ew.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:sS,render:t}};ne.isValidElement=Ep;ne.lazy=function(t){return{$$typeof:aS,_payload:{_status:-1,_result:t},_init:hS}};ne.memo=function(t,e){return{$$typeof:oS,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=oc.transition;oc.transition={};try{t()}finally{oc.transition=e}};ne.unstable_act=tw;ne.useCallback=function(t,e){return Tt.current.useCallback(t,e)};ne.useContext=function(t){return Tt.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)};ne.useEffect=function(t,e){return Tt.current.useEffect(t,e)};ne.useId=function(){return Tt.current.useId()};ne.useImperativeHandle=function(t,e,r){return Tt.current.useImperativeHandle(t,e,r)};ne.useInsertionEffect=function(t,e){return Tt.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return Tt.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return Tt.current.useMemo(t,e)};ne.useReducer=function(t,e,r){return Tt.current.useReducer(t,e,r)};ne.useRef=function(t){return Tt.current.useRef(t)};ne.useState=function(t){return Tt.current.useState(t)};ne.useSyncExternalStore=function(t,e,r){return Tt.current.useSyncExternalStore(t,e,r)};ne.useTransition=function(){return Tt.current.useTransition()};ne.version="18.3.1";K_.exports=ne;var O=K_.exports;const rw=YT(O),fS=JT({__proto__:null,default:rw},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pS=O,mS=Symbol.for("react.element"),gS=Symbol.for("react.fragment"),yS=Object.prototype.hasOwnProperty,vS=pS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_S={key:!0,ref:!0,__self:!0,__source:!0};function nw(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)yS.call(e,n)&&!_S.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:mS,type:t,key:i,ref:o,props:s,_owner:vS.current}}Eu.Fragment=gS;Eu.jsx=nw;Eu.jsxs=nw;H_.exports=Eu;var u=H_.exports,Pd={},sw={exports:{}},$t={},iw={exports:{}},ow={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,G){var ee=B.length;B.push(G);e:for(;0<ee;){var le=ee-1>>>1,Ve=B[le];if(0<s(Ve,G))B[le]=G,B[ee]=Ve,ee=le;else break e}}function r(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var G=B[0],ee=B.pop();if(ee!==G){B[0]=ee;e:for(var le=0,Ve=B.length,os=Ve>>>1;le<os;){var qt=2*(le+1)-1,as=B[qt],er=qt+1,tn=B[er];if(0>s(as,ee))er<Ve&&0>s(tn,as)?(B[le]=tn,B[er]=ee,le=er):(B[le]=as,B[qt]=ee,le=qt);else if(er<Ve&&0>s(tn,ee))B[le]=tn,B[er]=ee,le=er;else break e}}return G}function s(B,G){var ee=B.sortIndex-G.sortIndex;return ee!==0?ee:B.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],h=[],d=1,p=null,m=3,y=!1,_=!1,b=!1,I=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(B){for(var G=r(h);G!==null;){if(G.callback===null)n(h);else if(G.startTime<=B)n(h),G.sortIndex=G.expirationTime,e(l,G);else break;G=r(h)}}function R(B){if(b=!1,E(B),!_)if(r(l)!==null)_=!0,gr(D);else{var G=r(h);G!==null&&en(R,G.startTime-B)}}function D(B,G){_=!1,b&&(b=!1,w(T),T=-1),y=!0;var ee=m;try{for(E(G),p=r(l);p!==null&&(!(p.expirationTime>G)||B&&!C());){var le=p.callback;if(typeof le=="function"){p.callback=null,m=p.priorityLevel;var Ve=le(p.expirationTime<=G);G=t.unstable_now(),typeof Ve=="function"?p.callback=Ve:p===r(l)&&n(l),E(G)}else n(l);p=r(l)}if(p!==null)var os=!0;else{var qt=r(h);qt!==null&&en(R,qt.startTime-G),os=!1}return os}finally{p=null,m=ee,y=!1}}var V=!1,S=null,T=-1,k=5,N=-1;function C(){return!(t.unstable_now()-N<k)}function P(){if(S!==null){var B=t.unstable_now();N=B;var G=!0;try{G=S(!0,B)}finally{G?A():(V=!1,S=null)}}else V=!1}var A;if(typeof v=="function")A=function(){v(P)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,zt=Pe.port2;Pe.port1.onmessage=P,A=function(){zt.postMessage(null)}}else A=function(){I(P,0)};function gr(B){S=B,V||(V=!0,A())}function en(B,G){T=I(function(){B(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){_||y||(_=!0,gr(D))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var ee=m;m=G;try{return B()}finally{m=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ee=m;m=B;try{return G()}finally{m=ee}},t.unstable_scheduleCallback=function(B,G,ee){var le=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?le+ee:le):ee=le,B){case 1:var Ve=-1;break;case 2:Ve=250;break;case 5:Ve=1073741823;break;case 4:Ve=1e4;break;default:Ve=5e3}return Ve=ee+Ve,B={id:d++,callback:G,priorityLevel:B,startTime:ee,expirationTime:Ve,sortIndex:-1},ee>le?(B.sortIndex=ee,e(h,B),r(l)===null&&B===r(h)&&(b?(w(T),T=-1):b=!0,en(R,ee-le))):(B.sortIndex=Ve,e(l,B),_||y||(_=!0,gr(D))),B},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(B){var G=m;return function(){var ee=m;m=G;try{return B.apply(this,arguments)}finally{m=ee}}}})(ow);iw.exports=ow;var wS=iw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xS=O,Ut=wS;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var aw=new Set,wa={};function $s(t,e){Vi(t,e),Vi(t+"Capture",e)}function Vi(t,e){for(wa[t]=e,t=0;t<e.length;t++)aw.add(e[t])}var qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jd=Object.prototype.hasOwnProperty,bS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xy={},by={};function ES(t){return jd.call(by,t)?!0:jd.call(xy,t)?!1:bS.test(t)?by[t]=!0:(xy[t]=!0,!1)}function TS(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SS(t,e,r,n){if(e===null||typeof e>"u"||TS(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,r,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){lt[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];lt[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){lt[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){lt[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){lt[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){lt[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){lt[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){lt[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){lt[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var Tp=/[\-:]([a-z])/g;function Sp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Tp,Sp);lt[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Tp,Sp);lt[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Tp,Sp);lt[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){lt[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});lt.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){lt[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function kp(t,e,r,n){var s=lt.hasOwnProperty(e)?lt[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SS(e,r,s,n)&&(r=null),n||s===null?ES(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Yr=xS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cl=Symbol.for("react.element"),li=Symbol.for("react.portal"),ci=Symbol.for("react.fragment"),Ip=Symbol.for("react.strict_mode"),Od=Symbol.for("react.profiler"),lw=Symbol.for("react.provider"),cw=Symbol.for("react.context"),Ap=Symbol.for("react.forward_ref"),Dd=Symbol.for("react.suspense"),Ld=Symbol.for("react.suspense_list"),Np=Symbol.for("react.memo"),fn=Symbol.for("react.lazy"),uw=Symbol.for("react.offscreen"),Ey=Symbol.iterator;function Ro(t){return t===null||typeof t!="object"?null:(t=Ey&&t[Ey]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,Oh;function Bo(t){if(Oh===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Oh=e&&e[1]||""}return`
`+Oh+t}var Dh=!1;function Lh(t,e){if(!t||Dh)return"";Dh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var n=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){n=h}t.call(e.prototype)}else{try{throw Error()}catch(h){n=h}t()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Dh=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Bo(t):""}function kS(t){switch(t.tag){case 5:return Bo(t.type);case 16:return Bo("Lazy");case 13:return Bo("Suspense");case 19:return Bo("SuspenseList");case 0:case 2:case 15:return t=Lh(t.type,!1),t;case 11:return t=Lh(t.type.render,!1),t;case 1:return t=Lh(t.type,!0),t;default:return""}}function Vd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ci:return"Fragment";case li:return"Portal";case Od:return"Profiler";case Ip:return"StrictMode";case Dd:return"Suspense";case Ld:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cw:return(t.displayName||"Context")+".Consumer";case lw:return(t._context.displayName||"Context")+".Provider";case Ap:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Np:return e=t.displayName||null,e!==null?e:Vd(t.type)||"Memo";case fn:e=t._payload,t=t._init;try{return Vd(t(e))}catch{}}return null}function IS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vd(e);case 8:return e===Ip?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function AS(t){var e=hw(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rl(t){t._valueTracker||(t._valueTracker=AS(t))}function dw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=hw(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Rc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Md(t,e){var r=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ty(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=qn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fw(t,e){e=e.checked,e!=null&&kp(t,"checked",e,!1)}function Ud(t,e){fw(t,e);var r=qn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$d(t,e.type,r):e.hasOwnProperty("defaultValue")&&$d(t,e.type,qn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sy(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function $d(t,e,r){(e!=="number"||Rc(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var zo=Array.isArray;function bi(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+qn(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Fd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ky(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error($(92));if(zo(r)){if(1<r.length)throw Error($(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:qn(r)}}function pw(t,e){var r=qn(e.value),n=qn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Iy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pl,gw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pl=Pl||document.createElement("div"),Pl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xa(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NS=["Webkit","ms","Moz","O"];Object.keys(ra).forEach(function(t){NS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ra[e]=ra[t]})});function yw(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ra.hasOwnProperty(t)&&ra[t]?(""+e).trim():e+"px"}function vw(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=yw(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var CS=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zd(t,e){if(e){if(CS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function qd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wd=null;function Cp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hd=null,Ei=null,Ti=null;function Ay(t){if(t=nl(t)){if(typeof Hd!="function")throw Error($(280));var e=t.stateNode;e&&(e=Au(e),Hd(t.stateNode,t.type,e))}}function _w(t){Ei?Ti?Ti.push(t):Ti=[t]:Ei=t}function ww(){if(Ei){var t=Ei,e=Ti;if(Ti=Ei=null,Ay(t),e)for(t=0;t<e.length;t++)Ay(e[t])}}function xw(t,e){return t(e)}function bw(){}var Vh=!1;function Ew(t,e,r){if(Vh)return t(e,r);Vh=!0;try{return xw(t,e,r)}finally{Vh=!1,(Ei!==null||Ti!==null)&&(bw(),ww())}}function ba(t,e){var r=t.stateNode;if(r===null)return null;var n=Au(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error($(231,e,typeof r));return r}var Kd=!1;if(qr)try{var Po={};Object.defineProperty(Po,"passive",{get:function(){Kd=!0}}),window.addEventListener("test",Po,Po),window.removeEventListener("test",Po,Po)}catch{Kd=!1}function RS(t,e,r,n,s,i,o,a,l){var h=Array.prototype.slice.call(arguments,3);try{e.apply(r,h)}catch(d){this.onError(d)}}var na=!1,Pc=null,jc=!1,Gd=null,PS={onError:function(t){na=!0,Pc=t}};function jS(t,e,r,n,s,i,o,a,l){na=!1,Pc=null,RS.apply(PS,arguments)}function OS(t,e,r,n,s,i,o,a,l){if(jS.apply(this,arguments),na){if(na){var h=Pc;na=!1,Pc=null}else throw Error($(198));jc||(jc=!0,Gd=h)}}function Fs(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Tw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ny(t){if(Fs(t)!==t)throw Error($(188))}function DS(t){var e=t.alternate;if(!e){if(e=Fs(t),e===null)throw Error($(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Ny(s),t;if(i===n)return Ny(s),e;i=i.sibling}throw Error($(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error($(189))}}if(r.alternate!==n)throw Error($(190))}if(r.tag!==3)throw Error($(188));return r.stateNode.current===r?t:e}function Sw(t){return t=DS(t),t!==null?kw(t):null}function kw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=kw(t);if(e!==null)return e;t=t.sibling}return null}var Iw=Ut.unstable_scheduleCallback,Cy=Ut.unstable_cancelCallback,LS=Ut.unstable_shouldYield,VS=Ut.unstable_requestPaint,Ue=Ut.unstable_now,MS=Ut.unstable_getCurrentPriorityLevel,Rp=Ut.unstable_ImmediatePriority,Aw=Ut.unstable_UserBlockingPriority,Oc=Ut.unstable_NormalPriority,US=Ut.unstable_LowPriority,Nw=Ut.unstable_IdlePriority,Tu=null,Sr=null;function $S(t){if(Sr&&typeof Sr.onCommitFiberRoot=="function")try{Sr.onCommitFiberRoot(Tu,t,void 0,(t.current.flags&128)===128)}catch{}}var ur=Math.clz32?Math.clz32:zS,FS=Math.log,BS=Math.LN2;function zS(t){return t>>>=0,t===0?32:31-(FS(t)/BS|0)|0}var jl=64,Ol=4194304;function qo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dc(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=qo(a):(i&=o,i!==0&&(n=qo(i)))}else o=r&~s,o!==0?n=qo(o):i!==0&&(n=qo(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ur(e),s=1<<r,n|=t[r],e&=~s;return n}function qS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WS(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ur(i),a=1<<o,l=s[o];l===-1?(!(a&r)||a&n)&&(s[o]=qS(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Qd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Cw(){var t=jl;return jl<<=1,!(jl&4194240)&&(jl=64),t}function Mh(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function tl(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ur(e),t[e]=r}function HS(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-ur(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Pp(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ur(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var me=0;function Rw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Pw,jp,jw,Ow,Dw,Jd=!1,Dl=[],An=null,Nn=null,Cn=null,Ea=new Map,Ta=new Map,gn=[],KS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ry(t,e){switch(t){case"focusin":case"focusout":An=null;break;case"dragenter":case"dragleave":Nn=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":Ea.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ta.delete(e.pointerId)}}function jo(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=nl(e),e!==null&&jp(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function GS(t,e,r,n,s){switch(e){case"focusin":return An=jo(An,t,e,r,n,s),!0;case"dragenter":return Nn=jo(Nn,t,e,r,n,s),!0;case"mouseover":return Cn=jo(Cn,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Ea.set(i,jo(Ea.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Ta.set(i,jo(Ta.get(i)||null,t,e,r,n,s)),!0}return!1}function Lw(t){var e=xs(t.target);if(e!==null){var r=Fs(e);if(r!==null){if(e=r.tag,e===13){if(e=Tw(r),e!==null){t.blockedOn=e,Dw(t.priority,function(){jw(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ac(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Yd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Wd=n,r.target.dispatchEvent(n),Wd=null}else return e=nl(r),e!==null&&jp(e),t.blockedOn=r,!1;e.shift()}return!0}function Py(t,e,r){ac(t)&&r.delete(e)}function QS(){Jd=!1,An!==null&&ac(An)&&(An=null),Nn!==null&&ac(Nn)&&(Nn=null),Cn!==null&&ac(Cn)&&(Cn=null),Ea.forEach(Py),Ta.forEach(Py)}function Oo(t,e){t.blockedOn===e&&(t.blockedOn=null,Jd||(Jd=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,QS)))}function Sa(t){function e(s){return Oo(s,t)}if(0<Dl.length){Oo(Dl[0],t);for(var r=1;r<Dl.length;r++){var n=Dl[r];n.blockedOn===t&&(n.blockedOn=null)}}for(An!==null&&Oo(An,t),Nn!==null&&Oo(Nn,t),Cn!==null&&Oo(Cn,t),Ea.forEach(e),Ta.forEach(e),r=0;r<gn.length;r++)n=gn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<gn.length&&(r=gn[0],r.blockedOn===null);)Lw(r),r.blockedOn===null&&gn.shift()}var Si=Yr.ReactCurrentBatchConfig,Lc=!0;function JS(t,e,r,n){var s=me,i=Si.transition;Si.transition=null;try{me=1,Op(t,e,r,n)}finally{me=s,Si.transition=i}}function YS(t,e,r,n){var s=me,i=Si.transition;Si.transition=null;try{me=4,Op(t,e,r,n)}finally{me=s,Si.transition=i}}function Op(t,e,r,n){if(Lc){var s=Yd(t,e,r,n);if(s===null)Gh(t,e,n,Vc,r),Ry(t,n);else if(GS(s,t,e,r,n))n.stopPropagation();else if(Ry(t,n),e&4&&-1<KS.indexOf(t)){for(;s!==null;){var i=nl(s);if(i!==null&&Pw(i),i=Yd(t,e,r,n),i===null&&Gh(t,e,n,Vc,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Gh(t,e,n,null,r)}}var Vc=null;function Yd(t,e,r,n){if(Vc=null,t=Cp(n),t=xs(t),t!==null)if(e=Fs(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Tw(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vc=t,null}function Vw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MS()){case Rp:return 1;case Aw:return 4;case Oc:case US:return 16;case Nw:return 536870912;default:return 16}default:return 16}}var En=null,Dp=null,lc=null;function Mw(){if(lc)return lc;var t,e=Dp,r=e.length,n,s="value"in En?En.value:En.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return lc=s.slice(t,1<n?1-n:void 0)}function cc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ll(){return!0}function jy(){return!1}function Ft(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ll:jy,this.isPropagationStopped=jy,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ll)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ll)},persist:function(){},isPersistent:Ll}),e}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lp=Ft(eo),rl=Re({},eo,{view:0,detail:0}),XS=Ft(rl),Uh,$h,Do,Su=Re({},rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Do&&(Do&&t.type==="mousemove"?(Uh=t.screenX-Do.screenX,$h=t.screenY-Do.screenY):$h=Uh=0,Do=t),Uh)},movementY:function(t){return"movementY"in t?t.movementY:$h}}),Oy=Ft(Su),ZS=Re({},Su,{dataTransfer:0}),ek=Ft(ZS),tk=Re({},rl,{relatedTarget:0}),Fh=Ft(tk),rk=Re({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),nk=Ft(rk),sk=Re({},eo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ik=Ft(sk),ok=Re({},eo,{data:0}),Dy=Ft(ok),ak={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ck={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ck[t])?!!e[t]:!1}function Vp(){return uk}var hk=Re({},rl,{key:function(t){if(t.key){var e=ak[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vp,charCode:function(t){return t.type==="keypress"?cc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dk=Ft(hk),fk=Re({},Su,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ly=Ft(fk),pk=Re({},rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vp}),mk=Ft(pk),gk=Re({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),yk=Ft(gk),vk=Re({},Su,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_k=Ft(vk),wk=[9,13,27,32],Mp=qr&&"CompositionEvent"in window,sa=null;qr&&"documentMode"in document&&(sa=document.documentMode);var xk=qr&&"TextEvent"in window&&!sa,Uw=qr&&(!Mp||sa&&8<sa&&11>=sa),Vy=" ",My=!1;function $w(t,e){switch(t){case"keyup":return wk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ui=!1;function bk(t,e){switch(t){case"compositionend":return Fw(e);case"keypress":return e.which!==32?null:(My=!0,Vy);case"textInput":return t=e.data,t===Vy&&My?null:t;default:return null}}function Ek(t,e){if(ui)return t==="compositionend"||!Mp&&$w(t,e)?(t=Mw(),lc=Dp=En=null,ui=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Uw&&e.locale!=="ko"?null:e.data;default:return null}}var Tk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Tk[t.type]:e==="textarea"}function Bw(t,e,r,n){_w(n),e=Mc(e,"onChange"),0<e.length&&(r=new Lp("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ia=null,ka=null;function Sk(t){Zw(t,0)}function ku(t){var e=fi(t);if(dw(e))return t}function kk(t,e){if(t==="change")return e}var zw=!1;if(qr){var Bh;if(qr){var zh="oninput"in document;if(!zh){var $y=document.createElement("div");$y.setAttribute("oninput","return;"),zh=typeof $y.oninput=="function"}Bh=zh}else Bh=!1;zw=Bh&&(!document.documentMode||9<document.documentMode)}function Fy(){ia&&(ia.detachEvent("onpropertychange",qw),ka=ia=null)}function qw(t){if(t.propertyName==="value"&&ku(ka)){var e=[];Bw(e,ka,t,Cp(t)),Ew(Sk,e)}}function Ik(t,e,r){t==="focusin"?(Fy(),ia=e,ka=r,ia.attachEvent("onpropertychange",qw)):t==="focusout"&&Fy()}function Ak(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ku(ka)}function Nk(t,e){if(t==="click")return ku(e)}function Ck(t,e){if(t==="input"||t==="change")return ku(e)}function Rk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dr=typeof Object.is=="function"?Object.is:Rk;function Ia(t,e){if(dr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!jd.call(e,s)||!dr(t[s],e[s]))return!1}return!0}function By(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zy(t,e){var r=By(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=By(r)}}function Ww(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ww(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hw(){for(var t=window,e=Rc();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Rc(t.document)}return e}function Up(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Pk(t){var e=Hw(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Ww(r.ownerDocument.documentElement,r)){if(n!==null&&Up(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=zy(r,i);var o=zy(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jk=qr&&"documentMode"in document&&11>=document.documentMode,hi=null,Xd=null,oa=null,Zd=!1;function qy(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Zd||hi==null||hi!==Rc(n)||(n=hi,"selectionStart"in n&&Up(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),oa&&Ia(oa,n)||(oa=n,n=Mc(Xd,"onSelect"),0<n.length&&(e=new Lp("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=hi)))}function Vl(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var di={animationend:Vl("Animation","AnimationEnd"),animationiteration:Vl("Animation","AnimationIteration"),animationstart:Vl("Animation","AnimationStart"),transitionend:Vl("Transition","TransitionEnd")},qh={},Kw={};qr&&(Kw=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);function Iu(t){if(qh[t])return qh[t];if(!di[t])return t;var e=di[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Kw)return qh[t]=e[r];return t}var Gw=Iu("animationend"),Qw=Iu("animationiteration"),Jw=Iu("animationstart"),Yw=Iu("transitionend"),Xw=new Map,Wy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xn(t,e){Xw.set(t,e),$s(e,[t])}for(var Wh=0;Wh<Wy.length;Wh++){var Hh=Wy[Wh],Ok=Hh.toLowerCase(),Dk=Hh[0].toUpperCase()+Hh.slice(1);Xn(Ok,"on"+Dk)}Xn(Gw,"onAnimationEnd");Xn(Qw,"onAnimationIteration");Xn(Jw,"onAnimationStart");Xn("dblclick","onDoubleClick");Xn("focusin","onFocus");Xn("focusout","onBlur");Xn(Yw,"onTransitionEnd");Vi("onMouseEnter",["mouseout","mouseover"]);Vi("onMouseLeave",["mouseout","mouseover"]);Vi("onPointerEnter",["pointerout","pointerover"]);Vi("onPointerLeave",["pointerout","pointerover"]);$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$s("onBeforeInput",["compositionend","keypress","textInput","paste"]);$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wo));function Hy(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,OS(n,e,void 0,t),t.currentTarget=null}function Zw(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,h=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Hy(s,a,h),i=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,h=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Hy(s,a,h),i=l}}}if(jc)throw t=Gd,jc=!1,Gd=null,t}function be(t,e){var r=e[sf];r===void 0&&(r=e[sf]=new Set);var n=t+"__bubble";r.has(n)||(ex(e,t,2,!1),r.add(n))}function Kh(t,e,r){var n=0;e&&(n|=4),ex(r,t,n,e)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function Aa(t){if(!t[Ml]){t[Ml]=!0,aw.forEach(function(r){r!=="selectionchange"&&(Lk.has(r)||Kh(r,!1,t),Kh(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ml]||(e[Ml]=!0,Kh("selectionchange",!1,e))}}function ex(t,e,r,n){switch(Vw(e)){case 1:var s=JS;break;case 4:s=YS;break;default:s=Op}r=s.bind(null,e,r,t),s=void 0,!Kd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Gh(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=xs(a),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}a=a.parentNode}}n=n.return}Ew(function(){var h=i,d=Cp(r),p=[];e:{var m=Xw.get(t);if(m!==void 0){var y=Lp,_=t;switch(t){case"keypress":if(cc(r)===0)break e;case"keydown":case"keyup":y=dk;break;case"focusin":_="focus",y=Fh;break;case"focusout":_="blur",y=Fh;break;case"beforeblur":case"afterblur":y=Fh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Oy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=ek;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=mk;break;case Gw:case Qw:case Jw:y=nk;break;case Yw:y=yk;break;case"scroll":y=XS;break;case"wheel":y=_k;break;case"copy":case"cut":case"paste":y=ik;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Ly}var b=(e&4)!==0,I=!b&&t==="scroll",w=b?m!==null?m+"Capture":null:m;b=[];for(var v=h,E;v!==null;){E=v;var R=E.stateNode;if(E.tag===5&&R!==null&&(E=R,w!==null&&(R=ba(v,w),R!=null&&b.push(Na(v,R,E)))),I)break;v=v.return}0<b.length&&(m=new y(m,_,null,r,d),p.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&r!==Wd&&(_=r.relatedTarget||r.fromElement)&&(xs(_)||_[Wr]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(_=r.relatedTarget||r.toElement,y=h,_=_?xs(_):null,_!==null&&(I=Fs(_),_!==I||_.tag!==5&&_.tag!==6)&&(_=null)):(y=null,_=h),y!==_)){if(b=Oy,R="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(b=Ly,R="onPointerLeave",w="onPointerEnter",v="pointer"),I=y==null?m:fi(y),E=_==null?m:fi(_),m=new b(R,v+"leave",y,r,d),m.target=I,m.relatedTarget=E,R=null,xs(d)===h&&(b=new b(w,v+"enter",_,r,d),b.target=E,b.relatedTarget=I,R=b),I=R,y&&_)t:{for(b=y,w=_,v=0,E=b;E;E=Ks(E))v++;for(E=0,R=w;R;R=Ks(R))E++;for(;0<v-E;)b=Ks(b),v--;for(;0<E-v;)w=Ks(w),E--;for(;v--;){if(b===w||w!==null&&b===w.alternate)break t;b=Ks(b),w=Ks(w)}b=null}else b=null;y!==null&&Ky(p,m,y,b,!1),_!==null&&I!==null&&Ky(p,I,_,b,!0)}}e:{if(m=h?fi(h):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var D=kk;else if(Uy(m))if(zw)D=Ck;else{D=Ak;var V=Ik}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(D=Nk);if(D&&(D=D(t,h))){Bw(p,D,r,d);break e}V&&V(t,m,h),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&$d(m,"number",m.value)}switch(V=h?fi(h):window,t){case"focusin":(Uy(V)||V.contentEditable==="true")&&(hi=V,Xd=h,oa=null);break;case"focusout":oa=Xd=hi=null;break;case"mousedown":Zd=!0;break;case"contextmenu":case"mouseup":case"dragend":Zd=!1,qy(p,r,d);break;case"selectionchange":if(jk)break;case"keydown":case"keyup":qy(p,r,d)}var S;if(Mp)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ui?$w(t,r)&&(T="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(Uw&&r.locale!=="ko"&&(ui||T!=="onCompositionStart"?T==="onCompositionEnd"&&ui&&(S=Mw()):(En=d,Dp="value"in En?En.value:En.textContent,ui=!0)),V=Mc(h,T),0<V.length&&(T=new Dy(T,t,null,r,d),p.push({event:T,listeners:V}),S?T.data=S:(S=Fw(r),S!==null&&(T.data=S)))),(S=xk?bk(t,r):Ek(t,r))&&(h=Mc(h,"onBeforeInput"),0<h.length&&(d=new Dy("onBeforeInput","beforeinput",null,r,d),p.push({event:d,listeners:h}),d.data=S))}Zw(p,e)})}function Na(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Mc(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ba(t,r),i!=null&&n.unshift(Na(t,i,s)),i=ba(t,e),i!=null&&n.push(Na(t,i,s))),t=t.return}return n}function Ks(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ky(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,h=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&h!==null&&(a=h,s?(l=ba(r,i),l!=null&&o.unshift(Na(r,l,a))):s||(l=ba(r,i),l!=null&&o.push(Na(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Vk=/\r\n?/g,Mk=/\u0000|\uFFFD/g;function Gy(t){return(typeof t=="string"?t:""+t).replace(Vk,`
`).replace(Mk,"")}function Ul(t,e,r){if(e=Gy(e),Gy(t)!==e&&r)throw Error($(425))}function Uc(){}var ef=null,tf=null;function rf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nf=typeof setTimeout=="function"?setTimeout:void 0,Uk=typeof clearTimeout=="function"?clearTimeout:void 0,Qy=typeof Promise=="function"?Promise:void 0,$k=typeof queueMicrotask=="function"?queueMicrotask:typeof Qy<"u"?function(t){return Qy.resolve(null).then(t).catch(Fk)}:nf;function Fk(t){setTimeout(function(){throw t})}function Qh(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Sa(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Sa(e)}function Rn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var to=Math.random().toString(36).slice(2),br="__reactFiber$"+to,Ca="__reactProps$"+to,Wr="__reactContainer$"+to,sf="__reactEvents$"+to,Bk="__reactListeners$"+to,zk="__reactHandles$"+to;function xs(t){var e=t[br];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Wr]||r[br]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Jy(t);t!==null;){if(r=t[br])return r;t=Jy(t)}return e}t=r,r=t.parentNode}return null}function nl(t){return t=t[br]||t[Wr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Au(t){return t[Ca]||null}var of=[],pi=-1;function Zn(t){return{current:t}}function Ee(t){0>pi||(t.current=of[pi],of[pi]=null,pi--)}function _e(t,e){pi++,of[pi]=t.current,t.current=e}var Wn={},vt=Zn(Wn),Nt=Zn(!1),Rs=Wn;function Mi(t,e){var r=t.type.contextTypes;if(!r)return Wn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ct(t){return t=t.childContextTypes,t!=null}function $c(){Ee(Nt),Ee(vt)}function Yy(t,e,r){if(vt.current!==Wn)throw Error($(168));_e(vt,e),_e(Nt,r)}function tx(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error($(108,IS(t)||"Unknown",s));return Re({},r,n)}function Fc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wn,Rs=vt.current,_e(vt,t),_e(Nt,Nt.current),!0}function Xy(t,e,r){var n=t.stateNode;if(!n)throw Error($(169));r?(t=tx(t,e,Rs),n.__reactInternalMemoizedMergedChildContext=t,Ee(Nt),Ee(vt),_e(vt,t)):Ee(Nt),_e(Nt,r)}var Mr=null,Nu=!1,Jh=!1;function rx(t){Mr===null?Mr=[t]:Mr.push(t)}function qk(t){Nu=!0,rx(t)}function es(){if(!Jh&&Mr!==null){Jh=!0;var t=0,e=me;try{var r=Mr;for(me=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Mr=null,Nu=!1}catch(s){throw Mr!==null&&(Mr=Mr.slice(t+1)),Iw(Rp,es),s}finally{me=e,Jh=!1}}return null}var mi=[],gi=0,Bc=null,zc=0,Wt=[],Ht=0,Ps=null,Ur=1,$r="";function ms(t,e){mi[gi++]=zc,mi[gi++]=Bc,Bc=t,zc=e}function nx(t,e,r){Wt[Ht++]=Ur,Wt[Ht++]=$r,Wt[Ht++]=Ps,Ps=t;var n=Ur;t=$r;var s=32-ur(n)-1;n&=~(1<<s),r+=1;var i=32-ur(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Ur=1<<32-ur(e)+s|r<<s|n,$r=i+t}else Ur=1<<i|r<<s|n,$r=t}function $p(t){t.return!==null&&(ms(t,1),nx(t,1,0))}function Fp(t){for(;t===Bc;)Bc=mi[--gi],mi[gi]=null,zc=mi[--gi],mi[gi]=null;for(;t===Ps;)Ps=Wt[--Ht],Wt[Ht]=null,$r=Wt[--Ht],Wt[Ht]=null,Ur=Wt[--Ht],Wt[Ht]=null}var Mt=null,Vt=null,Te=!1,lr=null;function sx(t,e){var r=Jt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Zy(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,Vt=Rn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,Vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ps!==null?{id:Ur,overflow:$r}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Jt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Mt=t,Vt=null,!0):!1;default:return!1}}function af(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lf(t){if(Te){var e=Vt;if(e){var r=e;if(!Zy(t,e)){if(af(t))throw Error($(418));e=Rn(r.nextSibling);var n=Mt;e&&Zy(t,e)?sx(n,r):(t.flags=t.flags&-4097|2,Te=!1,Mt=t)}}else{if(af(t))throw Error($(418));t.flags=t.flags&-4097|2,Te=!1,Mt=t}}}function e0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function $l(t){if(t!==Mt)return!1;if(!Te)return e0(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rf(t.type,t.memoizedProps)),e&&(e=Vt)){if(af(t))throw ix(),Error($(418));for(;e;)sx(t,e),e=Rn(e.nextSibling)}if(e0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Vt=Rn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Vt=null}}else Vt=Mt?Rn(t.stateNode.nextSibling):null;return!0}function ix(){for(var t=Vt;t;)t=Rn(t.nextSibling)}function Ui(){Vt=Mt=null,Te=!1}function Bp(t){lr===null?lr=[t]:lr.push(t)}var Wk=Yr.ReactCurrentBatchConfig;function Lo(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error($(309));var n=r.stateNode}if(!n)throw Error($(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!r._owner)throw Error($(290,t))}return t}function Fl(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function t0(t){var e=t._init;return e(t._payload)}function ox(t){function e(w,v){if(t){var E=w.deletions;E===null?(w.deletions=[v],w.flags|=16):E.push(v)}}function r(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function n(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=Dn(w,v),w.index=0,w.sibling=null,w}function i(w,v,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<v?(w.flags|=2,v):E):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,v,E,R){return v===null||v.tag!==6?(v=nd(E,w.mode,R),v.return=w,v):(v=s(v,E),v.return=w,v)}function l(w,v,E,R){var D=E.type;return D===ci?d(w,v,E.props.children,R,E.key):v!==null&&(v.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===fn&&t0(D)===v.type)?(R=s(v,E.props),R.ref=Lo(w,v,E),R.return=w,R):(R=gc(E.type,E.key,E.props,null,w.mode,R),R.ref=Lo(w,v,E),R.return=w,R)}function h(w,v,E,R){return v===null||v.tag!==4||v.stateNode.containerInfo!==E.containerInfo||v.stateNode.implementation!==E.implementation?(v=sd(E,w.mode,R),v.return=w,v):(v=s(v,E.children||[]),v.return=w,v)}function d(w,v,E,R,D){return v===null||v.tag!==7?(v=Is(E,w.mode,R,D),v.return=w,v):(v=s(v,E),v.return=w,v)}function p(w,v,E){if(typeof v=="string"&&v!==""||typeof v=="number")return v=nd(""+v,w.mode,E),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Cl:return E=gc(v.type,v.key,v.props,null,w.mode,E),E.ref=Lo(w,null,v),E.return=w,E;case li:return v=sd(v,w.mode,E),v.return=w,v;case fn:var R=v._init;return p(w,R(v._payload),E)}if(zo(v)||Ro(v))return v=Is(v,w.mode,E,null),v.return=w,v;Fl(w,v)}return null}function m(w,v,E,R){var D=v!==null?v.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return D!==null?null:a(w,v,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Cl:return E.key===D?l(w,v,E,R):null;case li:return E.key===D?h(w,v,E,R):null;case fn:return D=E._init,m(w,v,D(E._payload),R)}if(zo(E)||Ro(E))return D!==null?null:d(w,v,E,R,null);Fl(w,E)}return null}function y(w,v,E,R,D){if(typeof R=="string"&&R!==""||typeof R=="number")return w=w.get(E)||null,a(v,w,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Cl:return w=w.get(R.key===null?E:R.key)||null,l(v,w,R,D);case li:return w=w.get(R.key===null?E:R.key)||null,h(v,w,R,D);case fn:var V=R._init;return y(w,v,E,V(R._payload),D)}if(zo(R)||Ro(R))return w=w.get(E)||null,d(v,w,R,D,null);Fl(v,R)}return null}function _(w,v,E,R){for(var D=null,V=null,S=v,T=v=0,k=null;S!==null&&T<E.length;T++){S.index>T?(k=S,S=null):k=S.sibling;var N=m(w,S,E[T],R);if(N===null){S===null&&(S=k);break}t&&S&&N.alternate===null&&e(w,S),v=i(N,v,T),V===null?D=N:V.sibling=N,V=N,S=k}if(T===E.length)return r(w,S),Te&&ms(w,T),D;if(S===null){for(;T<E.length;T++)S=p(w,E[T],R),S!==null&&(v=i(S,v,T),V===null?D=S:V.sibling=S,V=S);return Te&&ms(w,T),D}for(S=n(w,S);T<E.length;T++)k=y(S,w,T,E[T],R),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?T:k.key),v=i(k,v,T),V===null?D=k:V.sibling=k,V=k);return t&&S.forEach(function(C){return e(w,C)}),Te&&ms(w,T),D}function b(w,v,E,R){var D=Ro(E);if(typeof D!="function")throw Error($(150));if(E=D.call(E),E==null)throw Error($(151));for(var V=D=null,S=v,T=v=0,k=null,N=E.next();S!==null&&!N.done;T++,N=E.next()){S.index>T?(k=S,S=null):k=S.sibling;var C=m(w,S,N.value,R);if(C===null){S===null&&(S=k);break}t&&S&&C.alternate===null&&e(w,S),v=i(C,v,T),V===null?D=C:V.sibling=C,V=C,S=k}if(N.done)return r(w,S),Te&&ms(w,T),D;if(S===null){for(;!N.done;T++,N=E.next())N=p(w,N.value,R),N!==null&&(v=i(N,v,T),V===null?D=N:V.sibling=N,V=N);return Te&&ms(w,T),D}for(S=n(w,S);!N.done;T++,N=E.next())N=y(S,w,T,N.value,R),N!==null&&(t&&N.alternate!==null&&S.delete(N.key===null?T:N.key),v=i(N,v,T),V===null?D=N:V.sibling=N,V=N);return t&&S.forEach(function(P){return e(w,P)}),Te&&ms(w,T),D}function I(w,v,E,R){if(typeof E=="object"&&E!==null&&E.type===ci&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Cl:e:{for(var D=E.key,V=v;V!==null;){if(V.key===D){if(D=E.type,D===ci){if(V.tag===7){r(w,V.sibling),v=s(V,E.props.children),v.return=w,w=v;break e}}else if(V.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===fn&&t0(D)===V.type){r(w,V.sibling),v=s(V,E.props),v.ref=Lo(w,V,E),v.return=w,w=v;break e}r(w,V);break}else e(w,V);V=V.sibling}E.type===ci?(v=Is(E.props.children,w.mode,R,E.key),v.return=w,w=v):(R=gc(E.type,E.key,E.props,null,w.mode,R),R.ref=Lo(w,v,E),R.return=w,w=R)}return o(w);case li:e:{for(V=E.key;v!==null;){if(v.key===V)if(v.tag===4&&v.stateNode.containerInfo===E.containerInfo&&v.stateNode.implementation===E.implementation){r(w,v.sibling),v=s(v,E.children||[]),v.return=w,w=v;break e}else{r(w,v);break}else e(w,v);v=v.sibling}v=sd(E,w.mode,R),v.return=w,w=v}return o(w);case fn:return V=E._init,I(w,v,V(E._payload),R)}if(zo(E))return _(w,v,E,R);if(Ro(E))return b(w,v,E,R);Fl(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,v!==null&&v.tag===6?(r(w,v.sibling),v=s(v,E),v.return=w,w=v):(r(w,v),v=nd(E,w.mode,R),v.return=w,w=v),o(w)):r(w,v)}return I}var $i=ox(!0),ax=ox(!1),qc=Zn(null),Wc=null,yi=null,zp=null;function qp(){zp=yi=Wc=null}function Wp(t){var e=qc.current;Ee(qc),t._currentValue=e}function cf(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ki(t,e){Wc=t,zp=yi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function Xt(t){var e=t._currentValue;if(zp!==t)if(t={context:t,memoizedValue:e,next:null},yi===null){if(Wc===null)throw Error($(308));yi=t,Wc.dependencies={lanes:0,firstContext:t}}else yi=yi.next=t;return e}var bs=null;function Hp(t){bs===null?bs=[t]:bs.push(t)}function lx(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Hp(e)):(r.next=s.next,s.next=r),e.interleaved=r,Hr(t,n)}function Hr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var pn=!1;function Kp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Pn(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,fe&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Hr(t,r)}return s=n.interleaved,s===null?(e.next=e,Hp(n)):(e.next=s.next,s.next=e),n.interleaved=e,Hr(t,r)}function uc(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Pp(t,r)}}function r0(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Hc(t,e,r,n){var s=t.updateQueue;pn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,h=l.next;l.next=null,o===null?i=h:o.next=h,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=h:a.next=h,d.lastBaseUpdate=l))}if(i!==null){var p=s.baseState;o=0,d=h=l=null,a=i;do{var m=a.lane,y=a.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,b=a;switch(m=e,y=r,b.tag){case 1:if(_=b.payload,typeof _=="function"){p=_.call(y,p,m);break e}p=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=b.payload,m=typeof _=="function"?_.call(y,p,m):_,m==null)break e;p=Re({},p,m);break e;case 2:pn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(h=d=y,l=p):d=d.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(l=p),s.baseState=l,s.firstBaseUpdate=h,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Os|=o,t.lanes=o,t.memoizedState=p}}function n0(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error($(191,s));s.call(n)}}}var sl={},kr=Zn(sl),Ra=Zn(sl),Pa=Zn(sl);function Es(t){if(t===sl)throw Error($(174));return t}function Gp(t,e){switch(_e(Pa,e),_e(Ra,t),_e(kr,sl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bd(e,t)}Ee(kr),_e(kr,e)}function Fi(){Ee(kr),Ee(Ra),Ee(Pa)}function ux(t){Es(Pa.current);var e=Es(kr.current),r=Bd(e,t.type);e!==r&&(_e(Ra,t),_e(kr,r))}function Qp(t){Ra.current===t&&(Ee(kr),Ee(Ra))}var Ae=Zn(0);function Kc(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yh=[];function Jp(){for(var t=0;t<Yh.length;t++)Yh[t]._workInProgressVersionPrimary=null;Yh.length=0}var hc=Yr.ReactCurrentDispatcher,Xh=Yr.ReactCurrentBatchConfig,js=0,Ne=null,Qe=null,tt=null,Gc=!1,aa=!1,ja=0,Hk=0;function ht(){throw Error($(321))}function Yp(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!dr(t[r],e[r]))return!1;return!0}function Xp(t,e,r,n,s,i){if(js=i,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hc.current=t===null||t.memoizedState===null?Jk:Yk,t=r(n,s),aa){i=0;do{if(aa=!1,ja=0,25<=i)throw Error($(301));i+=1,tt=Qe=null,e.updateQueue=null,hc.current=Xk,t=r(n,s)}while(aa)}if(hc.current=Qc,e=Qe!==null&&Qe.next!==null,js=0,tt=Qe=Ne=null,Gc=!1,e)throw Error($(300));return t}function Zp(){var t=ja!==0;return ja=0,t}function wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Ne.memoizedState=tt=t:tt=tt.next=t,tt}function Zt(){if(Qe===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=tt===null?Ne.memoizedState:tt.next;if(e!==null)tt=e,Qe=t;else{if(t===null)throw Error($(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},tt===null?Ne.memoizedState=tt=t:tt=tt.next=t}return tt}function Oa(t,e){return typeof e=="function"?e(t):e}function Zh(t){var e=Zt(),r=e.queue;if(r===null)throw Error($(311));r.lastRenderedReducer=t;var n=Qe,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,l=null,h=i;do{var d=h.lane;if((js&d)===d)l!==null&&(l=l.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:t(n,h.action);else{var p={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};l===null?(a=l=p,o=n):l=l.next=p,Ne.lanes|=d,Os|=d}h=h.next}while(h!==null&&h!==i);l===null?o=n:l.next=a,dr(n,e.memoizedState)||(At=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,Ne.lanes|=i,Os|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function ed(t){var e=Zt(),r=e.queue;if(r===null)throw Error($(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);dr(i,e.memoizedState)||(At=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function hx(){}function dx(t,e){var r=Ne,n=Zt(),s=e(),i=!dr(n.memoizedState,s);if(i&&(n.memoizedState=s,At=!0),n=n.queue,em(mx.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||tt!==null&&tt.memoizedState.tag&1){if(r.flags|=2048,Da(9,px.bind(null,r,n,s,e),void 0,null),rt===null)throw Error($(349));js&30||fx(r,e,s)}return s}function fx(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function px(t,e,r,n){e.value=r,e.getSnapshot=n,gx(e)&&yx(t)}function mx(t,e,r){return r(function(){gx(e)&&yx(t)})}function gx(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!dr(t,r)}catch{return!0}}function yx(t){var e=Hr(t,1);e!==null&&hr(e,t,1,-1)}function s0(t){var e=wr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:t},e.queue=t,t=t.dispatch=Qk.bind(null,Ne,t),[e.memoizedState,t]}function Da(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function vx(){return Zt().memoizedState}function dc(t,e,r,n){var s=wr();Ne.flags|=t,s.memoizedState=Da(1|e,r,void 0,n===void 0?null:n)}function Cu(t,e,r,n){var s=Zt();n=n===void 0?null:n;var i=void 0;if(Qe!==null){var o=Qe.memoizedState;if(i=o.destroy,n!==null&&Yp(n,o.deps)){s.memoizedState=Da(e,r,i,n);return}}Ne.flags|=t,s.memoizedState=Da(1|e,r,i,n)}function i0(t,e){return dc(8390656,8,t,e)}function em(t,e){return Cu(2048,8,t,e)}function _x(t,e){return Cu(4,2,t,e)}function wx(t,e){return Cu(4,4,t,e)}function xx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bx(t,e,r){return r=r!=null?r.concat([t]):null,Cu(4,4,xx.bind(null,e,t),r)}function tm(){}function Ex(t,e){var r=Zt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Yp(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Tx(t,e){var r=Zt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Yp(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Sx(t,e,r){return js&21?(dr(r,e)||(r=Cw(),Ne.lanes|=r,Os|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=r)}function Kk(t,e){var r=me;me=r!==0&&4>r?r:4,t(!0);var n=Xh.transition;Xh.transition={};try{t(!1),e()}finally{me=r,Xh.transition=n}}function kx(){return Zt().memoizedState}function Gk(t,e,r){var n=On(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ix(t))Ax(e,r);else if(r=lx(t,e,r,n),r!==null){var s=Et();hr(r,t,n,s),Nx(r,e,n)}}function Qk(t,e,r){var n=On(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ix(t))Ax(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,dr(a,o)){var l=e.interleaved;l===null?(s.next=s,Hp(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=lx(t,e,s,n),r!==null&&(s=Et(),hr(r,t,n,s),Nx(r,e,n))}}function Ix(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function Ax(t,e){aa=Gc=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Nx(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Pp(t,r)}}var Qc={readContext:Xt,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},Jk={readContext:Xt,useCallback:function(t,e){return wr().memoizedState=[t,e===void 0?null:e],t},useContext:Xt,useEffect:i0,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,dc(4194308,4,xx.bind(null,e,t),r)},useLayoutEffect:function(t,e){return dc(4194308,4,t,e)},useInsertionEffect:function(t,e){return dc(4,2,t,e)},useMemo:function(t,e){var r=wr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=wr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Gk.bind(null,Ne,t),[n.memoizedState,t]},useRef:function(t){var e=wr();return t={current:t},e.memoizedState=t},useState:s0,useDebugValue:tm,useDeferredValue:function(t){return wr().memoizedState=t},useTransition:function(){var t=s0(!1),e=t[0];return t=Kk.bind(null,t[1]),wr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ne,s=wr();if(Te){if(r===void 0)throw Error($(407));r=r()}else{if(r=e(),rt===null)throw Error($(349));js&30||fx(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,i0(mx.bind(null,n,i,t),[t]),n.flags|=2048,Da(9,px.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=wr(),e=rt.identifierPrefix;if(Te){var r=$r,n=Ur;r=(n&~(1<<32-ur(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ja++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Hk++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Yk={readContext:Xt,useCallback:Ex,useContext:Xt,useEffect:em,useImperativeHandle:bx,useInsertionEffect:_x,useLayoutEffect:wx,useMemo:Tx,useReducer:Zh,useRef:vx,useState:function(){return Zh(Oa)},useDebugValue:tm,useDeferredValue:function(t){var e=Zt();return Sx(e,Qe.memoizedState,t)},useTransition:function(){var t=Zh(Oa)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:hx,useSyncExternalStore:dx,useId:kx,unstable_isNewReconciler:!1},Xk={readContext:Xt,useCallback:Ex,useContext:Xt,useEffect:em,useImperativeHandle:bx,useInsertionEffect:_x,useLayoutEffect:wx,useMemo:Tx,useReducer:ed,useRef:vx,useState:function(){return ed(Oa)},useDebugValue:tm,useDeferredValue:function(t){var e=Zt();return Qe===null?e.memoizedState=t:Sx(e,Qe.memoizedState,t)},useTransition:function(){var t=ed(Oa)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:hx,useSyncExternalStore:dx,useId:kx,unstable_isNewReconciler:!1};function nr(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function uf(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Re({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ru={isMounted:function(t){return(t=t._reactInternals)?Fs(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Et(),s=On(t),i=zr(n,s);i.payload=e,r!=null&&(i.callback=r),e=Pn(t,i,s),e!==null&&(hr(e,t,s,n),uc(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Et(),s=On(t),i=zr(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Pn(t,i,s),e!==null&&(hr(e,t,s,n),uc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Et(),n=On(t),s=zr(r,n);s.tag=2,e!=null&&(s.callback=e),e=Pn(t,s,n),e!==null&&(hr(e,t,n,r),uc(e,t,n))}};function o0(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ia(r,n)||!Ia(s,i):!0}function Cx(t,e,r){var n=!1,s=Wn,i=e.contextType;return typeof i=="object"&&i!==null?i=Xt(i):(s=Ct(e)?Rs:vt.current,n=e.contextTypes,i=(n=n!=null)?Mi(t,s):Wn),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ru,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function a0(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Ru.enqueueReplaceState(e,e.state,null)}function hf(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Kp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Xt(i):(i=Ct(e)?Rs:vt.current,s.context=Mi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(uf(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ru.enqueueReplaceState(s,s.state,null),Hc(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Bi(t,e){try{var r="",n=e;do r+=kS(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function td(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function df(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Zk=typeof WeakMap=="function"?WeakMap:Map;function Rx(t,e,r){r=zr(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Yc||(Yc=!0,bf=n),df(t,e)},r}function Px(t,e,r){r=zr(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){df(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){df(t,e),typeof n!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function l0(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Zk;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=fI.bind(null,t,e,r),e.then(t,t))}function c0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function u0(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=zr(-1,1),e.tag=2,Pn(r,e,1))),r.lanes|=1),t)}var eI=Yr.ReactCurrentOwner,At=!1;function bt(t,e,r,n){e.child=t===null?ax(e,null,r,n):$i(e,t.child,r,n)}function h0(t,e,r,n,s){r=r.render;var i=e.ref;return ki(e,s),n=Xp(t,e,r,n,i,s),r=Zp(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Kr(t,e,s)):(Te&&r&&$p(e),e.flags|=1,bt(t,e,n,s),e.child)}function d0(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!cm(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,jx(t,e,i,n,s)):(t=gc(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Ia,r(o,n)&&t.ref===e.ref)return Kr(t,e,s)}return e.flags|=1,t=Dn(i,n),t.ref=e.ref,t.return=e,e.child=t}function jx(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Ia(i,n)&&t.ref===e.ref)if(At=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,Kr(t,e,s)}return ff(t,e,r,n,s)}function Ox(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(_i,Ot),Ot|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(_i,Ot),Ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,_e(_i,Ot),Ot|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,_e(_i,Ot),Ot|=n;return bt(t,e,s,r),e.child}function Dx(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function ff(t,e,r,n,s){var i=Ct(r)?Rs:vt.current;return i=Mi(e,i),ki(e,s),r=Xp(t,e,r,n,i,s),n=Zp(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Kr(t,e,s)):(Te&&n&&$p(e),e.flags|=1,bt(t,e,r,s),e.child)}function f0(t,e,r,n,s){if(Ct(r)){var i=!0;Fc(e)}else i=!1;if(ki(e,s),e.stateNode===null)fc(t,e),Cx(e,r,n),hf(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,h=r.contextType;typeof h=="object"&&h!==null?h=Xt(h):(h=Ct(r)?Rs:vt.current,h=Mi(e,h));var d=r.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==h)&&a0(e,o,n,h),pn=!1;var m=e.memoizedState;o.state=m,Hc(e,n,o,s),l=e.memoizedState,a!==n||m!==l||Nt.current||pn?(typeof d=="function"&&(uf(e,r,d,n),l=e.memoizedState),(a=pn||o0(e,r,a,n,m,l,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=h,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,cx(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:nr(e.type,a),o.props=h,p=e.pendingProps,m=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Xt(l):(l=Ct(r)?Rs:vt.current,l=Mi(e,l));var y=r.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&a0(e,o,n,l),pn=!1,m=e.memoizedState,o.state=m,Hc(e,n,o,s);var _=e.memoizedState;a!==p||m!==_||Nt.current||pn?(typeof y=="function"&&(uf(e,r,y,n),_=e.memoizedState),(h=pn||o0(e,r,h,n,m,_,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=_),o.props=n,o.state=_,o.context=l,n=h):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return pf(t,e,r,n,i,s)}function pf(t,e,r,n,s,i){Dx(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&Xy(e,r,!1),Kr(t,e,i);n=e.stateNode,eI.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=$i(e,t.child,null,i),e.child=$i(e,null,a,i)):bt(t,e,a,i),e.memoizedState=n.state,s&&Xy(e,r,!0),e.child}function Lx(t){var e=t.stateNode;e.pendingContext?Yy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yy(t,e.context,!1),Gp(t,e.containerInfo)}function p0(t,e,r,n,s){return Ui(),Bp(s),e.flags|=256,bt(t,e,r,n),e.child}var mf={dehydrated:null,treeContext:null,retryLane:0};function gf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Vx(t,e,r){var n=e.pendingProps,s=Ae.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_e(Ae,s&1),t===null)return lf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ou(o,n,0,null),t=Is(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=gf(r),e.memoizedState=mf,t):rm(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return tI(t,e,o,n,a,s,r);if(i){i=n.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Dn(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Dn(a,i):(i=Is(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?gf(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=mf,n}return i=t.child,t=i.sibling,n=Dn(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function rm(t,e){return e=Ou({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Bl(t,e,r,n){return n!==null&&Bp(n),$i(e,t.child,null,r),t=rm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tI(t,e,r,n,s,i,o){if(r)return e.flags&256?(e.flags&=-257,n=td(Error($(422))),Bl(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Ou({mode:"visible",children:n.children},s,0,null),i=Is(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&$i(e,t.child,null,o),e.child.memoizedState=gf(o),e.memoizedState=mf,i);if(!(e.mode&1))return Bl(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error($(419)),n=td(i,n,void 0),Bl(t,e,o,n)}if(a=(o&t.childLanes)!==0,At||a){if(n=rt,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Hr(t,s),hr(n,t,s,-1))}return lm(),n=td(Error($(421))),Bl(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=pI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Vt=Rn(s.nextSibling),Mt=e,Te=!0,lr=null,t!==null&&(Wt[Ht++]=Ur,Wt[Ht++]=$r,Wt[Ht++]=Ps,Ur=t.id,$r=t.overflow,Ps=e),e=rm(e,n.children),e.flags|=4096,e)}function m0(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),cf(t.return,e,r)}function rd(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Mx(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(bt(t,e,n.children,r),n=Ae.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&m0(t,r,e);else if(t.tag===19)m0(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(_e(Ae,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Kc(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),rd(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Kc(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}rd(e,!0,r,null,i);break;case"together":rd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Os|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,r=Dn(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Dn(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function rI(t,e,r){switch(e.tag){case 3:Lx(e),Ui();break;case 5:ux(e);break;case 1:Ct(e.type)&&Fc(e);break;case 4:Gp(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;_e(qc,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(_e(Ae,Ae.current&1),e.flags|=128,null):r&e.child.childLanes?Vx(t,e,r):(_e(Ae,Ae.current&1),t=Kr(t,e,r),t!==null?t.sibling:null);_e(Ae,Ae.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Mx(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(Ae,Ae.current),n)break;return null;case 22:case 23:return e.lanes=0,Ox(t,e,r)}return Kr(t,e,r)}var Ux,yf,$x,Fx;Ux=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};yf=function(){};$x=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Es(kr.current);var i=null;switch(r){case"input":s=Md(t,s),n=Md(t,n),i=[];break;case"select":s=Re({},s,{value:void 0}),n=Re({},n,{value:void 0}),i=[];break;case"textarea":s=Fd(t,s),n=Fd(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Uc)}zd(r,n);var o;r=null;for(h in s)if(!n.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var a=s[h];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(wa.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in n){var l=n[h];if(a=s!=null?s[h]:void 0,n.hasOwnProperty(h)&&l!==a&&(l!=null||a!=null))if(h==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(h,r)),r=l;else h==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(h,l)):h==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(h,""+l):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(wa.hasOwnProperty(h)?(l!=null&&h==="onScroll"&&be("scroll",t),i||a===l||(i=[])):(i=i||[]).push(h,l))}r&&(i=i||[]).push("style",r);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};Fx=function(t,e,r,n){r!==n&&(e.flags|=4)};function Vo(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function nI(t,e,r){var n=e.pendingProps;switch(Fp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return Ct(e.type)&&$c(),dt(e),null;case 3:return n=e.stateNode,Fi(),Ee(Nt),Ee(vt),Jp(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&($l(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,lr!==null&&(Sf(lr),lr=null))),yf(t,e),dt(e),null;case 5:Qp(e);var s=Es(Pa.current);if(r=e.type,t!==null&&e.stateNode!=null)$x(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error($(166));return dt(e),null}if(t=Es(kr.current),$l(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[br]=e,n[Ca]=i,t=(e.mode&1)!==0,r){case"dialog":be("cancel",n),be("close",n);break;case"iframe":case"object":case"embed":be("load",n);break;case"video":case"audio":for(s=0;s<Wo.length;s++)be(Wo[s],n);break;case"source":be("error",n);break;case"img":case"image":case"link":be("error",n),be("load",n);break;case"details":be("toggle",n);break;case"input":Ty(n,i),be("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},be("invalid",n);break;case"textarea":ky(n,i),be("invalid",n)}zd(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ul(n.textContent,a,t),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ul(n.textContent,a,t),s=["children",""+a]):wa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&be("scroll",n)}switch(r){case"input":Rl(n),Sy(n,i,!0);break;case"textarea":Rl(n),Iy(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Uc)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mw(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[br]=e,t[Ca]=n,Ux(t,e,!1,!1),e.stateNode=t;e:{switch(o=qd(r,n),r){case"dialog":be("cancel",t),be("close",t),s=n;break;case"iframe":case"object":case"embed":be("load",t),s=n;break;case"video":case"audio":for(s=0;s<Wo.length;s++)be(Wo[s],t);s=n;break;case"source":be("error",t),s=n;break;case"img":case"image":case"link":be("error",t),be("load",t),s=n;break;case"details":be("toggle",t),s=n;break;case"input":Ty(t,n),s=Md(t,n),be("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Re({},n,{value:void 0}),be("invalid",t);break;case"textarea":ky(t,n),s=Fd(t,n),be("invalid",t);break;default:s=n}zd(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?vw(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&gw(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&xa(t,l):typeof l=="number"&&xa(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(wa.hasOwnProperty(i)?l!=null&&i==="onScroll"&&be("scroll",t):l!=null&&kp(t,i,l,o))}switch(r){case"input":Rl(t),Sy(t,n,!1);break;case"textarea":Rl(t),Iy(t);break;case"option":n.value!=null&&t.setAttribute("value",""+qn(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?bi(t,!!n.multiple,i,!1):n.defaultValue!=null&&bi(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Uc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)Fx(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error($(166));if(r=Es(Pa.current),Es(kr.current),$l(e)){if(n=e.stateNode,r=e.memoizedProps,n[br]=e,(i=n.nodeValue!==r)&&(t=Mt,t!==null))switch(t.tag){case 3:Ul(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ul(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[br]=e,e.stateNode=n}return dt(e),null;case 13:if(Ee(Ae),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Vt!==null&&e.mode&1&&!(e.flags&128))ix(),Ui(),e.flags|=98560,i=!1;else if(i=$l(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[br]=e}else Ui(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),i=!1}else lr!==null&&(Sf(lr),lr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?Je===0&&(Je=3):lm())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return Fi(),yf(t,e),t===null&&Aa(e.stateNode.containerInfo),dt(e),null;case 10:return Wp(e.type._context),dt(e),null;case 17:return Ct(e.type)&&$c(),dt(e),null;case 19:if(Ee(Ae),i=e.memoizedState,i===null)return dt(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)Vo(i,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Kc(t),o!==null){for(e.flags|=128,Vo(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return _e(Ae,Ae.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ue()>zi&&(e.flags|=128,n=!0,Vo(i,!1),e.lanes=4194304)}else{if(!n)if(t=Kc(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Vo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Te)return dt(e),null}else 2*Ue()-i.renderingStartTime>zi&&r!==1073741824&&(e.flags|=128,n=!0,Vo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ue(),e.sibling=null,r=Ae.current,_e(Ae,n?r&1|2:r&1),e):(dt(e),null);case 22:case 23:return am(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ot&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function sI(t,e){switch(Fp(e),e.tag){case 1:return Ct(e.type)&&$c(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fi(),Ee(Nt),Ee(vt),Jp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qp(e),null;case 13:if(Ee(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Ui()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Ae),null;case 4:return Fi(),null;case 10:return Wp(e.type._context),null;case 22:case 23:return am(),null;case 24:return null;default:return null}}var zl=!1,mt=!1,iI=typeof WeakSet=="function"?WeakSet:Set,W=null;function vi(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){De(t,e,n)}else r.current=null}function vf(t,e,r){try{r()}catch(n){De(t,e,n)}}var g0=!1;function oI(t,e){if(ef=Lc,t=Hw(),Up(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,h=0,d=0,p=t,m=null;t:for(;;){for(var y;p!==r||s!==0&&p.nodeType!==3||(a=o+s),p!==i||n!==0&&p.nodeType!==3||(l=o+n),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===t)break t;if(m===r&&++h===s&&(a=o),m===i&&++d===n&&(l=o),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(tf={focusedElem:t,selectionRange:r},Lc=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var b=_.memoizedProps,I=_.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?b:nr(e.type,b),I);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(R){De(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return _=g0,g0=!1,_}function la(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&vf(e,r,i)}s=s.next}while(s!==n)}}function Pu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function _f(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Bx(t){var e=t.alternate;e!==null&&(t.alternate=null,Bx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[br],delete e[Ca],delete e[sf],delete e[Bk],delete e[zk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zx(t){return t.tag===5||t.tag===3||t.tag===4}function y0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wf(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Uc));else if(n!==4&&(t=t.child,t!==null))for(wf(t,e,r),t=t.sibling;t!==null;)wf(t,e,r),t=t.sibling}function xf(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(xf(t,e,r),t=t.sibling;t!==null;)xf(t,e,r),t=t.sibling}var it=null,ir=!1;function cn(t,e,r){for(r=r.child;r!==null;)qx(t,e,r),r=r.sibling}function qx(t,e,r){if(Sr&&typeof Sr.onCommitFiberUnmount=="function")try{Sr.onCommitFiberUnmount(Tu,r)}catch{}switch(r.tag){case 5:mt||vi(r,e);case 6:var n=it,s=ir;it=null,cn(t,e,r),it=n,ir=s,it!==null&&(ir?(t=it,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):it.removeChild(r.stateNode));break;case 18:it!==null&&(ir?(t=it,r=r.stateNode,t.nodeType===8?Qh(t.parentNode,r):t.nodeType===1&&Qh(t,r),Sa(t)):Qh(it,r.stateNode));break;case 4:n=it,s=ir,it=r.stateNode.containerInfo,ir=!0,cn(t,e,r),it=n,ir=s;break;case 0:case 11:case 14:case 15:if(!mt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&vf(r,e,o),s=s.next}while(s!==n)}cn(t,e,r);break;case 1:if(!mt&&(vi(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){De(r,e,a)}cn(t,e,r);break;case 21:cn(t,e,r);break;case 22:r.mode&1?(mt=(n=mt)||r.memoizedState!==null,cn(t,e,r),mt=n):cn(t,e,r);break;default:cn(t,e,r)}}function v0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new iI),e.forEach(function(n){var s=mI.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function tr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:it=a.stateNode,ir=!1;break e;case 3:it=a.stateNode.containerInfo,ir=!0;break e;case 4:it=a.stateNode.containerInfo,ir=!0;break e}a=a.return}if(it===null)throw Error($(160));qx(i,o,s),it=null,ir=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(h){De(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Wx(e,t),e=e.sibling}function Wx(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tr(e,t),_r(t),n&4){try{la(3,t,t.return),Pu(3,t)}catch(b){De(t,t.return,b)}try{la(5,t,t.return)}catch(b){De(t,t.return,b)}}break;case 1:tr(e,t),_r(t),n&512&&r!==null&&vi(r,r.return);break;case 5:if(tr(e,t),_r(t),n&512&&r!==null&&vi(r,r.return),t.flags&32){var s=t.stateNode;try{xa(s,"")}catch(b){De(t,t.return,b)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&fw(s,i),qd(a,o);var h=qd(a,i);for(o=0;o<l.length;o+=2){var d=l[o],p=l[o+1];d==="style"?vw(s,p):d==="dangerouslySetInnerHTML"?gw(s,p):d==="children"?xa(s,p):kp(s,d,p,h)}switch(a){case"input":Ud(s,i);break;case"textarea":pw(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?bi(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?bi(s,!!i.multiple,i.defaultValue,!0):bi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ca]=i}catch(b){De(t,t.return,b)}}break;case 6:if(tr(e,t),_r(t),n&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){De(t,t.return,b)}}break;case 3:if(tr(e,t),_r(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Sa(e.containerInfo)}catch(b){De(t,t.return,b)}break;case 4:tr(e,t),_r(t);break;case 13:tr(e,t),_r(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(im=Ue())),n&4&&v0(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(mt=(h=mt)||d,tr(e,t),mt=h):tr(e,t),_r(t),n&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!d&&t.mode&1)for(W=t,d=t.child;d!==null;){for(p=W=d;W!==null;){switch(m=W,y=m.child,m.tag){case 0:case 11:case 14:case 15:la(4,m,m.return);break;case 1:vi(m,m.return);var _=m.stateNode;if(typeof _.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(b){De(n,r,b)}}break;case 5:vi(m,m.return);break;case 22:if(m.memoizedState!==null){w0(p);continue}}y!==null?(y.return=m,W=y):w0(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{s=p.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=yw("display",o))}catch(b){De(t,t.return,b)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(b){De(t,t.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:tr(e,t),_r(t),n&4&&v0(t);break;case 21:break;default:tr(e,t),_r(t)}}function _r(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(zx(r)){var n=r;break e}r=r.return}throw Error($(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(xa(s,""),n.flags&=-33);var i=y0(t);xf(t,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=y0(t);wf(t,a,o);break;default:throw Error($(161))}}catch(l){De(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function aI(t,e,r){W=t,Hx(t)}function Hx(t,e,r){for(var n=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||zl;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||mt;a=zl;var h=mt;if(zl=o,(mt=l)&&!h)for(W=s;W!==null;)o=W,l=o.child,o.tag===22&&o.memoizedState!==null?x0(s):l!==null?(l.return=o,W=l):x0(s);for(;i!==null;)W=i,Hx(i),i=i.sibling;W=s,zl=a,mt=h}_0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):_0(t)}}function _0(t){for(;W!==null;){var e=W;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||Pu(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!mt)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:nr(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&n0(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}n0(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Sa(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}mt||e.flags&512&&_f(e)}catch(m){De(e,e.return,m)}}if(e===t){W=null;break}if(r=e.sibling,r!==null){r.return=e.return,W=r;break}W=e.return}}function w0(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var r=e.sibling;if(r!==null){r.return=e.return,W=r;break}W=e.return}}function x0(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Pu(4,e)}catch(l){De(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){De(e,s,l)}}var i=e.return;try{_f(e)}catch(l){De(e,i,l)}break;case 5:var o=e.return;try{_f(e)}catch(l){De(e,o,l)}}}catch(l){De(e,e.return,l)}if(e===t){W=null;break}var a=e.sibling;if(a!==null){a.return=e.return,W=a;break}W=e.return}}var lI=Math.ceil,Jc=Yr.ReactCurrentDispatcher,nm=Yr.ReactCurrentOwner,Yt=Yr.ReactCurrentBatchConfig,fe=0,rt=null,ze=null,at=0,Ot=0,_i=Zn(0),Je=0,La=null,Os=0,ju=0,sm=0,ca=null,It=null,im=0,zi=1/0,Lr=null,Yc=!1,bf=null,jn=null,ql=!1,Tn=null,Xc=0,ua=0,Ef=null,pc=-1,mc=0;function Et(){return fe&6?Ue():pc!==-1?pc:pc=Ue()}function On(t){return t.mode&1?fe&2&&at!==0?at&-at:Wk.transition!==null?(mc===0&&(mc=Cw()),mc):(t=me,t!==0||(t=window.event,t=t===void 0?16:Vw(t.type)),t):1}function hr(t,e,r,n){if(50<ua)throw ua=0,Ef=null,Error($(185));tl(t,r,n),(!(fe&2)||t!==rt)&&(t===rt&&(!(fe&2)&&(ju|=r),Je===4&&yn(t,at)),Rt(t,n),r===1&&fe===0&&!(e.mode&1)&&(zi=Ue()+500,Nu&&es()))}function Rt(t,e){var r=t.callbackNode;WS(t,e);var n=Dc(t,t===rt?at:0);if(n===0)r!==null&&Cy(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Cy(r),e===1)t.tag===0?qk(b0.bind(null,t)):rx(b0.bind(null,t)),$k(function(){!(fe&6)&&es()}),r=null;else{switch(Rw(n)){case 1:r=Rp;break;case 4:r=Aw;break;case 16:r=Oc;break;case 536870912:r=Nw;break;default:r=Oc}r=eb(r,Kx.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Kx(t,e){if(pc=-1,mc=0,fe&6)throw Error($(327));var r=t.callbackNode;if(Ii()&&t.callbackNode!==r)return null;var n=Dc(t,t===rt?at:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Zc(t,n);else{e=n;var s=fe;fe|=2;var i=Qx();(rt!==t||at!==e)&&(Lr=null,zi=Ue()+500,ks(t,e));do try{hI();break}catch(a){Gx(t,a)}while(!0);qp(),Jc.current=i,fe=s,ze!==null?e=0:(rt=null,at=0,e=Je)}if(e!==0){if(e===2&&(s=Qd(t),s!==0&&(n=s,e=Tf(t,s))),e===1)throw r=La,ks(t,0),yn(t,n),Rt(t,Ue()),r;if(e===6)yn(t,n);else{if(s=t.current.alternate,!(n&30)&&!cI(s)&&(e=Zc(t,n),e===2&&(i=Qd(t),i!==0&&(n=i,e=Tf(t,i))),e===1))throw r=La,ks(t,0),yn(t,n),Rt(t,Ue()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error($(345));case 2:gs(t,It,Lr);break;case 3:if(yn(t,n),(n&130023424)===n&&(e=im+500-Ue(),10<e)){if(Dc(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Et(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=nf(gs.bind(null,t,It,Lr),e);break}gs(t,It,Lr);break;case 4:if(yn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-ur(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=Ue()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*lI(n/1960))-n,10<n){t.timeoutHandle=nf(gs.bind(null,t,It,Lr),n);break}gs(t,It,Lr);break;case 5:gs(t,It,Lr);break;default:throw Error($(329))}}}return Rt(t,Ue()),t.callbackNode===r?Kx.bind(null,t):null}function Tf(t,e){var r=ca;return t.current.memoizedState.isDehydrated&&(ks(t,e).flags|=256),t=Zc(t,e),t!==2&&(e=It,It=r,e!==null&&Sf(e)),t}function Sf(t){It===null?It=t:It.push.apply(It,t)}function cI(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!dr(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yn(t,e){for(e&=~sm,e&=~ju,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ur(e),n=1<<r;t[r]=-1,e&=~n}}function b0(t){if(fe&6)throw Error($(327));Ii();var e=Dc(t,0);if(!(e&1))return Rt(t,Ue()),null;var r=Zc(t,e);if(t.tag!==0&&r===2){var n=Qd(t);n!==0&&(e=n,r=Tf(t,n))}if(r===1)throw r=La,ks(t,0),yn(t,e),Rt(t,Ue()),r;if(r===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gs(t,It,Lr),Rt(t,Ue()),null}function om(t,e){var r=fe;fe|=1;try{return t(e)}finally{fe=r,fe===0&&(zi=Ue()+500,Nu&&es())}}function Ds(t){Tn!==null&&Tn.tag===0&&!(fe&6)&&Ii();var e=fe;fe|=1;var r=Yt.transition,n=me;try{if(Yt.transition=null,me=1,t)return t()}finally{me=n,Yt.transition=r,fe=e,!(fe&6)&&es()}}function am(){Ot=_i.current,Ee(_i)}function ks(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Uk(r)),ze!==null)for(r=ze.return;r!==null;){var n=r;switch(Fp(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&$c();break;case 3:Fi(),Ee(Nt),Ee(vt),Jp();break;case 5:Qp(n);break;case 4:Fi();break;case 13:Ee(Ae);break;case 19:Ee(Ae);break;case 10:Wp(n.type._context);break;case 22:case 23:am()}r=r.return}if(rt=t,ze=t=Dn(t.current,null),at=Ot=e,Je=0,La=null,sm=ju=Os=0,It=ca=null,bs!==null){for(e=0;e<bs.length;e++)if(r=bs[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}bs=null}return t}function Gx(t,e){do{var r=ze;try{if(qp(),hc.current=Qc,Gc){for(var n=Ne.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Gc=!1}if(js=0,tt=Qe=Ne=null,aa=!1,ja=0,nm.current=null,r===null||r.return===null){Je=1,La=e,ze=null;break}e:{var i=t,o=r.return,a=r,l=e;if(e=at,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=l,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=c0(o);if(y!==null){y.flags&=-257,u0(y,o,a,i,e),y.mode&1&&l0(i,h,e),e=y,l=h;var _=e.updateQueue;if(_===null){var b=new Set;b.add(l),e.updateQueue=b}else _.add(l);break e}else{if(!(e&1)){l0(i,h,e),lm();break e}l=Error($(426))}}else if(Te&&a.mode&1){var I=c0(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),u0(I,o,a,i,e),Bp(Bi(l,a));break e}}i=l=Bi(l,a),Je!==4&&(Je=2),ca===null?ca=[i]:ca.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=Rx(i,l,e);r0(i,w);break e;case 1:a=l;var v=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(jn===null||!jn.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=Px(i,a,e);r0(i,R);break e}}i=i.return}while(i!==null)}Yx(r)}catch(D){e=D,ze===r&&r!==null&&(ze=r=r.return);continue}break}while(!0)}function Qx(){var t=Jc.current;return Jc.current=Qc,t===null?Qc:t}function lm(){(Je===0||Je===3||Je===2)&&(Je=4),rt===null||!(Os&268435455)&&!(ju&268435455)||yn(rt,at)}function Zc(t,e){var r=fe;fe|=2;var n=Qx();(rt!==t||at!==e)&&(Lr=null,ks(t,e));do try{uI();break}catch(s){Gx(t,s)}while(!0);if(qp(),fe=r,Jc.current=n,ze!==null)throw Error($(261));return rt=null,at=0,Je}function uI(){for(;ze!==null;)Jx(ze)}function hI(){for(;ze!==null&&!LS();)Jx(ze)}function Jx(t){var e=Zx(t.alternate,t,Ot);t.memoizedProps=t.pendingProps,e===null?Yx(t):ze=e,nm.current=null}function Yx(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=sI(r,e),r!==null){r.flags&=32767,ze=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,ze=null;return}}else if(r=nI(r,e,Ot),r!==null){ze=r;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);Je===0&&(Je=5)}function gs(t,e,r){var n=me,s=Yt.transition;try{Yt.transition=null,me=1,dI(t,e,r,n)}finally{Yt.transition=s,me=n}return null}function dI(t,e,r,n){do Ii();while(Tn!==null);if(fe&6)throw Error($(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(HS(t,i),t===rt&&(ze=rt=null,at=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ql||(ql=!0,eb(Oc,function(){return Ii(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Yt.transition,Yt.transition=null;var o=me;me=1;var a=fe;fe|=4,nm.current=null,oI(t,r),Wx(r,t),Pk(tf),Lc=!!ef,tf=ef=null,t.current=r,aI(r),VS(),fe=a,me=o,Yt.transition=i}else t.current=r;if(ql&&(ql=!1,Tn=t,Xc=s),i=t.pendingLanes,i===0&&(jn=null),$S(r.stateNode),Rt(t,Ue()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Yc)throw Yc=!1,t=bf,bf=null,t;return Xc&1&&t.tag!==0&&Ii(),i=t.pendingLanes,i&1?t===Ef?ua++:(ua=0,Ef=t):ua=0,es(),null}function Ii(){if(Tn!==null){var t=Rw(Xc),e=Yt.transition,r=me;try{if(Yt.transition=null,me=16>t?16:t,Tn===null)var n=!1;else{if(t=Tn,Tn=null,Xc=0,fe&6)throw Error($(331));var s=fe;for(fe|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var h=a[l];for(W=h;W!==null;){var d=W;switch(d.tag){case 0:case 11:case 15:la(8,d,i)}var p=d.child;if(p!==null)p.return=d,W=p;else for(;W!==null;){d=W;var m=d.sibling,y=d.return;if(Bx(d),d===h){W=null;break}if(m!==null){m.return=y,W=m;break}W=y}}}var _=i.alternate;if(_!==null){var b=_.child;if(b!==null){_.child=null;do{var I=b.sibling;b.sibling=null,b=I}while(b!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:la(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,W=w;break e}W=i.return}}var v=t.current;for(W=v;W!==null;){o=W;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,W=E;else e:for(o=v;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Pu(9,a)}}catch(D){De(a,a.return,D)}if(a===o){W=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,W=R;break e}W=a.return}}if(fe=s,es(),Sr&&typeof Sr.onPostCommitFiberRoot=="function")try{Sr.onPostCommitFiberRoot(Tu,t)}catch{}n=!0}return n}finally{me=r,Yt.transition=e}}return!1}function E0(t,e,r){e=Bi(r,e),e=Rx(t,e,1),t=Pn(t,e,1),e=Et(),t!==null&&(tl(t,1,e),Rt(t,e))}function De(t,e,r){if(t.tag===3)E0(t,t,r);else for(;e!==null;){if(e.tag===3){E0(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(jn===null||!jn.has(n))){t=Bi(r,t),t=Px(e,t,1),e=Pn(e,t,1),t=Et(),e!==null&&(tl(e,1,t),Rt(e,t));break}}e=e.return}}function fI(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&r,rt===t&&(at&r)===r&&(Je===4||Je===3&&(at&130023424)===at&&500>Ue()-im?ks(t,0):sm|=r),Rt(t,e)}function Xx(t,e){e===0&&(t.mode&1?(e=Ol,Ol<<=1,!(Ol&130023424)&&(Ol=4194304)):e=1);var r=Et();t=Hr(t,e),t!==null&&(tl(t,e,r),Rt(t,r))}function pI(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Xx(t,r)}function mI(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error($(314))}n!==null&&n.delete(e),Xx(t,r)}var Zx;Zx=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nt.current)At=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return At=!1,rI(t,e,r);At=!!(t.flags&131072)}else At=!1,Te&&e.flags&1048576&&nx(e,zc,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;fc(t,e),t=e.pendingProps;var s=Mi(e,vt.current);ki(e,r),s=Xp(null,e,n,t,s,r);var i=Zp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ct(n)?(i=!0,Fc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Kp(e),s.updater=Ru,e.stateNode=s,s._reactInternals=e,hf(e,n,t,r),e=pf(null,e,n,!0,i,r)):(e.tag=0,Te&&i&&$p(e),bt(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(fc(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=yI(n),t=nr(n,t),s){case 0:e=ff(null,e,n,t,r);break e;case 1:e=f0(null,e,n,t,r);break e;case 11:e=h0(null,e,n,t,r);break e;case 14:e=d0(null,e,n,nr(n.type,t),r);break e}throw Error($(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:nr(n,s),ff(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:nr(n,s),f0(t,e,n,s,r);case 3:e:{if(Lx(e),t===null)throw Error($(387));n=e.pendingProps,i=e.memoizedState,s=i.element,cx(t,e),Hc(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Bi(Error($(423)),e),e=p0(t,e,n,r,s);break e}else if(n!==s){s=Bi(Error($(424)),e),e=p0(t,e,n,r,s);break e}else for(Vt=Rn(e.stateNode.containerInfo.firstChild),Mt=e,Te=!0,lr=null,r=ax(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ui(),n===s){e=Kr(t,e,r);break e}bt(t,e,n,r)}e=e.child}return e;case 5:return ux(e),t===null&&lf(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,rf(n,s)?o=null:i!==null&&rf(n,i)&&(e.flags|=32),Dx(t,e),bt(t,e,o,r),e.child;case 6:return t===null&&lf(e),null;case 13:return Vx(t,e,r);case 4:return Gp(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=$i(e,null,n,r):bt(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:nr(n,s),h0(t,e,n,s,r);case 7:return bt(t,e,e.pendingProps,r),e.child;case 8:return bt(t,e,e.pendingProps.children,r),e.child;case 12:return bt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,_e(qc,n._currentValue),n._currentValue=o,i!==null)if(dr(i.value,o)){if(i.children===s.children&&!Nt.current){e=Kr(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=zr(-1,r&-r),l.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?l.next=l:(l.next=d.next,d.next=l),h.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),cf(i.return,r,e),a.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),cf(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}bt(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,ki(e,r),s=Xt(s),n=n(s),e.flags|=1,bt(t,e,n,r),e.child;case 14:return n=e.type,s=nr(n,e.pendingProps),s=nr(n.type,s),d0(t,e,n,s,r);case 15:return jx(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:nr(n,s),fc(t,e),e.tag=1,Ct(n)?(t=!0,Fc(e)):t=!1,ki(e,r),Cx(e,n,s),hf(e,n,s,r),pf(null,e,n,!0,t,r);case 19:return Mx(t,e,r);case 22:return Ox(t,e,r)}throw Error($(156,e.tag))};function eb(t,e){return Iw(t,e)}function gI(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,e,r,n){return new gI(t,e,r,n)}function cm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yI(t){if(typeof t=="function")return cm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ap)return 11;if(t===Np)return 14}return 2}function Dn(t,e){var r=t.alternate;return r===null?(r=Jt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function gc(t,e,r,n,s,i){var o=2;if(n=t,typeof t=="function")cm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ci:return Is(r.children,s,i,e);case Ip:o=8,s|=8;break;case Od:return t=Jt(12,r,e,s|2),t.elementType=Od,t.lanes=i,t;case Dd:return t=Jt(13,r,e,s),t.elementType=Dd,t.lanes=i,t;case Ld:return t=Jt(19,r,e,s),t.elementType=Ld,t.lanes=i,t;case uw:return Ou(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lw:o=10;break e;case cw:o=9;break e;case Ap:o=11;break e;case Np:o=14;break e;case fn:o=16,n=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Jt(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Is(t,e,r,n){return t=Jt(7,t,n,e),t.lanes=r,t}function Ou(t,e,r,n){return t=Jt(22,t,n,e),t.elementType=uw,t.lanes=r,t.stateNode={isHidden:!1},t}function nd(t,e,r){return t=Jt(6,t,null,e),t.lanes=r,t}function sd(t,e,r){return e=Jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vI(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mh(0),this.expirationTimes=Mh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mh(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function um(t,e,r,n,s,i,o,a,l){return t=new vI(t,e,r,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Jt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kp(i),t}function _I(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:li,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function tb(t){if(!t)return Wn;t=t._reactInternals;e:{if(Fs(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ct(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var r=t.type;if(Ct(r))return tx(t,r,e)}return e}function rb(t,e,r,n,s,i,o,a,l){return t=um(r,n,!0,t,s,i,o,a,l),t.context=tb(null),r=t.current,n=Et(),s=On(r),i=zr(n,s),i.callback=e??null,Pn(r,i,s),t.current.lanes=s,tl(t,s,n),Rt(t,n),t}function Du(t,e,r,n){var s=e.current,i=Et(),o=On(s);return r=tb(r),e.context===null?e.context=r:e.pendingContext=r,e=zr(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Pn(s,e,o),t!==null&&(hr(t,s,o,i),uc(t,s,o)),o}function eu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function T0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function hm(t,e){T0(t,e),(t=t.alternate)&&T0(t,e)}function wI(){return null}var nb=typeof reportError=="function"?reportError:function(t){console.error(t)};function dm(t){this._internalRoot=t}Lu.prototype.render=dm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Du(t,e,null,null)};Lu.prototype.unmount=dm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ds(function(){Du(null,t,null,null)}),e[Wr]=null}};function Lu(t){this._internalRoot=t}Lu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ow();t={blockedOn:null,target:t,priority:e};for(var r=0;r<gn.length&&e!==0&&e<gn[r].priority;r++);gn.splice(r,0,t),r===0&&Lw(t)}};function fm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function S0(){}function xI(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var h=eu(o);i.call(h)}}var o=rb(e,n,t,0,null,!1,!1,"",S0);return t._reactRootContainer=o,t[Wr]=o.current,Aa(t.nodeType===8?t.parentNode:t),Ds(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var h=eu(l);a.call(h)}}var l=um(t,0,!1,null,null,!1,!1,"",S0);return t._reactRootContainer=l,t[Wr]=l.current,Aa(t.nodeType===8?t.parentNode:t),Ds(function(){Du(e,l,r,n)}),l}function Mu(t,e,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=eu(o);a.call(l)}}Du(e,o,t,s)}else o=xI(r,e,t,s,n);return eu(o)}Pw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=qo(e.pendingLanes);r!==0&&(Pp(e,r|1),Rt(e,Ue()),!(fe&6)&&(zi=Ue()+500,es()))}break;case 13:Ds(function(){var n=Hr(t,1);if(n!==null){var s=Et();hr(n,t,1,s)}}),hm(t,1)}};jp=function(t){if(t.tag===13){var e=Hr(t,134217728);if(e!==null){var r=Et();hr(e,t,134217728,r)}hm(t,134217728)}};jw=function(t){if(t.tag===13){var e=On(t),r=Hr(t,e);if(r!==null){var n=Et();hr(r,t,e,n)}hm(t,e)}};Ow=function(){return me};Dw=function(t,e){var r=me;try{return me=t,e()}finally{me=r}};Hd=function(t,e,r){switch(e){case"input":if(Ud(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Au(n);if(!s)throw Error($(90));dw(n),Ud(n,s)}}}break;case"textarea":pw(t,r);break;case"select":e=r.value,e!=null&&bi(t,!!r.multiple,e,!1)}};xw=om;bw=Ds;var bI={usingClientEntryPoint:!1,Events:[nl,fi,Au,_w,ww,om]},Mo={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EI={bundleType:Mo.bundleType,version:Mo.version,rendererPackageName:Mo.rendererPackageName,rendererConfig:Mo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Sw(t),t===null?null:t.stateNode},findFiberByHostInstance:Mo.findFiberByHostInstance||wI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wl.isDisabled&&Wl.supportsFiber)try{Tu=Wl.inject(EI),Sr=Wl}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bI;$t.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fm(e))throw Error($(200));return _I(t,e,null,r)};$t.createRoot=function(t,e){if(!fm(t))throw Error($(299));var r=!1,n="",s=nb;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=um(t,1,!1,null,null,r,!1,n,s),t[Wr]=e.current,Aa(t.nodeType===8?t.parentNode:t),new dm(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=Sw(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return Ds(t)};$t.hydrate=function(t,e,r){if(!Vu(e))throw Error($(200));return Mu(null,t,e,!0,r)};$t.hydrateRoot=function(t,e,r){if(!fm(t))throw Error($(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=nb;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=rb(e,null,t,1,r??null,s,!1,i,o),t[Wr]=e.current,Aa(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Lu(e)};$t.render=function(t,e,r){if(!Vu(e))throw Error($(200));return Mu(null,t,e,!1,r)};$t.unmountComponentAtNode=function(t){if(!Vu(t))throw Error($(40));return t._reactRootContainer?(Ds(function(){Mu(null,null,t,!1,function(){t._reactRootContainer=null,t[Wr]=null})}),!0):!1};$t.unstable_batchedUpdates=om;$t.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Vu(r))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Mu(t,e,r,!1,n)};$t.version="18.3.1-next-f1338f8080-20240426";function sb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sb)}catch(t){console.error(t)}}sb(),sw.exports=$t;var TI=sw.exports,k0=TI;Pd.createRoot=k0.createRoot,Pd.hydrateRoot=k0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Va(){return Va=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Va.apply(this,arguments)}var Sn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Sn||(Sn={}));const I0="popstate";function SI(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:o,hash:a}=n.location;return kf("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:tu(s)}return II(e,r,null,t)}function $e(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kI(){return Math.random().toString(36).substr(2,8)}function A0(t,e){return{usr:t.state,key:t.key,idx:e}}function kf(t,e,r,n){return r===void 0&&(r=null),Va({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ro(e):e,{state:r,key:e&&e.key||n||kI()})}function tu(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ro(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function II(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a=Sn.Pop,l=null,h=d();h==null&&(h=0,o.replaceState(Va({},o.state,{idx:h}),""));function d(){return(o.state||{idx:null}).idx}function p(){a=Sn.Pop;let I=d(),w=I==null?null:I-h;h=I,l&&l({action:a,location:b.location,delta:w})}function m(I,w){a=Sn.Push;let v=kf(b.location,I,w);h=d()+1;let E=A0(v,h),R=b.createHref(v);try{o.pushState(E,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(R)}i&&l&&l({action:a,location:b.location,delta:1})}function y(I,w){a=Sn.Replace;let v=kf(b.location,I,w);h=d();let E=A0(v,h),R=b.createHref(v);o.replaceState(E,"",R),i&&l&&l({action:a,location:b.location,delta:0})}function _(I){let w=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof I=="string"?I:tu(I);return v=v.replace(/ $/,"%20"),$e(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let b={get action(){return a},get location(){return t(s,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(I0,p),l=I,()=>{s.removeEventListener(I0,p),l=null}},createHref(I){return e(s,I)},createURL:_,encodeLocation(I){let w=_(I);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:y,go(I){return o.go(I)}};return b}var N0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(N0||(N0={}));function AI(t,e,r){return r===void 0&&(r="/"),NI(t,e,r)}function NI(t,e,r,n){let s=typeof e=="string"?ro(e):e,i=mm(s.pathname||"/",r);if(i==null)return null;let o=ib(t);CI(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let h=BI(i);a=UI(o[l],h)}return a}function ib(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&($e(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let h=Ln([n,l.relativePath]),d=r.concat(l);i.children&&i.children.length>0&&($e(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),ib(i.children,e,d,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:VI(h,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of ob(i.path))s(i,o,l)}),e}function ob(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=ob(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function CI(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:MI(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const RI=/^:[\w-]+$/,PI=3,jI=2,OI=1,DI=10,LI=-2,C0=t=>t==="*";function VI(t,e){let r=t.split("/"),n=r.length;return r.some(C0)&&(n+=LI),e&&(n+=jI),r.filter(s=>!C0(s)).reduce((s,i)=>s+(RI.test(i)?PI:i===""?OI:DI),n)}function MI(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function UI(t,e,r){let{routesMeta:n}=t,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],h=a===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",p=$I({path:l.relativePath,caseSensitive:l.caseSensitive,end:h},d),m=l.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Ln([i,p.pathname]),pathnameBase:KI(Ln([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=Ln([i,p.pathnameBase]))}return o}function $I(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=FI(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((h,d,p)=>{let{paramName:m,isOptional:y}=d;if(m==="*"){let b=a[p]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const _=a[p];return y&&!_?h[m]=void 0:h[m]=(_||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:t}}function FI(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),pm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function BI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function mm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const zI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qI=t=>zI.test(t);function WI(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?ro(t):t,i;if(r)if(qI(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),pm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=R0(r.substring(1),"/"):i=R0(r,e)}else i=e;return{pathname:i,search:GI(n),hash:QI(s)}}function R0(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function id(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HI(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function gm(t,e){let r=HI(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function ym(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=ro(t):(s=Va({},t),$e(!s.pathname||!s.pathname.includes("?"),id("?","pathname","search",s)),$e(!s.pathname||!s.pathname.includes("#"),id("#","pathname","hash",s)),$e(!s.search||!s.search.includes("#"),id("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let p=e.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}a=p>=0?e[p]:"/"}let l=WI(s,a),h=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(h||d)&&(l.pathname+="/"),l}const Ln=t=>t.join("/").replace(/\/\/+/g,"/"),KI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),GI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,QI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function JI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ab=["post","put","patch","delete"];new Set(ab);const YI=["get",...ab];new Set(YI);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ma(){return Ma=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ma.apply(this,arguments)}const vm=O.createContext(null),XI=O.createContext(null),ts=O.createContext(null),Uu=O.createContext(null),Or=O.createContext({outlet:null,matches:[],isDataRoute:!1}),lb=O.createContext(null);function ZI(t,e){let{relative:r}=e===void 0?{}:e;no()||$e(!1);let{basename:n,navigator:s}=O.useContext(ts),{hash:i,pathname:o,search:a}=hb(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:Ln([n,o])),s.createHref({pathname:l,search:a,hash:i})}function no(){return O.useContext(Uu)!=null}function so(){return no()||$e(!1),O.useContext(Uu).location}function cb(t){O.useContext(ts).static||O.useLayoutEffect(t)}function rs(){let{isDataRoute:t}=O.useContext(Or);return t?pA():eA()}function eA(){no()||$e(!1);let t=O.useContext(vm),{basename:e,future:r,navigator:n}=O.useContext(ts),{matches:s}=O.useContext(Or),{pathname:i}=so(),o=JSON.stringify(gm(s,r.v7_relativeSplatPath)),a=O.useRef(!1);return cb(()=>{a.current=!0}),O.useCallback(function(h,d){if(d===void 0&&(d={}),!a.current)return;if(typeof h=="number"){n.go(h);return}let p=ym(h,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ln([e,p.pathname])),(d.replace?n.replace:n.push)(p,d.state,d)},[e,n,o,i,t])}const tA=O.createContext(null);function rA(t){let e=O.useContext(Or).outlet;return e&&O.createElement(tA.Provider,{value:t},e)}function ub(){let{matches:t}=O.useContext(Or),e=t[t.length-1];return e?e.params:{}}function hb(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=O.useContext(ts),{matches:s}=O.useContext(Or),{pathname:i}=so(),o=JSON.stringify(gm(s,n.v7_relativeSplatPath));return O.useMemo(()=>ym(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function nA(t,e){return sA(t,e)}function sA(t,e,r,n){no()||$e(!1);let{navigator:s}=O.useContext(ts),{matches:i}=O.useContext(Or),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let h=so(),d;if(e){var p;let I=typeof e=="string"?ro(e):e;l==="/"||(p=I.pathname)!=null&&p.startsWith(l)||$e(!1),d=I}else d=h;let m=d.pathname||"/",y=m;if(l!=="/"){let I=l.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(I.length).join("/")}let _=AI(t,{pathname:y}),b=cA(_&&_.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:Ln([l,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?l:Ln([l,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),i,r,n);return e&&b?O.createElement(Uu.Provider,{value:{location:Ma({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Sn.Pop}},b):b}function iA(){let t=fA(),e=JI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),r?O.createElement("pre",{style:s},r):null,null)}const oA=O.createElement(iA,null);class aA extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?O.createElement(Or.Provider,{value:this.props.routeContext},O.createElement(lb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lA(t){let{routeContext:e,match:r,children:n}=t,s=O.useContext(vm);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),O.createElement(Or.Provider,{value:e},n)}function cA(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(s=r)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);d>=0||$e(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,h=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let p=o[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=d),p.route.id){let{loaderData:m,errors:y}=r,_=p.route.loader&&m[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||_){l=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((d,p,m)=>{let y,_=!1,b=null,I=null;r&&(y=a&&p.route.id?a[p.route.id]:void 0,b=p.route.errorElement||oA,l&&(h<0&&m===0?(mA("route-fallback"),_=!0,I=null):h===m&&(_=!0,I=p.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,m+1)),v=()=>{let E;return y?E=b:_?E=I:p.route.Component?E=O.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=d,O.createElement(lA,{match:p,routeContext:{outlet:d,matches:w,isDataRoute:r!=null},children:E})};return r&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?O.createElement(aA,{location:r.location,revalidation:r.revalidation,component:b,error:y,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var db=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(db||{}),fb=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(fb||{});function uA(t){let e=O.useContext(vm);return e||$e(!1),e}function hA(t){let e=O.useContext(XI);return e||$e(!1),e}function dA(t){let e=O.useContext(Or);return e||$e(!1),e}function pb(t){let e=dA(),r=e.matches[e.matches.length-1];return r.route.id||$e(!1),r.route.id}function fA(){var t;let e=O.useContext(lb),r=hA(),n=pb();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function pA(){let{router:t}=uA(db.UseNavigateStable),e=pb(fb.UseNavigateStable),r=O.useRef(!1);return cb(()=>{r.current=!0}),O.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ma({fromRouteId:e},i)))},[t,e])}const P0={};function mA(t,e,r){P0[t]||(P0[t]=!0)}function gA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function j0(t){let{to:e,replace:r,state:n,relative:s}=t;no()||$e(!1);let{future:i,static:o}=O.useContext(ts),{matches:a}=O.useContext(Or),{pathname:l}=so(),h=rs(),d=ym(e,gm(a,i.v7_relativeSplatPath),l,s==="path"),p=JSON.stringify(d);return O.useEffect(()=>h(JSON.parse(p),{replace:r,state:n,relative:s}),[h,p,s,r,n]),null}function _m(t){return rA(t.context)}function ke(t){$e(!1)}function yA(t){let{basename:e="/",children:r=null,location:n,navigationType:s=Sn.Pop,navigator:i,static:o=!1,future:a}=t;no()&&$e(!1);let l=e.replace(/^\/*/,"/"),h=O.useMemo(()=>({basename:l,navigator:i,static:o,future:Ma({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof n=="string"&&(n=ro(n));let{pathname:d="/",search:p="",hash:m="",state:y=null,key:_="default"}=n,b=O.useMemo(()=>{let I=mm(d,l);return I==null?null:{location:{pathname:I,search:p,hash:m,state:y,key:_},navigationType:s}},[l,d,p,m,y,_,s]);return b==null?null:O.createElement(ts.Provider,{value:h},O.createElement(Uu.Provider,{children:r,value:b}))}function vA(t){let{children:e,location:r}=t;return nA(If(e),r)}new Promise(()=>{});function If(t,e){e===void 0&&(e=[]);let r=[];return O.Children.forEach(t,(n,s)=>{if(!O.isValidElement(n))return;let i=[...e,s];if(n.type===O.Fragment){r.push.apply(r,If(n.props.children,i));return}n.type!==ke&&$e(!1),!n.props.index||!n.props.children||$e(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=If(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Af(){return Af=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Af.apply(this,arguments)}function _A(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function wA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function xA(t,e){return t.button===0&&(!e||e==="_self")&&!wA(t)}const bA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],EA="6";try{window.__reactRouterVersion=EA}catch{}const TA="startTransition",O0=fS[TA];function SA(t){let{basename:e,children:r,future:n,window:s}=t,i=O.useRef();i.current==null&&(i.current=SI({window:s,v5Compat:!0}));let o=i.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:h}=n||{},d=O.useCallback(p=>{h&&O0?O0(()=>l(p)):l(p)},[l,h]);return O.useLayoutEffect(()=>o.listen(d),[o,d]),O.useEffect(()=>gA(n),[n]),O.createElement(yA,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const kA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oe=O.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:h,preventScrollReset:d,viewTransition:p}=e,m=_A(e,bA),{basename:y}=O.useContext(ts),_,b=!1;if(typeof h=="string"&&IA.test(h)&&(_=h,kA))try{let E=new URL(window.location.href),R=h.startsWith("//")?new URL(E.protocol+h):new URL(h),D=mm(R.pathname,y);R.origin===E.origin&&D!=null?h=D+R.search+R.hash:b=!0}catch{}let I=ZI(h,{relative:s}),w=AA(h,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:p});function v(E){n&&n(E),E.defaultPrevented||w(E)}return O.createElement("a",Af({},m,{href:_||I,onClick:b||i?n:v,ref:r,target:l}))});var D0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(D0||(D0={}));var L0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(L0||(L0={}));function AA(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=rs(),h=so(),d=hb(t,{relative:o});return O.useCallback(p=>{if(xA(p,r)){p.preventDefault();let m=n!==void 0?n:tu(h)===tu(d);l(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[h,l,d,n,s,r,t,i,o,a])}function mb(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=mb(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function gb(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=mb(t))&&(n&&(n+=" "),n+=e);return n}const wm="-",NA=t=>{const e=RA(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const a=o.split(wm);return a[0]===""&&a.length!==1&&a.shift(),yb(a,e)||CA(o)},getConflictingClassGroupIds:(o,a)=>{const l=r[o]||[];return a&&n[o]?[...l,...n[o]]:l}}},yb=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?yb(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(wm);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},V0=/^\[(.+)\]$/,CA=t=>{if(V0.test(t)){const e=V0.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},RA=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return jA(Object.entries(t.classGroups),r).forEach(([i,o])=>{Nf(o,n,i,e)}),n},Nf=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:M0(e,s);i.classGroupId=r;return}if(typeof s=="function"){if(PA(s)){Nf(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,o])=>{Nf(o,M0(e,i),r,n)})})},M0=(t,e)=>{let r=t;return e.split(wm).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},PA=t=>t.isThemeGetter,jA=(t,e)=>e?t.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[r,s]}):t,OA=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(i,o)=>{r.set(i,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){r.has(i)?r.set(i,o):s(i,o)}}},vb="!",DA=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let h=0,d=0,p;for(let I=0;I<a.length;I++){let w=a[I];if(h===0){if(w===s&&(n||a.slice(I,I+i)===e)){l.push(a.slice(d,I)),d=I+i;continue}if(w==="/"){p=I;continue}}w==="["?h++:w==="]"&&h--}const m=l.length===0?a:a.substring(d),y=m.startsWith(vb),_=y?m.substring(1):m,b=p&&p>d?p-d:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:_,maybePostfixModifierPosition:b}};return r?a=>r({className:a,parseClassName:o}):o},LA=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},VA=t=>({cache:OA(t.cacheSize),parseClassName:DA(t),...NA(t)}),MA=/\s+/,UA=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(MA);let a="";for(let l=o.length-1;l>=0;l-=1){const h=o[l],{modifiers:d,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:y}=r(h);let _=!!y,b=n(_?m.substring(0,y):m);if(!b){if(!_){a=h+(a.length>0?" "+a:a);continue}if(b=n(m),!b){a=h+(a.length>0?" "+a:a);continue}_=!1}const I=LA(d).join(":"),w=p?I+vb:I,v=w+b;if(i.includes(v))continue;i.push(v);const E=s(b,_);for(let R=0;R<E.length;++R){const D=E[R];i.push(w+D)}a=h+(a.length>0?" "+a:a)}return a};function $A(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=_b(e))&&(n&&(n+=" "),n+=r);return n}const _b=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=_b(t[n]))&&(r&&(r+=" "),r+=e);return r};function FA(t,...e){let r,n,s,i=o;function o(l){const h=e.reduce((d,p)=>p(d),t());return r=VA(h),n=r.cache.get,s=r.cache.set,i=a,a(l)}function a(l){const h=n(l);if(h)return h;const d=UA(l,r);return s(l,d),d}return function(){return i($A.apply(null,arguments))}}const xe=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},wb=/^\[(?:([a-z-]+):)?(.+)\]$/i,BA=/^\d+\/\d+$/,zA=new Set(["px","full","screen"]),qA=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,WA=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,HA=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,KA=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,GA=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Dr=t=>Ai(t)||zA.has(t)||BA.test(t),un=t=>io(t,"length",rN),Ai=t=>!!t&&!Number.isNaN(Number(t)),od=t=>io(t,"number",Ai),Uo=t=>!!t&&Number.isInteger(Number(t)),QA=t=>t.endsWith("%")&&Ai(t.slice(0,-1)),te=t=>wb.test(t),hn=t=>qA.test(t),JA=new Set(["length","size","percentage"]),YA=t=>io(t,JA,xb),XA=t=>io(t,"position",xb),ZA=new Set(["image","url"]),eN=t=>io(t,ZA,sN),tN=t=>io(t,"",nN),$o=()=>!0,io=(t,e,r)=>{const n=wb.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},rN=t=>WA.test(t)&&!HA.test(t),xb=()=>!1,nN=t=>KA.test(t),sN=t=>GA.test(t),iN=()=>{const t=xe("colors"),e=xe("spacing"),r=xe("blur"),n=xe("brightness"),s=xe("borderColor"),i=xe("borderRadius"),o=xe("borderSpacing"),a=xe("borderWidth"),l=xe("contrast"),h=xe("grayscale"),d=xe("hueRotate"),p=xe("invert"),m=xe("gap"),y=xe("gradientColorStops"),_=xe("gradientColorStopPositions"),b=xe("inset"),I=xe("margin"),w=xe("opacity"),v=xe("padding"),E=xe("saturate"),R=xe("scale"),D=xe("sepia"),V=xe("skew"),S=xe("space"),T=xe("translate"),k=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto",te,e],P=()=>[te,e],A=()=>["",Dr,un],Pe=()=>["auto",Ai,te],zt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],gr=()=>["solid","dashed","dotted","double","none"],en=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>["start","end","center","between","around","evenly","stretch"],G=()=>["","0",te],ee=()=>["auto","avoid","all","avoid-page","page","left","right","column"],le=()=>[Ai,te];return{cacheSize:500,separator:":",theme:{colors:[$o],spacing:[Dr,un],blur:["none","",hn,te],brightness:le(),borderColor:[t],borderRadius:["none","","full",hn,te],borderSpacing:P(),borderWidth:A(),contrast:le(),grayscale:G(),hueRotate:le(),invert:G(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[QA,un],inset:C(),margin:C(),opacity:le(),padding:P(),saturate:le(),scale:le(),sepia:G(),skew:le(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",te]}],container:["container"],columns:[{columns:[hn]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...zt(),te]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Uo,te]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",te]}],grow:[{grow:G()}],shrink:[{shrink:G()}],order:[{order:["first","last","none",Uo,te]}],"grid-cols":[{"grid-cols":[$o]}],"col-start-end":[{col:["auto",{span:["full",Uo,te]},te]}],"col-start":[{"col-start":Pe()}],"col-end":[{"col-end":Pe()}],"grid-rows":[{"grid-rows":[$o]}],"row-start-end":[{row:["auto",{span:[Uo,te]},te]}],"row-start":[{"row-start":Pe()}],"row-end":[{"row-end":Pe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",te]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",te]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...B()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...B(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...B(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[I]}],mx:[{mx:[I]}],my:[{my:[I]}],ms:[{ms:[I]}],me:[{me:[I]}],mt:[{mt:[I]}],mr:[{mr:[I]}],mb:[{mb:[I]}],ml:[{ml:[I]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",te,e]}],"min-w":[{"min-w":[te,e,"min","max","fit"]}],"max-w":[{"max-w":[te,e,"none","full","min","max","fit","prose",{screen:[hn]},hn]}],h:[{h:[te,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[te,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[te,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[te,e,"auto","min","max","fit"]}],"font-size":[{text:["base",hn,un]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",od]}],"font-family":[{font:[$o]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",te]}],"line-clamp":[{"line-clamp":["none",Ai,od]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Dr,te]}],"list-image":[{"list-image":["none",te]}],"list-style-type":[{list:["none","disc","decimal",te]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...gr(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Dr,un]}],"underline-offset":[{"underline-offset":["auto",Dr,te]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...zt(),XA]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",YA]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},eN]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...gr(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:gr()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...gr()]}],"outline-offset":[{"outline-offset":[Dr,te]}],"outline-w":[{outline:[Dr,un]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Dr,un]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",hn,tN]}],"shadow-color":[{shadow:[$o]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...en(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":en()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",hn,te]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[p]}],saturate:[{saturate:[E]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",te]}],duration:[{duration:le()}],ease:[{ease:["linear","in","out","in-out",te]}],delay:[{delay:le()}],animate:[{animate:["none","spin","ping","pulse","bounce",te]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[Uo,te]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",te]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",te]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",te]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Dr,un,od]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},bb=FA(iN);function oN(...t){return bb(gb(t))}const pe=O.forwardRef(({className:t,variant:e="primary",size:r="md",loading:n,children:s,disabled:i,...o},a)=>u.jsxs("button",{ref:a,disabled:n||i,className:oN("btn inline-flex items-center justify-center transition-all duration-200 active:scale-95",{"btn-primary":e==="primary","btn-secondary":e==="secondary","btn-ghost":e==="ghost","btn-outline":e==="outline","px-3 py-1 text-sm":r==="sm","px-6 py-2":r==="md","px-8 py-3 text-lg":r==="lg","opacity-50 cursor-not-allowed":n||i},t),...o,children:[n&&u.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s]}));pe.displayName="Button";const ru=[{id:"mock-1",business_name:"Elegant Moments Photography",category:"Photographer",description:"Capturing life's most precious moments with a fine art approach. Based in NYC but available worldwide.",location:"New York, NY",price_range:"$$$",rating:4.9,images:["https://images.unsplash.com/photo-1537633552985-df8429e8048b?auto=format&fit=crop&q=80&w=800"]},{id:"mock-2",business_name:"The Grand Ballroom",category:"Venue",description:"A historic venue featuring crystal chandeliers, high ceilings, and a capacity for up to 300 guests.",location:"Chicago, IL",price_range:"$$$$",rating:4.8,images:["https://images.unsplash.com/photo-1519167758481-83f550bb49b3?auto=format&fit=crop&q=80&w=800"]},{id:"mock-3",business_name:"Floral Dreams",category:"Decorator",description:"Turning your floral fantasies into reality with sustainable and locally sourced blooms.",location:"San Francisco, CA",price_range:"$$",rating:4.7,images:["https://images.unsplash.com/photo-1522673607200-1645062cd958?auto=format&fit=crop&q=80&w=800"]},{id:"mock-4",business_name:"Gourmet Catering Co.",category:"Caterer",description:"Exquisite culinary experiences tailored to your palate. Specializing in farm-to-table menus.",location:"Austin, TX",price_range:"$$$",rating:4.9,images:["https://images.unsplash.com/photo-1555244162-803834f70033?auto=format&fit=crop&q=80&w=800"]},{id:"mock-5",business_name:"Sound & Soul DJ",category:"Entertainment",description:"Keeping the dance floor packed all night long with a mix of classics and modern hits.",location:"Miami, FL",price_range:"$$",rating:4.6,images:["https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?auto=format&fit=crop&q=80&w=800"]},{id:"mock-6",business_name:"Prestige Limo",category:"Transportation",description:"Arrive in style with our fleet of vintage and luxury vehicles.",location:"Los Angeles, CA",price_range:"$$",rating:4.8,images:["https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?auto=format&fit=crop&q=80&w=800"]},{id:"mock-7",business_name:"Urban Loft Studios",category:"Venue",description:"Contemporary industrial space perfect for modern weddings. Exposed brick and skyline views.",location:"Brooklyn, NY",price_range:"$$$",rating:4.5,images:["https://images.unsplash.com/photo-1519225468359-29f3ad45294c?auto=format&fit=crop&q=80&w=800"]},{id:"mock-8",business_name:"Golden Hour Films",category:"Videographer",description:"Cinematic wedding films that tell your unique love story.",location:"Los Angeles, CA",price_range:"$$$",rating:4.9,images:["https://images.unsplash.com/photo-1588534510807-865dc13c2f94?auto=format&fit=crop&q=80&w=800"]},{id:"mock-9",business_name:"Sweet Delights Bakery",category:"Cake Designer",description:"Custom designed wedding cakes that look as good as they taste.",location:"London, UK",price_range:"$$",rating:4.7,images:["https://images.unsplash.com/photo-1535254973040-607b474cb50d?auto=format&fit=crop&q=80&w=800"]},{id:"mock-10",business_name:"Paper & Ink",category:"Stationery",description:"Bespoke letterpress invitations and stationery to set the tone for your big day.",location:"Portland, OR",price_range:"$$",rating:4.8,images:["https://images.unsplash.com/photo-1544816155-12df9643f363?auto=format&fit=crop&q=80&w=800"]},{id:"mock-11",business_name:"Glamour Squad",category:"Hair & Makeup",description:"On-site luxury beauty services for the bride and bridal party.",location:"Atlanta, GA",price_range:"$$",rating:4.6,images:["https://images.unsplash.com/photo-1487412947132-2d9fab992016?auto=format&fit=crop&q=80&w=800"]},{id:"mock-12",business_name:"Planning Perfection",category:"Wedding Planner",description:"Full-service wedding planning and design for the discerning couple.",location:"Charleston, SC",price_range:"$$$$",rating:5,images:["https://images.unsplash.com/photo-1511285560982-1351c4f809b9?auto=format&fit=crop&q=80&w=800"]},{id:"mock-13",business_name:"Vintage Vows Rentals",category:"Rentals",description:"Curated collection of vintage furniture and decor to add character to your event.",location:"Nashville, TN",price_range:"$$",rating:4.7,images:["https://images.unsplash.com/photo-1505322894129-eb99433604bc?auto=format&fit=crop&q=80&w=800"]},{id:"mock-14",business_name:"Seaside Ceremonies",category:"Venue",description:"Breathtaking oceanfront venue for intimate ceremonies and receptions.",location:"Malibu, CA",price_range:"$$$$",rating:4.9,images:["https://images.unsplash.com/photo-1510076857177-7470076d4098?auto=format&fit=crop&q=80&w=800"]},{id:"mock-15",business_name:"Acoustic Soul",category:"Entertainment",description:"Live acoustic guitar and vocals for ceremony and cocktail hour.",location:"Denver, CO",price_range:"$$",rating:4.8,images:["https://images.unsplash.com/photo-1460723237483-7a6dc9d0b212?auto=format&fit=crop&q=80&w=800"]},{id:"mock-16",business_name:"Royal Rides",category:"Transportation",description:"Classic Rolls Royce rentals for the ultimate getaway car.",location:"Boston, MA",price_range:"$$$",rating:4.7,images:["https://images.unsplash.com/photo-1552519507-da3b142c6e3d?auto=format&fit=crop&q=80&w=800"]},{id:"mock-17",business_name:"Bloom & Wild",category:"Decorator",description:"Wild and whimsical floral arrangements for the bohemian bride.",location:"Seattle, WA",price_range:"$$",rating:4.6,images:["https://images.unsplash.com/photo-1478146704077-36e3fc9637cb?auto=format&fit=crop&q=80&w=800"]},{id:"mock-18",business_name:"Fusion Flavors",category:"Caterer",description:"Innovative fusion cuisine combining global flavors for a unique dining experience.",location:"Toronto, ON",price_range:"$$$",rating:4.8,images:["https://images.unsplash.com/photo-1555244162-803834f70033?auto=format&fit=crop&q=80&w=800"]},{id:"mock-19",business_name:"Focus & Frame",category:"Photographer",description:"Documentary style wedding photography capturing real moments.",location:"San Diego, CA",price_range:"$$",rating:4.7,images:["https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?auto=format&fit=crop&q=80&w=800"]},{id:"mock-20",business_name:"Starlight Tents",category:"Rentals",description:"Luxury sailcloth tents and lighting for outdoor weddings.",location:"Hamptons, NY",price_range:"$$$$",rating:4.9,images:["https://images.unsplash.com/photo-1478131143081-80f7f84ca84d?auto=format&fit=crop&q=80&w=800"]}],aN=[{id:"b-1",user_id:"user-1",vendor_id:"mock-1",date:"2026-06-12",status:"confirmed",total_amount:1500,vendor:{business_name:"Elegant Moments Photography"}},{id:"b-2",user_id:"user-1",vendor_id:"mock-2",date:"2026-07-20",status:"pending",total_amount:5e3,vendor:{business_name:"The Grand Ballroom"}},{id:"b-3",user_id:"user-1",vendor_id:"mock-4",date:"2026-05-15",status:"confirmed",total_amount:3200,vendor:{business_name:"Gourmet Catering Co."}}];function lN(){return u.jsxs("div",{className:"bg-white",children:[u.jsxs("section",{className:"relative h-screen flex items-center justify-center overflow-hidden pt-20",children:[u.jsx("div",{className:"absolute inset-0 z-0",children:u.jsx("img",{src:"https://images.unsplash.com/photo-1511795409834-ef04bbd61622?auto=format&fit=crop&w=2000&q=90",alt:"Wedding Elegance",className:"w-full h-full object-cover brightness-[0.6] scale-105 animate-slow-zoom"})}),u.jsxs("div",{className:"relative z-10 text-center px-6 max-w-5xl",children:[u.jsx("span",{className:"inline-block text-white/80 text-[10px] sm:text-xs font-bold uppercase tracking-[0.4em] sm:tracking-[0.5em] mb-6 animate-fade-in",children:"Established in Excellence"}),u.jsxs("h1",{className:"text-3xl sm:text-5xl md:text-6xl font-serif font-black text-white mb-2 tracking-tighter leading-tight sm:leading-[1.1] animate-fade-in-up",children:["Your Vision.",u.jsx("br",{}),u.jsx("span",{className:"italic font-extralight text-primary-200",children:"Our Masterpiece."})]}),u.jsx("p",{className:"text-base sm:text-lg md:text-xl text-white/90 font-light max-w-2xl mx-auto mb-8 sm:mb-10 leading-relaxed animate-fade-in-delayed",children:"Experience the gold standard in wedding curation. Connecting the world's most discerning couples with elite artisans."}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-6 animate-fade-in-delayed",children:[u.jsx(oe,{to:"/vendors",children:u.jsx(pe,{className:"h-14 sm:h-16 px-10 sm:px-12 bg-white text-slate-900 rounded-full font-bold text-base sm:text-lg hover:scale-105 hover:bg-primary-50 transition-all shadow-2xl",children:"Discover Vendors"})}),u.jsx(oe,{to:"/about",className:"text-white font-bold border-b-2 border-white/30 hover:border-white transition-all py-2 text-base sm:text-lg",children:"The Bliss Story"})]})]}),u.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 animate-bounce opacity-40 hidden sm:block",children:u.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})]}),u.jsx("section",{className:"py-16 sm:py-24 bg-slate-50 relative overflow-hidden px-4 sm:px-6",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:items-end justify-between mb-12 sm:mb-16 gap-8 text-center lg:text-left",children:[u.jsxs("div",{className:"max-w-2xl",children:[u.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-serif font-bold text-slate-900 mb-4 sm:mb-6 italic leading-tight",children:"Uncompromising Detail."}),u.jsx("p",{className:"text-sm sm:text-base text-slate-500 font-light leading-relaxed",children:"We believe planning should be as beautiful as the day itself. Our platform provides a bespoke suite of tools designed for the perfectionist."})]}),u.jsx("div",{className:"pb-4 hidden lg:block",children:u.jsx("div",{className:"h-1 w-24 bg-primary-600"})})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 sm:gap-16",children:[{title:"Elite Curation",desc:"Only the top 5% of vendors meet our stringent quality and reliability benchmarks.",icon:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-7.714 2.143L11 21l-2.286-6.857L1 12l7.714-2.143L11 3z"},{title:"Direct Negotiation",desc:"Our secure messaging portal allows for real-time contract optimization and transparency.",icon:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"},{title:"Financial Precision",desc:"Sophisticated spend tracking ensures every dollar is an investment in your vision.",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}].map((t,e)=>u.jsxs("div",{className:"group p-6 sm:p-8 rounded-[2rem] sm:rounded-[2.5rem] bg-white border border-slate-100 hover:shadow-xl transition-all duration-700",children:[u.jsx("div",{className:"w-14 h-14 sm:w-16 h-16 rounded-xl bg-primary-50 text-primary-600 flex items-center justify-center mb-6 sm:mb-8 group-hover:bg-primary-600 group-hover:text-white transition-all duration-500 rotate-3 group-hover:rotate-0",children:u.jsx("svg",{className:"w-6 h-6 sm:w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:t.icon})})}),u.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-900 mb-3",children:t.title}),u.jsx("p",{className:"text-xs sm:text-sm text-slate-500 leading-relaxed font-light",children:t.desc})]},e))})]})}),u.jsx("section",{className:"py-12 sm:py-20 px-4 sm:px-6",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsxs("div",{className:"text-center mb-12 sm:mb-16",children:[u.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-serif font-bold text-slate-900 mb-4",children:"The Artisans"}),u.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-[0.2em] sm:tracking-widest text-[10px] sm:text-[11px]",children:"Now Trending in Excellence"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 sm:gap-12",children:ru.slice(1,4).map(t=>u.jsx(oe,{to:`/vendors/${t.id}`,className:"group block",children:u.jsx("div",{className:"relative rounded-[1.5rem] sm:rounded-[2rem] overflow-hidden bg-white shadow-lg group-hover:shadow-2xl transition-all duration-700",children:u.jsxs("div",{className:"relative aspect-[3/2] overflow-hidden",children:[u.jsx("img",{src:t.images[0],alt:t.business_name,className:"w-full h-full object-cover transform scale-100 group-hover:scale-110 transition-transform duration-1000"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-60 group-hover:opacity-80 transition-opacity"}),u.jsxs("div",{className:"absolute top-6 right-6 sm:top-8 sm:right-8 bg-white/10 backdrop-blur-md px-4 py-2 rounded-full border border-white/20 text-white font-bold text-xs sm:text-sm",children:[t.rating," "]}),u.jsxs("div",{className:"absolute bottom-6 left-6 right-6 sm:bottom-8 sm:left-8 sm:right-8 text-white",children:[u.jsx("p",{className:"text-primary-300 font-bold uppercase tracking-widest text-[10px] mb-2",children:t.category}),u.jsx("h3",{className:"text-xl sm:text-2xl font-serif font-bold mb-3 leading-tight",children:t.business_name}),u.jsxs("div",{className:"flex items-center justify-between opacity-0 group-hover:opacity-100 transform translate-y-4 group-hover:translate-y-0 transition-all duration-500",children:[u.jsx("span",{className:"text-white/60 font-light text-[10px] sm:text-xs",children:t.location}),u.jsx("span",{className:"font-bold border-b border-primary-400 pb-1 text-[10px] sm:text-xs",children:"View Profile"})]})]})]})})},t.id))}),u.jsx("div",{className:"text-center mt-10 sm:mt-16",children:u.jsx(oe,{to:"/vendors",children:u.jsx(pe,{className:"h-12 sm:h-14 px-10 sm:px-12 bg-slate-900 text-white rounded-full font-bold hover:bg-primary-600 transition-all uppercase tracking-widest text-[10px]",children:"View Entire Portfolio"})})})]})}),u.jsxs("section",{className:"py-8 sm:py-12 relative bg-slate-900 text-white overflow-hidden px-4 sm:px-6",children:[u.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-primary-600/10 skew-x-12 transform translate-x-32"}),u.jsx("div",{className:"max-w-7xl mx-auto relative z-10",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 sm:gap-12 items-center lg:flex-row-reverse",children:[u.jsxs("div",{className:"space-y-3 sm:space-y-4 text-center lg:text-right order-2 lg:order-2",children:[u.jsxs("h2",{className:"text-xl sm:text-2xl font-serif font-black leading-tight italic",children:["Are you an ",u.jsx("span",{className:"text-primary-500",children:"Icon?"})]}),u.jsx("p",{className:"text-base sm:text-lg text-slate-300 font-light leading-relaxed max-w-xl mx-auto lg:mx-0",children:"Join our network of internationally acclaimed wedding professionals. Bliss is the platform for those who define the industry."}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-end",children:[u.jsx(oe,{to:"/login?role=vendor",children:u.jsx(pe,{className:"h-12 sm:h-14 px-8 sm:px-10 bg-white text-slate-900 rounded-full font-black text-sm sm:text-base hover:bg-primary-500 hover:text-white transition-all w-full sm:w-auto",children:"Partner with Us"})}),u.jsx(oe,{to:"/about",children:u.jsx(pe,{variant:"outline",className:"h-12 sm:h-14 px-8 sm:px-10 border-white/20 text-white rounded-full font-bold hover:bg-white/10 backdrop-blur-md w-full sm:w-auto text-sm sm:text-base",children:"Our Standards"})})]})]}),u.jsxs("div",{className:"relative hidden lg:block order-1 lg:order-1",children:[u.jsx("div",{className:"aspect-square rounded-full border border-white/10 flex items-center justify-center p-20 animate-spin-slow",children:u.jsx("div",{className:"w-full h-full rounded-full border border-primary-500/30"})}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"font-serif text-2xl font-bold italic tracking-tighter opacity-20",children:"BLISS PLATINUM"})})]})]})})]})]})}const cN="/api";async function ue(t,e={}){const r=localStorage.getItem("wedding_user"),n=r?JSON.parse(r).role:null;try{const s=await fetch(`${cN}${t}`,{...e,headers:{"Content-Type":"application/json","X-User-Role":n||"",...e.headers||{}}});if(!s.ok){const i=await s.json().catch(()=>({message:"An unexpected error occurred"}));throw new Error(i.message||s.statusText)}return await s.json()}catch(s){throw console.error(`[API] Network Error for ${t}:`,s),s}}function uN(){const t=rs(),[e,r]=O.useState([]),[n,s]=O.useState(""),[i,o]=O.useState(!0);O.useEffect(()=>{a()},[n]);const a=async()=>{try{o(!0);const l=new URLSearchParams;n&&l.append("category",n);const h=await ue(`/vendors?${l.toString()}`);r(h)}catch(l){console.warn("API failed, showing curated mocks:",l);let h=ru;n&&(h=ru.filter(d=>d.category===n)),r(h)}finally{o(!1)}};return u.jsx("div",{className:"min-h-screen bg-slate-50/50 pt-24 sm:pt-32 pb-24 px-4 sm:px-6",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-12 sm:mb-16 gap-8",children:[u.jsxs("div",{className:"max-w-xl",children:[u.jsx("span",{className:"text-primary-600 font-bold uppercase tracking-[0.3em] text-[10px] sm:text-xs mb-3 sm:mb-4 block",children:"Discovery"}),u.jsx("h1",{className:"text-4xl sm:text-5xl md:text-7xl font-serif font-bold text-slate-900 leading-tight",children:"Elite Artisans"}),u.jsx("p",{className:"text-base sm:text-lg text-slate-500 font-light mt-4 italic",children:`"Curating the world's most exceptional wedding professionals, just for you."`})]}),u.jsxs("div",{className:"w-full md:w-auto",children:[u.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 block ml-1",children:"Filter by Expertise"}),u.jsxs("select",{className:"w-full md:w-72 h-14 pl-6 pr-12 rounded-2xl border-slate-200 bg-white shadow-sm focus:ring-primary-500 focus:border-primary-500 font-bold text-slate-900 transition-all appearance-none cursor-pointer",value:n,onChange:l=>s(l.target.value),children:[u.jsx("option",{value:"",children:"All Masterpieces"}),u.jsx("option",{value:"Photographer",children:"Photographers"}),u.jsx("option",{value:"Venue",children:"Venues"}),u.jsx("option",{value:"Decorator",children:"Decorators"}),u.jsx("option",{value:"Caterer",children:"Caterers"}),u.jsx("option",{value:"Entertainment",children:"Entertainment"}),u.jsx("option",{value:"Bridal Wear",children:"Bridal Wear"}),u.jsx("option",{value:"Wedding Planner",children:"Wedding Planners"})]})]})]}),i?u.jsx("div",{className:"flex items-center justify-center py-40",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 sm:gap-8",children:e.map(l=>{var h;return u.jsxs("div",{className:"group relative bg-white rounded-[1.5rem] overflow-hidden border border-slate-100 hover:border-primary-100 hover:shadow-2xl transition-all duration-700 cursor-pointer",onClick:()=>t(`/vendors/${l.id}`),children:[u.jsxs("div",{className:"relative aspect-video overflow-hidden",children:[u.jsx("img",{src:((h=l.images)==null?void 0:h[0])||"https://images.unsplash.com/photo-1519741497674-611481863552?auto=format&fit=crop&q=80&w=800",alt:l.business_name,className:"w-full h-full object-cover transform scale-100 group-hover:scale-105 transition-transform duration-700"}),u.jsx("div",{className:"absolute top-6 left-6 flex space-x-2",children:u.jsx("span",{className:"bg-white/90 backdrop-blur-md px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest text-primary-600 shadow-sm",children:l.category})}),u.jsxs("div",{className:"absolute bottom-4 right-6 text-white text-lg font-serif italic drop-shadow-lg",children:[l.rating," "]})]}),u.jsxs("div",{className:"p-4 sm:p-6",children:[u.jsxs("div",{className:"flex justify-between items-start mb-6 gap-4",children:[u.jsx("h3",{className:"text-lg font-serif font-bold text-slate-900 leading-tight group-hover:text-primary-600 transition-colors line-clamp-1",children:l.business_name}),u.jsxs("div",{className:"text-right flex-shrink-0",children:[u.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400 mb-0.5",children:"Starts At"}),u.jsx("p",{className:"text-xs font-bold text-slate-900",children:l.price_range||"Inquire"})]})]}),u.jsx("p",{className:"text-slate-500 font-light text-xs line-clamp-2 mb-6 leading-relaxed",children:l.description}),u.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-slate-50",children:[u.jsxs("div",{className:"flex items-center text-[11px] font-bold text-slate-400 uppercase tracking-widest",children:[u.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),l.location]}),u.jsx("span",{className:"text-primary-600 font-black text-xs uppercase tracking-tighter group-hover:translate-x-1 transition-transform",children:"View Collection "})]})]})]},l.id)})}),!i&&e.length===0&&u.jsxs("div",{className:"py-40 text-center",children:[u.jsx("div",{className:"text-6xl mb-6",children:""}),u.jsx("h2",{className:"text-2xl font-serif italic text-slate-400",children:"No artisans found in this category."}),u.jsx(pe,{className:"mt-8 rounded-full px-10 border-slate-200 text-slate-500 hover:text-slate-900",variant:"outline",onClick:()=>s(""),children:"Reset Collection"})]})]})})}const hN=()=>{};var U0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},dN=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],o=t[r++],a=t[r++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],o=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Tb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,h=l?t[s+2]:0,d=i>>2,p=(i&3)<<4|a>>4;let m=(a&15)<<2|h>>6,y=h&63;l||(y=64,o||(m=64)),n.push(r[d],r[p],r[m],r[y])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Eb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],a=s<t.length?r[t.charAt(s)]:0;++s;const h=s<t.length?r[t.charAt(s)]:64;++s;const p=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||a==null||h==null||p==null)throw new fN;const m=i<<2|a>>4;if(n.push(m),h!==64){const y=a<<4&240|h>>2;if(n.push(y),p!==64){const _=h<<6&192|p;n.push(_)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pN=function(t){const e=Eb(t);return Tb.encodeByteArray(e,!0)},nu=function(t){return pN(t).replace(/\./g,"")},Sb=function(t){try{return Tb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=()=>mN().__FIREBASE_DEFAULTS__,yN=()=>{if(typeof process>"u"||typeof U0>"u")return;const t=U0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Sb(t[1]);return e&&JSON.parse(e)},$u=()=>{try{return hN()||gN()||yN()||vN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kb=t=>{var e,r;return(r=(e=$u())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},_N=t=>{const e=kb(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},Ib=()=>{var t;return(t=$u())==null?void 0:t.config},Ab=t=>{var e;return(e=$u())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wN=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Nb(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[nu(JSON.stringify(r)),nu(JSON.stringify(o)),""].join(".")}const ha={};function bN(){const t={prod:[],emulator:[]};for(const e of Object.keys(ha))ha[e]?t.emulator.push(e):t.prod.push(e);return t}function EN(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let $0=!1;function Cb(t,e){if(typeof window>"u"||typeof document>"u"||!oo(window.location.host)||ha[t]===e||ha[t]||$0)return;ha[t]=e;function r(m){return`__firebase__banner__${m}`}const n="__firebase__banner",i=bN().prod.length>0;function o(){const m=document.getElementById(n);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{$0=!0,o()},m}function d(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=EN(n),y=r("text"),_=document.getElementById(y)||document.createElement("span"),b=r("learnmore"),I=document.getElementById(b)||document.createElement("a"),w=r("preprendIcon"),v=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const E=m.element;a(E),d(I,b);const R=h();l(v,w),E.append(v,_,I,R),document.body.appendChild(E)}i?(_.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function SN(){var e;const t=(e=$u())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NN(){const t=_t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function CN(){return!SN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RN(){try{return typeof indexedDB=="object"}catch{return!1}}function PN(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN="FirebaseError";class Xr extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=jN,Object.setPrototypeOf(this,Xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,il.prototype.create)}}class il{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?ON(i,n):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Xr(s,a,n)}}function ON(t,e){return t.replace(DN,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const DN=/\{\$([^}]+)}/g;function LN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ls(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],o=e[s];if(F0(i)&&F0(o)){if(!Ls(i,o))return!1}else if(i!==o)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function F0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Ho(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ko(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function VN(t,e){const r=new MN(t,e);return r.subscribe.bind(r)}class MN{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");UN(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=ad),s.error===void 0&&(s.error=ad),s.complete===void 0&&(s.complete=ad);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UN(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function ad(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t){return t&&t._delegate?t._delegate:t}class Vs{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new wN;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BN(e))try{this.getOrInitializeService({instanceIdentifier:ys})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ys){return this.instances.has(e)}getOptions(e=ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);n===a&&o.resolve(s)}return s}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const i=this.instances.get(n);return i&&e(i,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:FN(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=ys){return this.component?this.component.multipleInstances?e:ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FN(t){return t===ys?void 0:t}function BN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new $N(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const qN={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},WN=se.INFO,HN={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},KN=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=HN[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xm{constructor(e){this.name=e,this._logLevel=WN,this._logHandler=KN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const GN=(t,e)=>e.some(r=>t instanceof r);let B0,z0;function QN(){return B0||(B0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JN(){return z0||(z0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rb=new WeakMap,Cf=new WeakMap,Pb=new WeakMap,ld=new WeakMap,bm=new WeakMap;function YN(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(Vn(t.result)),s()},o=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&Rb.set(r,t)}).catch(()=>{}),bm.set(e,t),e}function XN(t){if(Cf.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),s()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Cf.set(t,e)}let Rf={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Cf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Pb.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Vn(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ZN(t){Rf=t(Rf)}function eC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(cd(this),e,...r);return Pb.set(n,e.sort?e.sort():[e]),Vn(n)}:JN().includes(t)?function(...e){return t.apply(cd(this),e),Vn(Rb.get(this))}:function(...e){return Vn(t.apply(cd(this),e))}}function tC(t){return typeof t=="function"?eC(t):(t instanceof IDBTransaction&&XN(t),GN(t,QN())?new Proxy(t,Rf):t)}function Vn(t){if(t instanceof IDBRequest)return YN(t);if(ld.has(t))return ld.get(t);const e=tC(t);return e!==t&&(ld.set(t,e),bm.set(e,t)),e}const cd=t=>bm.get(t);function rC(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Vn(o);return n&&o.addEventListener("upgradeneeded",l=>{n(Vn(o.result),l.oldVersion,l.newVersion,Vn(o.transaction),l)}),r&&o.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),a}const nC=["get","getKey","getAll","getAllKeys","count"],sC=["put","add","delete","clear"],ud=new Map;function q0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ud.get(e))return ud.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=sC.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||nC.includes(r)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let h=l.store;return n&&(h=h.index(a.shift())),(await Promise.all([h[r](...a),s&&l.done]))[0]};return ud.set(e,i),i}ZN(t=>({...t,get:(e,r,n)=>q0(e,r)||t.get(e,r,n),has:(e,r)=>!!q0(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(oC(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function oC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pf="@firebase/app",W0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new xm("@firebase/app"),aC="@firebase/app-compat",lC="@firebase/analytics-compat",cC="@firebase/analytics",uC="@firebase/app-check-compat",hC="@firebase/app-check",dC="@firebase/auth",fC="@firebase/auth-compat",pC="@firebase/database",mC="@firebase/data-connect",gC="@firebase/database-compat",yC="@firebase/functions",vC="@firebase/functions-compat",_C="@firebase/installations",wC="@firebase/installations-compat",xC="@firebase/messaging",bC="@firebase/messaging-compat",EC="@firebase/performance",TC="@firebase/performance-compat",SC="@firebase/remote-config",kC="@firebase/remote-config-compat",IC="@firebase/storage",AC="@firebase/storage-compat",NC="@firebase/firestore",CC="@firebase/ai",RC="@firebase/firestore-compat",PC="firebase",jC="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="[DEFAULT]",OC={[Pf]:"fire-core",[aC]:"fire-core-compat",[cC]:"fire-analytics",[lC]:"fire-analytics-compat",[hC]:"fire-app-check",[uC]:"fire-app-check-compat",[dC]:"fire-auth",[fC]:"fire-auth-compat",[pC]:"fire-rtdb",[mC]:"fire-data-connect",[gC]:"fire-rtdb-compat",[yC]:"fire-fn",[vC]:"fire-fn-compat",[_C]:"fire-iid",[wC]:"fire-iid-compat",[xC]:"fire-fcm",[bC]:"fire-fcm-compat",[EC]:"fire-perf",[TC]:"fire-perf-compat",[SC]:"fire-rc",[kC]:"fire-rc-compat",[IC]:"fire-gcs",[AC]:"fire-gcs-compat",[NC]:"fire-fst",[RC]:"fire-fst-compat",[CC]:"fire-vertex","fire-js":"fire-js",[PC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=new Map,DC=new Map,Of=new Map;function H0(t,e){try{t.container.addComponent(e)}catch(r){Gr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function qi(t){const e=t.name;if(Of.has(e))return Gr.debug(`There were multiple attempts to register component ${e}.`),!1;Of.set(e,t);for(const r of su.values())H0(r,t);for(const r of DC.values())H0(r,t);return!0}function Em(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Er(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mn=new il("app","Firebase",LC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=jC;function jb(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:jf,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw Mn.create("bad-app-name",{appName:String(s)});if(r||(r=Ib()),!r)throw Mn.create("no-options");const i=su.get(s);if(i){if(Ls(r,i.options)&&Ls(n,i.config))return i;throw Mn.create("duplicate-app",{appName:s})}const o=new zN(s);for(const l of Of.values())o.addComponent(l);const a=new VC(r,n,o);return su.set(s,a),a}function Ob(t=jf){const e=su.get(t);if(!e&&t===jf&&Ib())return jb();if(!e)throw Mn.create("no-app",{appName:t});return e}function Un(t,e,r){let n=OC[t]??t;r&&(n+=`-${r}`);const s=n.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${n}" with version "${e}":`];s&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gr.warn(o.join(" "));return}qi(new Vs(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="firebase-heartbeat-database",UC=1,Ua="firebase-heartbeat-store";let hd=null;function Db(){return hd||(hd=rC(MC,UC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ua)}catch(r){console.warn(r)}}}}).catch(t=>{throw Mn.create("idb-open",{originalErrorMessage:t.message})})),hd}async function $C(t){try{const r=(await Db()).transaction(Ua),n=await r.objectStore(Ua).get(Lb(t));return await r.done,n}catch(e){if(e instanceof Xr)Gr.warn(e.message);else{const r=Mn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gr.warn(r.message)}}}async function K0(t,e){try{const n=(await Db()).transaction(Ua,"readwrite");await n.objectStore(Ua).put(e,Lb(t)),await n.done}catch(r){if(r instanceof Xr)Gr.warn(r.message);else{const n=Mn.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Gr.warn(n.message)}}}function Lb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=1024,BC=30;class zC{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new WC(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=G0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>BC){const o=HC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Gr.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=G0(),{heartbeatsToSend:n,unsentEntries:s}=qC(this._heartbeatsCache.heartbeats),i=nu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Gr.warn(r),""}}}function G0(){return new Date().toISOString().substring(0,10)}function qC(t,e=FC){const r=[];let n=t.slice();for(const s of t){const i=r.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Q0(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),Q0(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class WC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RN()?PN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await $C(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return K0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return K0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Q0(t){return nu(JSON.stringify({version:2,heartbeats:t})).length}function HC(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t){qi(new Vs("platform-logger",e=>new iC(e),"PRIVATE")),qi(new Vs("heartbeat",e=>new zC(e),"PRIVATE")),Un(Pf,W0,t),Un(Pf,W0,"esm2020"),Un("fire-js","")}KC("");var GC="firebase",QC="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Un(GC,QC,"app");function Vb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JC=Vb,Mb=new il("auth","Firebase",Vb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=new xm("@firebase/auth");function YC(t,...e){iu.logLevel<=se.WARN&&iu.warn(`Auth (${ao}): ${t}`,...e)}function yc(t,...e){iu.logLevel<=se.ERROR&&iu.error(`Auth (${ao}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(t,...e){throw Tm(t,...e)}function Ir(t,...e){return Tm(t,...e)}function Ub(t,e,r){const n={...JC(),[e]:r};return new il("auth","Firebase",n).create(e,{appName:t.name})}function As(t){return Ub(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tm(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return Mb.create(t,...e)}function Y(t,e,...r){if(!t)throw Tm(e,...r)}function Fr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yc(e),new Error(e)}function Qr(t,e){t||Fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function XC(){return J0()==="http:"||J0()==="https:"}function J0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XC()||IN()||"connection"in navigator)?navigator.onLine:!0}function eR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,r){this.shortDelay=e,this.longDelay=r,Qr(r>e,"Short delay should be less than long delay!"),this.isMobile=TN()||AN()}get(){return ZC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t,e){Qr(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nR=new al(3e4,6e4);function Bs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ns(t,e,r,n,s={}){return Fb(t,s,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const a=ol({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:l,...i};return kN()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&oo(t.emulatorConfig.host)&&(h.credentials="include"),$b.fetch()(await Bb(t,t.config.apiHost,r,a),h)})}async function Fb(t,e,r){t._canInitEmulator=!1;const n={...tR,...e};try{const s=new iR(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Hl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,h]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Hl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Hl(t,"user-disabled",o);const d=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Ub(t,d,h);pr(t,d)}}catch(s){if(s instanceof Xr)throw s;pr(t,"network-request-failed",{message:String(s)})}}async function Fu(t,e,r,n,s={}){const i=await ns(t,e,r,n,s);return"mfaPendingCredential"in i&&pr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Bb(t,e,r,n){const s=`${e}${r}?${n}`,i=t,o=i.config.emulator?Sm(t.config,s):`${t.config.apiScheme}://${s}`;return rR.includes(r)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function sR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class iR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Ir(this.auth,"network-request-failed")),nR.get())})}}function Hl(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Ir(t,e,n);return s.customData._tokenResponse=r,s}function Y0(t){return t!==void 0&&t.enterprise!==void 0}class oR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return sR(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function aR(t,e){return ns(t,"GET","/v2/recaptchaConfig",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(t,e){return ns(t,"POST","/v1/accounts:delete",e)}async function ou(t,e){return ns(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cR(t,e=!1){const r=fr(t),n=await r.getIdToken(e),s=km(n);Y(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:da(dd(s.auth_time)),issuedAtTime:da(dd(s.iat)),expirationTime:da(dd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function dd(t){return Number(t)*1e3}function km(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return yc("JWT malformed, contained fewer than 3 sections"),null;try{const s=Sb(r);return s?JSON.parse(s):(yc("Failed to decode base64 JWT payload"),null)}catch(s){return yc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function X0(t){const e=km(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Xr&&uR(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function uR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=da(this.lastLoginAt),this.creationTime=da(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function au(t){var p;const e=t.auth,r=await t.getIdToken(),n=await $a(t,ou(e,{idToken:r}));Y(n==null?void 0:n.users.length,e,"internal-error");const s=n.users[0];t._notifyReloadListener(s);const i=(p=s.providerUserInfo)!=null&&p.length?zb(s.providerUserInfo):[],o=fR(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),h=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Lf(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function dR(t){const e=fr(t);await au(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fR(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function zb(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(t,e){const r=await Fb(t,{},async()=>{const n=ol({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Bb(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:n};return t.emulatorConfig&&oo(t.emulatorConfig.host)&&(l.credentials="include"),$b.fetch()(o,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function mR(t,e){return ns(t,"POST","/v2/accounts:revokeToken",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):X0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Y(e.length!==0,"internal-error");const r=X0(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await pR(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,o=new Ni;return n&&(Y(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(Y(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Y(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ni,this.toJSON())}_performRefresh(){return Fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class cr{constructor({uid:e,auth:r,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new hR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Lf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await $a(this,this.stsTokenManager.getToken(this.auth,e));return Y(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return cR(this,e)}reload(){return dR(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new cr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await au(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Er(this.auth.app))return Promise.reject(As(this.auth));const e=await this.getIdToken();return await $a(this,lR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,s=r.email??void 0,i=r.phoneNumber??void 0,o=r.photoURL??void 0,a=r.tenantId??void 0,l=r._redirectEventId??void 0,h=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:_,stsTokenManager:b}=r;Y(p&&b,e,"internal-error");const I=Ni.fromJSON(this.name,b);Y(typeof p=="string",e,"internal-error"),dn(n,e.name),dn(s,e.name),Y(typeof m=="boolean",e,"internal-error"),Y(typeof y=="boolean",e,"internal-error"),dn(i,e.name),dn(o,e.name),dn(a,e.name),dn(l,e.name),dn(h,e.name),dn(d,e.name);const w=new cr({uid:p,auth:e,email:s,emailVerified:m,displayName:n,isAnonymous:y,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:I,createdAt:h,lastLoginAt:d});return _&&Array.isArray(_)&&(w.providerData=_.map(v=>({...v}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,r,n=!1){const s=new Ni;s.updateFromServerResponse(r);const i=new cr({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await au(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Y(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?zb(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ni;a.updateFromIdToken(n);const l=new cr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Lf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,h),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=new Map;function Br(t){Qr(t instanceof Function,"Expected a class definition");let e=Z0.get(t);return e?(Qr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Z0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}qb.type="NONE";const ev=qb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(t,e,r){return`firebase:${t}:${e}:${r}`}class Ci{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=vc(this.userKey,s.apiKey,i),this.fullPersistenceKey=vc("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await ou(this.auth,{idToken:e}).catch(()=>{});return r?cr._fromGetAccountInfoResponse(this.auth,r,e):null}return cr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Ci(Br(ev),e,n);const s=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Br(ev);const o=vc(n,e.config.apiKey,e.name);let a=null;for(const h of r)try{const d=await h._get(o);if(d){let p;if(typeof d=="string"){const m=await ou(e,{idToken:d}).catch(()=>{});if(!m)break;p=await cr._fromGetAccountInfoResponse(e,m,d)}else p=cr._fromJSON(e,d);h!==i&&(a=p),i=h;break}}catch{}const l=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ci(i,e,n):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(r.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Ci(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Gb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Wb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jb(e))return"Blackberry";if(Yb(e))return"Webos";if(Hb(e))return"Safari";if((e.includes("chrome/")||Kb(e))&&!e.includes("edge/"))return"Chrome";if(Qb(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Wb(t=_t()){return/firefox\//i.test(t)}function Hb(t=_t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kb(t=_t()){return/crios\//i.test(t)}function Gb(t=_t()){return/iemobile/i.test(t)}function Qb(t=_t()){return/android/i.test(t)}function Jb(t=_t()){return/blackberry/i.test(t)}function Yb(t=_t()){return/webos/i.test(t)}function Im(t=_t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gR(t=_t()){var e;return Im(t)&&!!((e=window.navigator)!=null&&e.standalone)}function yR(){return NN()&&document.documentMode===10}function Xb(t=_t()){return Im(t)||Qb(t)||Yb(t)||Jb(t)||/windows phone/i.test(t)||Gb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(t,e=[]){let r;switch(t){case"Browser":r=tv(_t());break;case"Worker":r=`${tv(_t())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${ao}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(t,e={}){return ns(t,"GET","/v2/passwordPolicy",Bs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=6;class xR{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??wR,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rv(this),this.idTokenSubscription=new rv(this),this.beforeStateQueue=new vR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Br(r)),this._initializationPromise=this.queue(async()=>{var n,s,i;if(!this._deleted&&(this.persistenceManager=await Ci.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await ou(this,{idToken:e}),n=await cr._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Er(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(n=l.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await au(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Er(this.app))return Promise.reject(As(this));const r=e?fr(e):null;return r&&Y(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Er(this.app)?Promise.reject(As(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Er(this.app)?Promise.reject(As(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _R(this),r=new xR(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new il("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await mR(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Br(e)||this._popupRedirectResolver;Y(r,this,"argument-error"),this.redirectPersistenceManager=await Ci.create(this,[Br(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{o=!0,l()}}else{const l=e.addObserver(r);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(Er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&YC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Bu(t){return fr(t)}class rv{constructor(e){this.auth=e,this.observer=null,this.addObserver=VN(r=>this.observer=r)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ER(t){zu=t}function eE(t){return zu.loadJS(t)}function TR(){return zu.recaptchaEnterpriseScript}function SR(){return zu.gapiScript}function kR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class IR{constructor(){this.enterprise=new AR}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class AR{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const NR="recaptcha-enterprise",tE="NO_RECAPTCHA";class CR{constructor(e){this.type=NR,this.auth=Bu(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{aR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const h=new oR(l);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Y0(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(tE)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new IR().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{n(this.auth).then(a=>{if(!r&&Y0(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=TR();l.length!==0&&(l+=a),eE(l).then(()=>{s(a,i,o)}).catch(h=>{o(h)})}}).catch(a=>{o(a)})})}}async function nv(t,e,r,n=!1,s=!1){const i=new CR(t);let o;if(s)o=tE;else try{o=await i.verify(r)}catch{o=await i.verify(r,!0)}const a={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,h=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return n?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function sv(t,e,r,n,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await nv(t,e,r,r==="getOobCode");return n(t,o)}else return n(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await nv(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t,e){const r=Em(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(Ls(i,e??{}))return s;pr(s,"already-initialized")}return r.initialize({options:e})}function PR(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Br);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function jR(t,e,r){const n=Bu(t);Y(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=rE(e),{host:o,port:a}=OR(e),l=a===null?"":`:${a}`,h={url:`${i}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){Y(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Y(Ls(h,n.config.emulator)&&Ls(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=h,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,oo(o)?(Nb(`${i}//${o}${l}`),Cb("Auth",!0)):DR()}function rE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function OR(t){const e=rE(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:iv(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:iv(o)}}}function iv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function DR(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,r){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}}async function LR(t,e){return ns(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(t,e){return Fu(t,"POST","/v1/accounts:signInWithPassword",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t,e){return Fu(t,"POST","/v1/accounts:signInWithEmailLink",Bs(t,e))}async function UR(t,e){return Fu(t,"POST","/v1/accounts:signInWithEmailLink",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends Am{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Fa(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Fa(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sv(e,r,"signInWithPassword",VR);case"emailLink":return MR(e,{email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sv(e,n,"signUpPassword",LR);case"emailLink":return UR(e,{idToken:r,email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ri(t,e){return Fu(t,"POST","/v1/accounts:signInWithIdp",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="http://localhost";class Ms extends Am{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):pr("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...i}=r;if(!n||!s)return null;const o=new Ms(n,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Ri(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Ri(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ri(e,r)}buildRequest(){const e={requestUri:$R,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=ol(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BR(t){const e=Ho(Ko(t)).link,r=e?Ho(Ko(e)).deep_link_id:null,n=Ho(Ko(t)).deep_link_id;return(n?Ho(Ko(n)).link:null)||n||r||e||t}class Nm{constructor(e){const r=Ho(Ko(e)),n=r.apiKey??null,s=r.oobCode??null,i=FR(r.mode??null);Y(n&&s&&i,"argument-error"),this.apiKey=n,this.operation=i,this.code=s,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=BR(e);try{return new Nm(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.providerId=ll.PROVIDER_ID}static credential(e,r){return Fa._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Nm.parseLink(r);return Y(n,"argument-error"),Fa._fromEmailAndCode(e,n.code,n.tenantId)}}ll.PROVIDER_ID="password";ll.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ll.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends nE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn extends cl{constructor(){super("facebook.com")}static credential(e){return Ms._fromParams({providerId:vn.PROVIDER_ID,signInMethod:vn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vn.credentialFromTaggedObject(e)}static credentialFromError(e){return vn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vn.credential(e.oauthAccessToken)}catch{return null}}}vn.FACEBOOK_SIGN_IN_METHOD="facebook.com";vn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n extends cl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Ms._fromParams({providerId:_n.PROVIDER_ID,signInMethod:_n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return _n.credentialFromTaggedObject(e)}static credentialFromError(e){return _n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return _n.credential(r,n)}catch{return null}}}_n.GOOGLE_SIGN_IN_METHOD="google.com";_n.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn extends cl{constructor(){super("github.com")}static credential(e){return Ms._fromParams({providerId:wn.PROVIDER_ID,signInMethod:wn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wn.credentialFromTaggedObject(e)}static credentialFromError(e){return wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wn.credential(e.oauthAccessToken)}catch{return null}}}wn.GITHUB_SIGN_IN_METHOD="github.com";wn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn extends cl{constructor(){super("twitter.com")}static credential(e,r){return Ms._fromParams({providerId:xn.PROVIDER_ID,signInMethod:xn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return xn.credentialFromTaggedObject(e)}static credentialFromError(e){return xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return xn.credential(r,n)}catch{return null}}}xn.TWITTER_SIGN_IN_METHOD="twitter.com";xn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await cr._fromIdTokenResponse(e,n,s),o=ov(n);return new Wi({user:i,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=ov(n);return new Wi({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function ov(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends Xr{constructor(e,r,n,s){super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,lu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new lu(e,r,n,s)}}function sE(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?lu._fromErrorAndOperation(t,i,e,n):i})}async function zR(t,e,r=!1){const n=await $a(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Wi._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(t,e,r=!1){const{auth:n}=t;if(Er(n.app))return Promise.reject(As(n));const s="reauthenticate";try{const i=await $a(t,sE(n,s,e,t),r);Y(i.idToken,n,"internal-error");const o=km(i.idToken);Y(o,n,"internal-error");const{sub:a}=o;return Y(t.uid===a,n,"user-mismatch"),Wi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&pr(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(t,e,r=!1){if(Er(t.app))return Promise.reject(As(t));const n="signIn",s=await sE(t,n,e),i=await Wi._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(t,e,r,n){return fr(t).onIdTokenChanged(e,r,n)}function KR(t,e,r){return fr(t).beforeAuthStateChanged(e,r)}const cu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(cu,"1"),this.storage.removeItem(cu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=1e3,QR=10;class oE extends iE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);yR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,QR):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},GR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}oE.type="LOCAL";const JR=oE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE extends iE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}aE.type="SESSION";const lE=aE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new qu(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const a=Array.from(o).map(async h=>h(r.origin,i)),l=await YR(a);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const h=Cm("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(){return window}function ZR(t){Ar().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function e2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function t2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function r2(){return cE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="firebaseLocalStorageDb",n2=1,uu="firebaseLocalStorage",hE="fbase_key";class ul{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Wu(t,e){return t.transaction([uu],e?"readwrite":"readonly").objectStore(uu)}function s2(){const t=indexedDB.deleteDatabase(uE);return new ul(t).toPromise()}function Vf(){const t=indexedDB.open(uE,n2);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(uu,{keyPath:hE})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(uu)?e(n):(n.close(),await s2(),e(await Vf()))})})}async function av(t,e,r){const n=Wu(t,!0).put({[hE]:e,value:r});return new ul(n).toPromise()}async function i2(t,e){const r=Wu(t,!1).get(e),n=await new ul(r).toPromise();return n===void 0?null:n.value}function lv(t,e){const r=Wu(t,!0).delete(e);return new ul(r).toPromise()}const o2=800,a2=3;class dE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vf(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>a2)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qu._getInstance(r2()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await e2(),!this.activeServiceWorker)return;this.sender=new XR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||t2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vf();return await av(e,cu,"1"),await lv(e,cu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>av(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>i2(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>lv(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Wu(s,!1).getAll();return new ul(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),o2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dE.type="LOCAL";const l2=dE;new al(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t,e){return e?Br(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm extends Am{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ri(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ri(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ri(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function u2(t){return WR(t.auth,new Rm(t),t.bypassAuthState)}function h2(t){const{auth:e,user:r}=t;return Y(r,e,"internal-error"),qR(r,new Rm(t),t.bypassAuthState)}async function d2(t){const{auth:e,user:r}=t;return Y(r,e,"internal-error"),zR(r,new Rm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return u2;case"linkViaPopup":case"linkViaRedirect":return d2;case"reauthViaPopup":case"reauthViaRedirect":return h2;default:pr(this.auth,"internal-error")}}resolve(e){Qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=new al(2e3,1e4);class wi extends fE{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,wi.currentPopupAction&&wi.currentPopupAction.cancel(),wi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){Qr(this.filter.length===1,"Popup operations only handle one event");const e=Cm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ir(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ir(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ir(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,f2.get())};e()}}wi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="pendingRedirect",_c=new Map;class m2 extends fE{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=_c.get(this.auth._key());if(!e){try{const n=await g2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}_c.set(this.auth._key(),e)}return this.bypassAuthState||_c.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function g2(t,e){const r=_2(e),n=v2(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function y2(t,e){_c.set(t._key(),e)}function v2(t){return Br(t._redirectPersistence)}function _2(t){return vc(p2,t.config.apiKey,t.name)}async function w2(t,e,r=!1){if(Er(t.app))return Promise.reject(As(t));const n=Bu(t),s=c2(n,e),o=await new m2(n,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=10*60*1e3;class b2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E2(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!pE(e)){const s=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(Ir(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=x2&&this.cachedEventUids.clear(),this.cachedEventUids.has(cv(e))}saveEventToCache(e){this.cachedEventUids.add(cv(e)),this.lastProcessedEventTime=Date.now()}}function cv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function E2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(t,e={}){return ns(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,k2=/^https?/;async function I2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await T2(t);for(const r of e)try{if(A2(r))return}catch{}pr(t,"unauthorized-domain")}function A2(t){const e=Df(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!k2.test(r))return!1;if(S2.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=new al(3e4,6e4);function uv(){const t=Ar().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function C2(t){return new Promise((e,r)=>{var s,i,o;function n(){uv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uv(),r(Ir(t,"network-request-failed"))},timeout:N2.get()})}if((i=(s=Ar().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Ar().gapi)!=null&&o.load)n();else{const a=kR("iframefcb");return Ar()[a]=()=>{gapi.load?n():r(Ir(t,"network-request-failed"))},eE(`${SR()}?onload=${a}`).catch(l=>r(l))}}).catch(e=>{throw wc=null,e})}let wc=null;function R2(t){return wc=wc||C2(t),wc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=new al(5e3,15e3),j2="__/auth/iframe",O2="emulator/auth/iframe",D2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V2(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Sm(e,O2):`https://${t.config.authDomain}/${j2}`,n={apiKey:e.apiKey,appName:t.name,v:ao},s=L2.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${ol(n).slice(1)}`}async function M2(t){const e=await R2(t),r=Ar().gapi;return Y(r,t,"internal-error"),e.open({where:document.body,url:V2(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:D2,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const o=Ir(t,"network-request-failed"),a=Ar().setTimeout(()=>{i(o)},P2.get());function l(){Ar().clearTimeout(a),s(n)}n.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$2=500,F2=600,B2="_blank",z2="http://localhost";class hv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function q2(t,e,r,n=$2,s=F2){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const l={...U2,width:n.toString(),height:s.toString(),top:i,left:o},h=_t().toLowerCase();r&&(a=Kb(h)?B2:r),Wb(h)&&(e=e||z2,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[y,_])=>`${m}${y}=${_},`,"");if(gR(h)&&a!=="_self")return W2(e||"",a),new hv(null);const p=window.open(e||"",a,d);Y(p,t,"popup-blocked");try{p.focus()}catch{}return new hv(p)}function W2(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="__/auth/handler",K2="emulator/auth/handler",G2=encodeURIComponent("fac");async function dv(t,e,r,n,s,i){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:ao,eventId:s};if(e instanceof nE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",LN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof cl){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),h=l?`#${G2}=${encodeURIComponent(l)}`:"";return`${Q2(t)}?${ol(a).slice(1)}${h}`}function Q2({config:t}){return t.emulator?Sm(t,K2):`https://${t.authDomain}/${H2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd="webStorageSupport";class J2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lE,this._completeRedirectFn=w2,this._overrideRedirectResult=y2}async _openPopup(e,r,n,s){var o;Qr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await dv(e,r,n,Df(),s);return q2(e,i,Cm())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await dv(e,r,n,Df(),s);return ZR(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(Qr(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await M2(e),n=new b2(e);return r.register("authEvent",s=>(Y(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(fd,{type:fd},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[fd];i!==void 0&&r(!!i),pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=I2(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return Xb()||Hb()||Im()}}const Y2=J2;var fv="@firebase/auth",pv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eP(t){qi(new Vs("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=n.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zb(t)},h=new bR(n,s,i,l);return PR(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),qi(new Vs("auth-internal",e=>{const r=Bu(e.getProvider("auth").getImmediate());return(n=>new X2(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Un(fv,pv,Z2(t)),Un(fv,pv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=5*60,rP=Ab("authIdTokenMaxAge")||tP;let mv=null;const nP=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>rP)return;const s=r==null?void 0:r.token;mv!==s&&(mv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function sP(t=Ob()){const e=Em(t,"auth");if(e.isInitialized())return e.getImmediate();const r=RR(t,{popupRedirectResolver:Y2,persistence:[l2,JR,lE]}),n=Ab("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=nP(i.toString());KR(r,o,()=>o(r.currentUser)),HR(r,a=>o(a))}}const s=kb("auth");return s&&jR(r,`http://${s}`),r}function iP(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}ER({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=Ir("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",iP().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eP("Browser");var gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $n,mE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function k(){}k.prototype=T.prototype,S.F=T.prototype,S.prototype=new k,S.prototype.constructor=S,S.D=function(N,C,P){for(var A=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)A[Pe-2]=arguments[Pe];return T.prototype[C].apply(N,A)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,T,k){k||(k=0);const N=Array(16);if(typeof T=="string")for(var C=0;C<16;++C)N[C]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(C=0;C<16;++C)N[C]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=S.g[0],k=S.g[1],C=S.g[2];let P=S.g[3],A;A=T+(P^k&(C^P))+N[0]+3614090360&4294967295,T=k+(A<<7&4294967295|A>>>25),A=P+(C^T&(k^C))+N[1]+3905402710&4294967295,P=T+(A<<12&4294967295|A>>>20),A=C+(k^P&(T^k))+N[2]+606105819&4294967295,C=P+(A<<17&4294967295|A>>>15),A=k+(T^C&(P^T))+N[3]+3250441966&4294967295,k=C+(A<<22&4294967295|A>>>10),A=T+(P^k&(C^P))+N[4]+4118548399&4294967295,T=k+(A<<7&4294967295|A>>>25),A=P+(C^T&(k^C))+N[5]+1200080426&4294967295,P=T+(A<<12&4294967295|A>>>20),A=C+(k^P&(T^k))+N[6]+2821735955&4294967295,C=P+(A<<17&4294967295|A>>>15),A=k+(T^C&(P^T))+N[7]+4249261313&4294967295,k=C+(A<<22&4294967295|A>>>10),A=T+(P^k&(C^P))+N[8]+1770035416&4294967295,T=k+(A<<7&4294967295|A>>>25),A=P+(C^T&(k^C))+N[9]+2336552879&4294967295,P=T+(A<<12&4294967295|A>>>20),A=C+(k^P&(T^k))+N[10]+4294925233&4294967295,C=P+(A<<17&4294967295|A>>>15),A=k+(T^C&(P^T))+N[11]+2304563134&4294967295,k=C+(A<<22&4294967295|A>>>10),A=T+(P^k&(C^P))+N[12]+1804603682&4294967295,T=k+(A<<7&4294967295|A>>>25),A=P+(C^T&(k^C))+N[13]+4254626195&4294967295,P=T+(A<<12&4294967295|A>>>20),A=C+(k^P&(T^k))+N[14]+2792965006&4294967295,C=P+(A<<17&4294967295|A>>>15),A=k+(T^C&(P^T))+N[15]+1236535329&4294967295,k=C+(A<<22&4294967295|A>>>10),A=T+(C^P&(k^C))+N[1]+4129170786&4294967295,T=k+(A<<5&4294967295|A>>>27),A=P+(k^C&(T^k))+N[6]+3225465664&4294967295,P=T+(A<<9&4294967295|A>>>23),A=C+(T^k&(P^T))+N[11]+643717713&4294967295,C=P+(A<<14&4294967295|A>>>18),A=k+(P^T&(C^P))+N[0]+3921069994&4294967295,k=C+(A<<20&4294967295|A>>>12),A=T+(C^P&(k^C))+N[5]+3593408605&4294967295,T=k+(A<<5&4294967295|A>>>27),A=P+(k^C&(T^k))+N[10]+38016083&4294967295,P=T+(A<<9&4294967295|A>>>23),A=C+(T^k&(P^T))+N[15]+3634488961&4294967295,C=P+(A<<14&4294967295|A>>>18),A=k+(P^T&(C^P))+N[4]+3889429448&4294967295,k=C+(A<<20&4294967295|A>>>12),A=T+(C^P&(k^C))+N[9]+568446438&4294967295,T=k+(A<<5&4294967295|A>>>27),A=P+(k^C&(T^k))+N[14]+3275163606&4294967295,P=T+(A<<9&4294967295|A>>>23),A=C+(T^k&(P^T))+N[3]+4107603335&4294967295,C=P+(A<<14&4294967295|A>>>18),A=k+(P^T&(C^P))+N[8]+1163531501&4294967295,k=C+(A<<20&4294967295|A>>>12),A=T+(C^P&(k^C))+N[13]+2850285829&4294967295,T=k+(A<<5&4294967295|A>>>27),A=P+(k^C&(T^k))+N[2]+4243563512&4294967295,P=T+(A<<9&4294967295|A>>>23),A=C+(T^k&(P^T))+N[7]+1735328473&4294967295,C=P+(A<<14&4294967295|A>>>18),A=k+(P^T&(C^P))+N[12]+2368359562&4294967295,k=C+(A<<20&4294967295|A>>>12),A=T+(k^C^P)+N[5]+4294588738&4294967295,T=k+(A<<4&4294967295|A>>>28),A=P+(T^k^C)+N[8]+2272392833&4294967295,P=T+(A<<11&4294967295|A>>>21),A=C+(P^T^k)+N[11]+1839030562&4294967295,C=P+(A<<16&4294967295|A>>>16),A=k+(C^P^T)+N[14]+4259657740&4294967295,k=C+(A<<23&4294967295|A>>>9),A=T+(k^C^P)+N[1]+2763975236&4294967295,T=k+(A<<4&4294967295|A>>>28),A=P+(T^k^C)+N[4]+1272893353&4294967295,P=T+(A<<11&4294967295|A>>>21),A=C+(P^T^k)+N[7]+4139469664&4294967295,C=P+(A<<16&4294967295|A>>>16),A=k+(C^P^T)+N[10]+3200236656&4294967295,k=C+(A<<23&4294967295|A>>>9),A=T+(k^C^P)+N[13]+681279174&4294967295,T=k+(A<<4&4294967295|A>>>28),A=P+(T^k^C)+N[0]+3936430074&4294967295,P=T+(A<<11&4294967295|A>>>21),A=C+(P^T^k)+N[3]+3572445317&4294967295,C=P+(A<<16&4294967295|A>>>16),A=k+(C^P^T)+N[6]+76029189&4294967295,k=C+(A<<23&4294967295|A>>>9),A=T+(k^C^P)+N[9]+3654602809&4294967295,T=k+(A<<4&4294967295|A>>>28),A=P+(T^k^C)+N[12]+3873151461&4294967295,P=T+(A<<11&4294967295|A>>>21),A=C+(P^T^k)+N[15]+530742520&4294967295,C=P+(A<<16&4294967295|A>>>16),A=k+(C^P^T)+N[2]+3299628645&4294967295,k=C+(A<<23&4294967295|A>>>9),A=T+(C^(k|~P))+N[0]+4096336452&4294967295,T=k+(A<<6&4294967295|A>>>26),A=P+(k^(T|~C))+N[7]+1126891415&4294967295,P=T+(A<<10&4294967295|A>>>22),A=C+(T^(P|~k))+N[14]+2878612391&4294967295,C=P+(A<<15&4294967295|A>>>17),A=k+(P^(C|~T))+N[5]+4237533241&4294967295,k=C+(A<<21&4294967295|A>>>11),A=T+(C^(k|~P))+N[12]+1700485571&4294967295,T=k+(A<<6&4294967295|A>>>26),A=P+(k^(T|~C))+N[3]+2399980690&4294967295,P=T+(A<<10&4294967295|A>>>22),A=C+(T^(P|~k))+N[10]+4293915773&4294967295,C=P+(A<<15&4294967295|A>>>17),A=k+(P^(C|~T))+N[1]+2240044497&4294967295,k=C+(A<<21&4294967295|A>>>11),A=T+(C^(k|~P))+N[8]+1873313359&4294967295,T=k+(A<<6&4294967295|A>>>26),A=P+(k^(T|~C))+N[15]+4264355552&4294967295,P=T+(A<<10&4294967295|A>>>22),A=C+(T^(P|~k))+N[6]+2734768916&4294967295,C=P+(A<<15&4294967295|A>>>17),A=k+(P^(C|~T))+N[13]+1309151649&4294967295,k=C+(A<<21&4294967295|A>>>11),A=T+(C^(k|~P))+N[4]+4149444226&4294967295,T=k+(A<<6&4294967295|A>>>26),A=P+(k^(T|~C))+N[11]+3174756917&4294967295,P=T+(A<<10&4294967295|A>>>22),A=C+(T^(P|~k))+N[2]+718787259&4294967295,C=P+(A<<15&4294967295|A>>>17),A=k+(P^(C|~T))+N[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(C+(A<<21&4294967295|A>>>11))&4294967295,S.g[2]=S.g[2]+C&4294967295,S.g[3]=S.g[3]+P&4294967295}n.prototype.v=function(S,T){T===void 0&&(T=S.length);const k=T-this.blockSize,N=this.C;let C=this.h,P=0;for(;P<T;){if(C==0)for(;P<=k;)s(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<T;)if(N[C++]=S.charCodeAt(P++),C==this.blockSize){s(this,N),C=0;break}}else for(;P<T;)if(N[C++]=S[P++],C==this.blockSize){s(this,N),C=0;break}}this.h=C,this.o+=T},n.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;T=this.o*8;for(var k=S.length-8;k<S.length;++k)S[k]=T&255,T/=256;for(this.v(S),S=Array(16),T=0,k=0;k<4;++k)for(let N=0;N<32;N+=8)S[T++]=this.g[k]>>>N&255;return S};function i(S,T){var k=a;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=T(S)}function o(S,T){this.h=T;const k=[];let N=!0;for(let C=S.length-1;C>=0;C--){const P=S[C]|0;N&&P==T||(k[C]=P,N=!1)}this.g=k}var a={};function l(S){return-128<=S&&S<128?i(S,function(T){return new o([T|0],T<0?-1:0)}):new o([S|0],S<0?-1:0)}function h(S){if(isNaN(S)||!isFinite(S))return p;if(S<0)return I(h(-S));const T=[];let k=1;for(let N=0;S>=k;N++)T[N]=S/k|0,k*=4294967296;return new o(T,0)}function d(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return I(d(S.substring(1),T));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=h(Math.pow(T,8));let N=p;for(let P=0;P<S.length;P+=8){var C=Math.min(8,S.length-P);const A=parseInt(S.substring(P,P+C),T);C<8?(C=h(Math.pow(T,C)),N=N.j(C).add(h(A))):(N=N.j(k),N=N.add(h(A)))}return N}var p=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(b(this))return-I(this).m();let S=0,T=1;for(let k=0;k<this.g.length;k++){const N=this.i(k);S+=(N>=0?N:4294967296+N)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(_(this))return"0";if(b(this))return"-"+I(this).toString(S);const T=h(Math.pow(S,6));var k=this;let N="";for(;;){const C=R(k,T).g;k=w(k,C.j(T));let P=((k.g.length>0?k.g[0]:k.h)>>>0).toString(S);if(k=C,_(k))return P+N;for(;P.length<6;)P="0"+P;N=P+N}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function _(S){if(S.h!=0)return!1;for(let T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function b(S){return S.h==-1}t.l=function(S){return S=w(this,S),b(S)?-1:_(S)?0:1};function I(S){const T=S.g.length,k=[];for(let N=0;N<T;N++)k[N]=~S.g[N];return new o(k,~S.h).add(m)}t.abs=function(){return b(this)?I(this):this},t.add=function(S){const T=Math.max(this.g.length,S.g.length),k=[];let N=0;for(let C=0;C<=T;C++){let P=N+(this.i(C)&65535)+(S.i(C)&65535),A=(P>>>16)+(this.i(C)>>>16)+(S.i(C)>>>16);N=A>>>16,P&=65535,A&=65535,k[C]=A<<16|P}return new o(k,k[k.length-1]&-2147483648?-1:0)};function w(S,T){return S.add(I(T))}t.j=function(S){if(_(this)||_(S))return p;if(b(this))return b(S)?I(this).j(I(S)):I(I(this).j(S));if(b(S))return I(this.j(I(S)));if(this.l(y)<0&&S.l(y)<0)return h(this.m()*S.m());const T=this.g.length+S.g.length,k=[];for(var N=0;N<2*T;N++)k[N]=0;for(N=0;N<this.g.length;N++)for(let C=0;C<S.g.length;C++){const P=this.i(N)>>>16,A=this.i(N)&65535,Pe=S.i(C)>>>16,zt=S.i(C)&65535;k[2*N+2*C]+=A*zt,v(k,2*N+2*C),k[2*N+2*C+1]+=P*zt,v(k,2*N+2*C+1),k[2*N+2*C+1]+=A*Pe,v(k,2*N+2*C+1),k[2*N+2*C+2]+=P*Pe,v(k,2*N+2*C+2)}for(S=0;S<T;S++)k[S]=k[2*S+1]<<16|k[2*S];for(S=T;S<2*T;S++)k[S]=0;return new o(k,0)};function v(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function E(S,T){this.g=S,this.h=T}function R(S,T){if(_(T))throw Error("division by zero");if(_(S))return new E(p,p);if(b(S))return T=R(I(S),T),new E(I(T.g),I(T.h));if(b(T))return T=R(S,I(T)),new E(I(T.g),T.h);if(S.g.length>30){if(b(S)||b(T))throw Error("slowDivide_ only works with positive integers.");for(var k=m,N=T;N.l(S)<=0;)k=D(k),N=D(N);var C=V(k,1),P=V(N,1);for(N=V(N,2),k=V(k,2);!_(N);){var A=P.add(N);A.l(S)<=0&&(C=C.add(k),P=A),N=V(N,1),k=V(k,1)}return T=w(S,C.j(T)),new E(C,T)}for(C=p;S.l(T)>=0;){for(k=Math.max(1,Math.floor(S.m()/T.m())),N=Math.ceil(Math.log(k)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),P=h(k),A=P.j(T);b(A)||A.l(S)>0;)k-=N,P=h(k),A=P.j(T);_(P)&&(P=m),C=C.add(P),S=w(S,A)}return new E(C,S)}t.B=function(S){return R(this,S).h},t.and=function(S){const T=Math.max(this.g.length,S.g.length),k=[];for(let N=0;N<T;N++)k[N]=this.i(N)&S.i(N);return new o(k,this.h&S.h)},t.or=function(S){const T=Math.max(this.g.length,S.g.length),k=[];for(let N=0;N<T;N++)k[N]=this.i(N)|S.i(N);return new o(k,this.h|S.h)},t.xor=function(S){const T=Math.max(this.g.length,S.g.length),k=[];for(let N=0;N<T;N++)k[N]=this.i(N)^S.i(N);return new o(k,this.h^S.h)};function D(S){const T=S.g.length+1,k=[];for(let N=0;N<T;N++)k[N]=S.i(N)<<1|S.i(N-1)>>>31;return new o(k,S.h)}function V(S,T){const k=T>>5;T%=32;const N=S.g.length-k,C=[];for(let P=0;P<N;P++)C[P]=T>0?S.i(P+k)>>>T|S.i(P+k+1)<<32-T:S.i(P+k);return new o(C,S.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,mE=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=d,$n=o}).apply(typeof gv<"u"?gv:typeof self<"u"?self:typeof window<"u"?window:{});var Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gE,Go,yE,xc,Mf,vE,_E,wE;(function(){var t,e=Object.defineProperty;function r(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kl=="object"&&Kl];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var n=r(this);function s(c,f){if(f)e:{var g=n;c=c.split(".");for(var x=0;x<c.length-1;x++){var j=c[x];if(!(j in g))break e;g=g[j]}c=c[c.length-1],x=g[c],f=f(x),f!=x&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}s("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(c){return c||function(f){var g=[],x;for(x in f)Object.prototype.hasOwnProperty.call(f,x)&&g.push([x,f[x]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function l(c,f,g){return c.call.apply(c.bind,arguments)}function h(c,f,g){return h=l,h.apply(null,arguments)}function d(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var x=g.slice();return x.push.apply(x,arguments),c.apply(this,x)}}function p(c,f){function g(){}g.prototype=f.prototype,c.Z=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Ob=function(x,j,L){for(var F=Array(arguments.length-2),re=2;re<arguments.length;re++)F[re-2]=arguments[re];return f.prototype[j].apply(x,F)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function y(c){const f=c.length;if(f>0){const g=Array(f);for(let x=0;x<f;x++)g[x]=c[x];return g}return[]}function _(c,f){for(let x=1;x<arguments.length;x++){const j=arguments[x];var g=typeof j;if(g=g!="object"?g:j?Array.isArray(j)?"array":g:"null",g=="array"||g=="object"&&typeof j.length=="number"){g=c.length||0;const L=j.length||0;c.length=g+L;for(let F=0;F<L;F++)c[g+F]=j[F]}else c.push(j)}}class b{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function I(c){o.setTimeout(()=>{throw c},0)}function w(){var c=S;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class v{constructor(){this.h=this.g=null}add(f,g){const x=E.get();x.set(f,g),this.h?this.h.next=x:this.g=x,this.h=x}}var E=new b(()=>new R,c=>c.reset());class R{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let D,V=!1,S=new v,T=()=>{const c=Promise.resolve(void 0);D=()=>{c.then(k)}};function k(){for(var c;c=w();){try{c.h.call(c.g)}catch(g){I(g)}var f=E;f.j(c),f.h<100&&(f.h++,c.next=f.g,f.g=c)}V=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return c}();function A(c){return/^[\s\xa0]*$/.test(c)}function Pe(c,f){C.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,f)}p(Pe,C),Pe.prototype.init=function(c,f){const g=this.type=c.type,x=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget,f||(g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement)),this.relatedTarget=f,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Pe.Z.h.call(this)},Pe.prototype.h=function(){Pe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var zt="closure_listenable_"+(Math.random()*1e6|0),gr=0;function en(c,f,g,x,j){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!x,this.ha=j,this.key=++gr,this.da=this.fa=!1}function B(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function G(c,f,g){for(const x in c)f.call(g,c[x],x,c)}function ee(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function le(c){const f={};for(const g in c)f[g]=c[g];return f}const Ve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function os(c,f){let g,x;for(let j=1;j<arguments.length;j++){x=arguments[j];for(g in x)c[g]=x[g];for(let L=0;L<Ve.length;L++)g=Ve[L],Object.prototype.hasOwnProperty.call(x,g)&&(c[g]=x[g])}}function qt(c){this.src=c,this.g={},this.h=0}qt.prototype.add=function(c,f,g,x,j){const L=c.toString();c=this.g[L],c||(c=this.g[L]=[],this.h++);const F=er(c,f,x,j);return F>-1?(f=c[F],g||(f.fa=!1)):(f=new en(f,this.src,L,!!x,j),f.fa=g,c.push(f)),f};function as(c,f){const g=f.type;if(g in c.g){var x=c.g[g],j=Array.prototype.indexOf.call(x,f,void 0),L;(L=j>=0)&&Array.prototype.splice.call(x,j,1),L&&(B(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function er(c,f,g,x){for(let j=0;j<c.length;++j){const L=c[j];if(!L.da&&L.listener==f&&L.capture==!!g&&L.ha==x)return j}return-1}var tn="closure_lm_"+(Math.random()*1e6|0),dh={};function wg(c,f,g,x,j){if(Array.isArray(f)){for(let L=0;L<f.length;L++)wg(c,f[L],g,x,j);return null}return g=Eg(g),c&&c[zt]?c.J(f,g,a(x)?!!x.capture:!1,j):xT(c,f,g,!1,x,j)}function xT(c,f,g,x,j,L){if(!f)throw Error("Invalid event type");const F=a(j)?!!j.capture:!!j;let re=ph(c);if(re||(c[tn]=re=new qt(c)),g=re.add(f,g,x,F,L),g.proxy)return g;if(x=bT(),g.proxy=x,x.src=c,x.listener=g,c.addEventListener)P||(j=F),j===void 0&&(j=!1),c.addEventListener(f.toString(),x,j);else if(c.attachEvent)c.attachEvent(bg(f.toString()),x);else if(c.addListener&&c.removeListener)c.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return g}function bT(){function c(g){return f.call(c.src,c.listener,g)}const f=ET;return c}function xg(c,f,g,x,j){if(Array.isArray(f))for(var L=0;L<f.length;L++)xg(c,f[L],g,x,j);else x=a(x)?!!x.capture:!!x,g=Eg(g),c&&c[zt]?(c=c.i,L=String(f).toString(),L in c.g&&(f=c.g[L],g=er(f,g,x,j),g>-1&&(B(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete c.g[L],c.h--)))):c&&(c=ph(c))&&(f=c.g[f.toString()],c=-1,f&&(c=er(f,g,x,j)),(g=c>-1?f[c]:null)&&fh(g))}function fh(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[zt])as(f.i,c);else{var g=c.type,x=c.proxy;f.removeEventListener?f.removeEventListener(g,x,c.capture):f.detachEvent?f.detachEvent(bg(g),x):f.addListener&&f.removeListener&&f.removeListener(x),(g=ph(f))?(as(g,c),g.h==0&&(g.src=null,f[tn]=null)):B(c)}}}function bg(c){return c in dh?dh[c]:dh[c]="on"+c}function ET(c,f){if(c.da)c=!0;else{f=new Pe(f,this);const g=c.listener,x=c.ha||c.src;c.fa&&fh(c),c=g.call(x,f)}return c}function ph(c){return c=c[tn],c instanceof qt?c:null}var mh="__closure_events_fn_"+(Math.random()*1e9>>>0);function Eg(c){return typeof c=="function"?c:(c[mh]||(c[mh]=function(f){return c.handleEvent(f)}),c[mh])}function ut(){N.call(this),this.i=new qt(this),this.M=this,this.G=null}p(ut,N),ut.prototype[zt]=!0,ut.prototype.removeEventListener=function(c,f,g,x){xg(this,c,f,g,x)};function wt(c,f){var g,x=c.G;if(x)for(g=[];x;x=x.G)g.push(x);if(c=c.M,x=f.type||f,typeof f=="string")f=new C(f,c);else if(f instanceof C)f.target=f.target||c;else{var j=f;f=new C(x,c),os(f,j)}j=!0;let L,F;if(g)for(F=g.length-1;F>=0;F--)L=f.g=g[F],j=yl(L,x,!0,f)&&j;if(L=f.g=c,j=yl(L,x,!0,f)&&j,j=yl(L,x,!1,f)&&j,g)for(F=0;F<g.length;F++)L=f.g=g[F],j=yl(L,x,!1,f)&&j}ut.prototype.N=function(){if(ut.Z.N.call(this),this.i){var c=this.i;for(const f in c.g){const g=c.g[f];for(let x=0;x<g.length;x++)B(g[x]);delete c.g[f],c.h--}}this.G=null},ut.prototype.J=function(c,f,g,x){return this.i.add(String(c),f,!1,g,x)},ut.prototype.K=function(c,f,g,x){return this.i.add(String(c),f,!0,g,x)};function yl(c,f,g,x){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();let j=!0;for(let L=0;L<f.length;++L){const F=f[L];if(F&&!F.da&&F.capture==g){const re=F.listener,Ke=F.ha||F.src;F.fa&&as(c.i,F),j=re.call(Ke,x)!==!1&&j}}return j&&!x.defaultPrevented}function TT(c,f){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=h(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(c,f||0)}function Tg(c){c.g=TT(()=>{c.g=null,c.i&&(c.i=!1,Tg(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class ST extends N{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Tg(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mo(c){N.call(this),this.h=c,this.g={}}p(mo,N);var Sg=[];function kg(c){G(c.g,function(f,g){this.g.hasOwnProperty(g)&&fh(f)},c),c.g={}}mo.prototype.N=function(){mo.Z.N.call(this),kg(this)},mo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gh=o.JSON.stringify,kT=o.JSON.parse,IT=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function Ig(){}function Ag(){}var go={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function yh(){C.call(this,"d")}p(yh,C);function vh(){C.call(this,"c")}p(vh,C);var ls={},Ng=null;function vl(){return Ng=Ng||new ut}ls.Ia="serverreachability";function Cg(c){C.call(this,ls.Ia,c)}p(Cg,C);function yo(c){const f=vl();wt(f,new Cg(f))}ls.STAT_EVENT="statevent";function Rg(c,f){C.call(this,ls.STAT_EVENT,c),this.stat=f}p(Rg,C);function xt(c){const f=vl();wt(f,new Rg(f,c))}ls.Ja="timingevent";function Pg(c,f){C.call(this,ls.Ja,c),this.size=f}p(Pg,C);function vo(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},f)}function _o(){this.g=!0}_o.prototype.ua=function(){this.g=!1};function AT(c,f,g,x,j,L){c.info(function(){if(c.g)if(L){var F="",re=L.split("&");for(let ge=0;ge<re.length;ge++){var Ke=re[ge].split("=");if(Ke.length>1){const Ze=Ke[0];Ke=Ke[1];const vr=Ze.split("_");F=vr.length>=2&&vr[1]=="type"?F+(Ze+"="+Ke+"&"):F+(Ze+"=redacted&")}}}else F=null;else F=L;return"XMLHTTP REQ ("+x+") [attempt "+j+"]: "+f+`
`+g+`
`+F})}function NT(c,f,g,x,j,L,F){c.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+j+"]: "+f+`
`+g+`
`+L+" "+F})}function qs(c,f,g,x){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+RT(c,g)+(x?" "+x:"")})}function CT(c,f){c.info(function(){return"TIMEOUT: "+f})}_o.prototype.info=function(){};function RT(c,f){if(!c.g)return f;if(!f)return null;try{const L=JSON.parse(f);if(L){for(c=0;c<L.length;c++)if(Array.isArray(L[c])){var g=L[c];if(!(g.length<2)){var x=g[1];if(Array.isArray(x)&&!(x.length<1)){var j=x[0];if(j!="noop"&&j!="stop"&&j!="close")for(let F=1;F<x.length;F++)x[F]=""}}}}return gh(L)}catch{return f}}var _l={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},jg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Og;function _h(){}p(_h,Ig),_h.prototype.g=function(){return new XMLHttpRequest},Og=new _h;function wo(c){return encodeURIComponent(String(c))}function PT(c){var f=1;c=c.split(":");const g=[];for(;f>0&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function rn(c,f,g,x){this.j=c,this.i=f,this.l=g,this.S=x||1,this.V=new mo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Dg}function Dg(){this.i=null,this.g="",this.h=!1}var Lg={},wh={};function xh(c,f,g){c.M=1,c.A=xl(yr(f)),c.u=g,c.R=!0,Vg(c,null)}function Vg(c,f){c.F=Date.now(),wl(c),c.B=yr(c.A);var g=c.B,x=c.S;Array.isArray(x)||(x=[String(x)]),Jg(g.i,"t",x),c.C=0,g=c.j.L,c.h=new Dg,c.g=py(c.j,g?f:null,!c.u),c.P>0&&(c.O=new ST(h(c.Y,c,c.g),c.P)),f=c.V,g=c.g,x=c.ba;var j="readystatechange";Array.isArray(j)||(j&&(Sg[0]=j.toString()),j=Sg);for(let L=0;L<j.length;L++){const F=wg(g,j[L],x||f.handleEvent,!1,f.h||f);if(!F)break;f.g[F.key]=F}f=c.J?le(c.J):{},c.u?(c.v||(c.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,f)):(c.v="GET",c.g.ea(c.B,c.v,null,f)),yo(),AT(c.i,c.v,c.B,c.l,c.S,c.u)}rn.prototype.ba=function(c){c=c.target;const f=this.O;f&&on(c)==3?f.j():this.Y(c)},rn.prototype.Y=function(c){try{if(c==this.g)e:{const re=on(this.g),Ke=this.g.ya(),ge=this.g.ca();if(!(re<3)&&(re!=3||this.g&&(this.h.h||this.g.la()||ny(this.g)))){this.K||re!=4||Ke==7||(Ke==8||ge<=0?yo(3):yo(2)),bh(this);var f=this.g.ca();this.X=f;var g=jT(this);if(this.o=f==200,NT(this.i,this.v,this.B,this.l,this.S,re,f),this.o){if(this.U&&!this.L){t:{if(this.g){var x,j=this.g;if((x=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(x)){var L=x;break t}}L=null}if(c=L)qs(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Eh(this,c);else{this.o=!1,this.m=3,xt(12),cs(this),xo(this);break e}}if(this.R){c=!0;let Ze;for(;!this.K&&this.C<g.length;)if(Ze=OT(this,g),Ze==wh){re==4&&(this.m=4,xt(14),c=!1),qs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ze==Lg){this.m=4,xt(15),qs(this.i,this.l,g,"[Invalid Chunk]"),c=!1;break}else qs(this.i,this.l,Ze,null),Eh(this,Ze);if(Mg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),re!=4||g.length!=0||this.h.h||(this.m=1,xt(16),c=!1),this.o=this.o&&c,!c)qs(this.i,this.l,g,"[Invalid Chunked Response]"),cs(this),xo(this);else if(g.length>0&&!this.W){this.W=!0;var F=this.j;F.g==this&&F.aa&&!F.P&&(F.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Rh(F),F.P=!0,xt(11))}}else qs(this.i,this.l,g,null),Eh(this,g);re==4&&cs(this),this.o&&!this.K&&(re==4?uy(this.j,this):(this.o=!1,wl(this)))}else GT(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),cs(this),xo(this)}}}catch{}finally{}};function jT(c){if(!Mg(c))return c.g.la();const f=ny(c.g);if(f==="")return"";let g="";const x=f.length,j=on(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return cs(c),xo(c),"";c.h.i=new o.TextDecoder}for(let L=0;L<x;L++)c.h.h=!0,g+=c.h.i.decode(f[L],{stream:!(j&&L==x-1)});return f.length=0,c.h.g+=g,c.C=0,c.h.g}function Mg(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function OT(c,f){var g=c.C,x=f.indexOf(`
`,g);return x==-1?wh:(g=Number(f.substring(g,x)),isNaN(g)?Lg:(x+=1,x+g>f.length?wh:(f=f.slice(x,x+g),c.C=x+g,f)))}rn.prototype.cancel=function(){this.K=!0,cs(this)};function wl(c){c.T=Date.now()+c.H,Ug(c,c.H)}function Ug(c,f){if(c.D!=null)throw Error("WatchDog timer not null");c.D=vo(h(c.aa,c),f)}function bh(c){c.D&&(o.clearTimeout(c.D),c.D=null)}rn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(CT(this.i,this.B),this.M!=2&&(yo(),xt(17)),cs(this),this.m=2,xo(this)):Ug(this,this.T-c)};function xo(c){c.j.I==0||c.K||uy(c.j,c)}function cs(c){bh(c);var f=c.O;f&&typeof f.dispose=="function"&&f.dispose(),c.O=null,kg(c.V),c.g&&(f=c.g,c.g=null,f.abort(),f.dispose())}function Eh(c,f){try{var g=c.j;if(g.I!=0&&(g.g==c||Th(g.h,c))){if(!c.L&&Th(g.h,c)&&g.I==3){try{var x=g.Ba.g.parse(f)}catch{x=null}if(Array.isArray(x)&&x.length==3){var j=x;if(j[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<c.F)kl(g),Tl(g);else break e;Ch(g),xt(18)}}else g.xa=j[1],0<g.xa-g.K&&j[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=vo(h(g.Va,g),6e3));Bg(g.h)<=1&&g.ta&&(g.ta=void 0)}else hs(g,11)}else if((c.L||g.g==c)&&kl(g),!A(f))for(j=g.Ba.g.parse(f),f=0;f<j.length;f++){let ge=j[f];const Ze=ge[0];if(!(Ze<=g.K))if(g.K=Ze,ge=ge[1],g.I==2)if(ge[0]=="c"){g.M=ge[1],g.ba=ge[2];const vr=ge[3];vr!=null&&(g.ka=vr,g.j.info("VER="+g.ka));const ds=ge[4];ds!=null&&(g.za=ds,g.j.info("SVER="+g.za));const an=ge[5];an!=null&&typeof an=="number"&&an>0&&(x=1.5*an,g.O=x,g.j.info("backChannelRequestTimeoutMs_="+x)),x=g;const ln=c.g;if(ln){const Al=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Al){var L=x.h;L.g||Al.indexOf("spdy")==-1&&Al.indexOf("quic")==-1&&Al.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Sh(L,L.h),L.h=null))}if(x.G){const Ph=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Ph&&(x.wa=Ph,we(x.J,x.G,Ph))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-c.F,g.j.info("Handshake RTT: "+g.T+"ms")),x=g;var F=c;if(x.na=fy(x,x.L?x.ba:null,x.W),F.L){zg(x.h,F);var re=F,Ke=x.O;Ke&&(re.H=Ke),re.D&&(bh(re),wl(re)),x.g=F}else ly(x);g.i.length>0&&Sl(g)}else ge[0]!="stop"&&ge[0]!="close"||hs(g,7);else g.I==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?hs(g,7):Nh(g):ge[0]!="noop"&&g.l&&g.l.qa(ge),g.A=0)}}yo(4)}catch{}}var DT=class{constructor(c,f){this.g=c,this.map=f}};function $g(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Fg(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Bg(c){return c.h?1:c.g?c.g.size:0}function Th(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Sh(c,f){c.g?c.g.add(f):c.h=f}function zg(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}$g.prototype.cancel=function(){if(this.i=qg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function qg(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.G);return f}return y(c.i)}var Wg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function LT(c,f){if(c){c=c.split("&");for(let g=0;g<c.length;g++){const x=c[g].indexOf("=");let j,L=null;x>=0?(j=c[g].substring(0,x),L=c[g].substring(x+1)):j=c[g],f(j,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function nn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;c instanceof nn?(this.l=c.l,bo(this,c.j),this.o=c.o,this.g=c.g,Eo(this,c.u),this.h=c.h,kh(this,Yg(c.i)),this.m=c.m):c&&(f=String(c).match(Wg))?(this.l=!1,bo(this,f[1]||"",!0),this.o=To(f[2]||""),this.g=To(f[3]||"",!0),Eo(this,f[4]),this.h=To(f[5]||"",!0),kh(this,f[6]||"",!0),this.m=To(f[7]||"")):(this.l=!1,this.i=new ko(null,this.l))}nn.prototype.toString=function(){const c=[];var f=this.j;f&&c.push(So(f,Hg,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(So(f,Hg,!0),"@"),c.push(wo(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&c.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(So(g,g.charAt(0)=="/"?UT:MT,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",So(g,FT)),c.join("")},nn.prototype.resolve=function(c){const f=yr(this);let g=!!c.j;g?bo(f,c.j):g=!!c.o,g?f.o=c.o:g=!!c.g,g?f.g=c.g:g=c.u!=null;var x=c.h;if(g)Eo(f,c.u);else if(g=!!c.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var j=f.h.lastIndexOf("/");j!=-1&&(x=f.h.slice(0,j+1)+x)}if(j=x,j==".."||j==".")x="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){x=j.lastIndexOf("/",0)==0,j=j.split("/");const L=[];for(let F=0;F<j.length;){const re=j[F++];re=="."?x&&F==j.length&&L.push(""):re==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),x&&F==j.length&&L.push("")):(L.push(re),x=!0)}x=L.join("/")}else x=j}return g?f.h=x:g=c.i.toString()!=="",g?kh(f,Yg(c.i)):g=!!c.m,g&&(f.m=c.m),f};function yr(c){return new nn(c)}function bo(c,f,g){c.j=g?To(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Eo(c,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);c.u=f}else c.u=null}function kh(c,f,g){f instanceof ko?(c.i=f,BT(c.i,c.l)):(g||(f=So(f,$T)),c.i=new ko(f,c.l))}function we(c,f,g){c.i.set(f,g)}function xl(c){return we(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function To(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function So(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,VT),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function VT(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Hg=/[#\/\?@]/g,MT=/[#\?:]/g,UT=/[#\?]/g,$T=/[#\?@]/g,FT=/#/g;function ko(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function us(c){c.g||(c.g=new Map,c.h=0,c.i&&LT(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=ko.prototype,t.add=function(c,f){us(this),this.i=null,c=Ws(this,c);let g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function Kg(c,f){us(c),f=Ws(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function Gg(c,f){return us(c),f=Ws(c,f),c.g.has(f)}t.forEach=function(c,f){us(this),this.g.forEach(function(g,x){g.forEach(function(j){c.call(f,j,x,this)},this)},this)};function Qg(c,f){us(c);let g=[];if(typeof f=="string")Gg(c,f)&&(g=g.concat(c.g.get(Ws(c,f))));else for(c=Array.from(c.g.values()),f=0;f<c.length;f++)g=g.concat(c[f]);return g}t.set=function(c,f){return us(this),this.i=null,c=Ws(this,c),Gg(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=Qg(this,c),c.length>0?String(c[0]):f):f};function Jg(c,f,g){Kg(c,f),g.length>0&&(c.i=null,c.g.set(Ws(c,f),y(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(let x=0;x<f.length;x++){var g=f[x];const j=wo(g);g=Qg(this,g);for(let L=0;L<g.length;L++){let F=j;g[L]!==""&&(F+="="+wo(g[L])),c.push(F)}}return this.i=c.join("&")};function Yg(c){const f=new ko;return f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),f}function Ws(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function BT(c,f){f&&!c.j&&(us(c),c.i=null,c.g.forEach(function(g,x){const j=x.toLowerCase();x!=j&&(Kg(this,x),Jg(this,j,g))},c)),c.j=f}function zT(c,f){const g=new _o;if(o.Image){const x=new Image;x.onload=d(sn,g,"TestLoadImage: loaded",!0,f,x),x.onerror=d(sn,g,"TestLoadImage: error",!1,f,x),x.onabort=d(sn,g,"TestLoadImage: abort",!1,f,x),x.ontimeout=d(sn,g,"TestLoadImage: timeout",!1,f,x),o.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=c}else f(!1)}function qT(c,f){const g=new _o,x=new AbortController,j=setTimeout(()=>{x.abort(),sn(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:x.signal}).then(L=>{clearTimeout(j),L.ok?sn(g,"TestPingServer: ok",!0,f):sn(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(j),sn(g,"TestPingServer: error",!1,f)})}function sn(c,f,g,x,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),x(g)}catch{}}function WT(){this.g=new IT}function Ih(c){this.i=c.Sb||null,this.h=c.ab||!1}p(Ih,Ig),Ih.prototype.g=function(){return new bl(this.i,this.h)};function bl(c,f){ut.call(this),this.H=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(bl,ut),t=bl.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=f,this.readyState=1,Ao(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(f.body=c),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Io(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ao(this)),this.g&&(this.readyState=3,Ao(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Xg(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Xg(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Io(this):Ao(this),this.readyState==3&&Xg(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Io(this))},t.Na=function(c){this.g&&(this.response=c,Io(this))},t.ga=function(){this.g&&Io(this)};function Io(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Ao(c)}t.setRequestHeader=function(c,f){this.A.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function Ao(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(bl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Zg(c){let f="";return G(c,function(g,x){f+=x,f+=":",f+=g,f+=`\r
`}),f}function Ah(c,f,g){e:{for(x in g){var x=!1;break e}x=!0}x||(g=Zg(g),typeof c=="string"?g!=null&&wo(g):we(c,f,g))}function je(c){ut.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(je,ut);var HT=/^https?$/i,KT=["POST","PUT"];t=je.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,f,g,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Og.g(),this.g.onreadystatechange=m(h(this.Ca,this));try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(L){ey(this,L);return}if(c=g||"",g=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var j in x)g.set(j,x[j]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const L of x.keys())g.set(L,x.get(L));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),j=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(KT,f,void 0)>=0)||x||j||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,F]of g)this.g.setRequestHeader(L,F);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(L){ey(this,L)}};function ey(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.o=5,ty(c),El(c)}function ty(c){c.A||(c.A=!0,wt(c,"complete"),wt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,wt(this,"complete"),wt(this,"abort"),El(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),El(this,!0)),je.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ry(this):this.Xa())},t.Xa=function(){ry(this)};function ry(c){if(c.h&&typeof i<"u"){if(c.v&&on(c)==4)setTimeout(c.Ca.bind(c),0);else if(wt(c,"readystatechange"),on(c)==4){c.h=!1;try{const L=c.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var x;if(x=L===0){let F=String(c.D).match(Wg)[1]||null;!F&&o.self&&o.self.location&&(F=o.self.location.protocol.slice(0,-1)),x=!HT.test(F?F.toLowerCase():"")}g=x}if(g)wt(c,"complete"),wt(c,"success");else{c.o=6;try{var j=on(c)>2?c.g.statusText:""}catch{j=""}c.l=j+" ["+c.ca()+"]",ty(c)}}finally{El(c)}}}}function El(c,f){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const g=c.g;c.g=null,f||wt(c,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function on(c){return c.g?c.g.readyState:0}t.ca=function(){try{return on(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),kT(f)}};function ny(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function GT(c){const f={};c=(c.g&&on(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<c.length;x++){if(A(c[x]))continue;var g=PT(c[x]);const j=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const L=f[j]||[];f[j]=L,L.push(g)}ee(f,function(x){return x.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function No(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function sy(c){this.za=0,this.i=[],this.j=new _o,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=No("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=No("baseRetryDelayMs",5e3,c),this.Za=No("retryDelaySeedMs",1e4,c),this.Ta=No("forwardChannelMaxRetries",2,c),this.va=No("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new $g(c&&c.concurrentRequestLimit),this.Ba=new WT,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=sy.prototype,t.ka=8,t.I=1,t.connect=function(c,f,g,x){xt(0),this.W=c,this.H=f||{},g&&x!==void 0&&(this.H.OSID=g,this.H.OAID=x),this.F=this.X,this.J=fy(this,null,this.W),Sl(this)};function Nh(c){if(iy(c),c.I==3){var f=c.V++,g=yr(c.J);if(we(g,"SID",c.M),we(g,"RID",f),we(g,"TYPE","terminate"),Co(c,g),f=new rn(c,c.j,f),f.M=2,f.A=xl(yr(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.A,g=!0),g||(f.g=py(f.j,null),f.g.ea(f.A)),f.F=Date.now(),wl(f)}dy(c)}function Tl(c){c.g&&(Rh(c),c.g.cancel(),c.g=null)}function iy(c){Tl(c),c.v&&(o.clearTimeout(c.v),c.v=null),kl(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function Sl(c){if(!Fg(c.h)&&!c.m){c.m=!0;var f=c.Ea;D||T(),V||(D(),V=!0),S.add(f,c),c.D=0}}function QT(c,f){return Bg(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=f.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=vo(h(c.Ea,c,f),hy(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const j=new rn(this,this.j,c);let L=this.o;if(this.U&&(L?(L=le(L),os(L,this.U)):L=this.U),this.u!==null||this.R||(j.J=L,L=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var x=this.i[g];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(f+=x,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=ay(this,j,f),g=yr(this.J),we(g,"RID",c),we(g,"CVER",22),this.G&&we(g,"X-HTTP-Session-Id",this.G),Co(this,g),L&&(this.R?f="headers="+wo(Zg(L))+"&"+f:this.u&&Ah(g,this.u,L)),Sh(this.h,j),this.Ra&&we(g,"TYPE","init"),this.S?(we(g,"$req",f),we(g,"SID","null"),j.U=!0,xh(j,g,null)):xh(j,g,f),this.I=2}}else this.I==3&&(c?oy(this,c):this.i.length==0||Fg(this.h)||oy(this))};function oy(c,f){var g;f?g=f.l:g=c.V++;const x=yr(c.J);we(x,"SID",c.M),we(x,"RID",g),we(x,"AID",c.K),Co(c,x),c.u&&c.o&&Ah(x,c.u,c.o),g=new rn(c,c.j,g,c.D+1),c.u===null&&(g.J=c.o),f&&(c.i=f.G.concat(c.i)),f=ay(c,g,1e3),g.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Sh(c.h,g),xh(g,x,f)}function Co(c,f){c.H&&G(c.H,function(g,x){we(f,x,g)}),c.l&&G({},function(g,x){we(f,x,g)})}function ay(c,f,g){g=Math.min(c.i.length,g);const x=c.l?h(c.l.Ka,c.l,c):null;e:{var j=c.i;let re=-1;for(;;){const Ke=["count="+g];re==-1?g>0?(re=j[0].g,Ke.push("ofs="+re)):re=0:Ke.push("ofs="+re);let ge=!0;for(let Ze=0;Ze<g;Ze++){var L=j[Ze].g;const vr=j[Ze].map;if(L-=re,L<0)re=Math.max(0,j[Ze].g-100),ge=!1;else try{L="req"+L+"_"||"";try{var F=vr instanceof Map?vr:Object.entries(vr);for(const[ds,an]of F){let ln=an;a(an)&&(ln=gh(an)),Ke.push(L+ds+"="+encodeURIComponent(ln))}}catch(ds){throw Ke.push(L+"type="+encodeURIComponent("_badmap")),ds}}catch{x&&x(vr)}}if(ge){F=Ke.join("&");break e}}F=void 0}return c=c.i.splice(0,g),f.G=c,F}function ly(c){if(!c.g&&!c.v){c.Y=1;var f=c.Da;D||T(),V||(D(),V=!0),S.add(f,c),c.A=0}}function Ch(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=vo(h(c.Da,c),hy(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,cy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=vo(h(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Tl(this),cy(this))};function Rh(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function cy(c){c.g=new rn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var f=yr(c.na);we(f,"RID","rpc"),we(f,"SID",c.M),we(f,"AID",c.K),we(f,"CI",c.F?"0":"1"),!c.F&&c.ia&&we(f,"TO",c.ia),we(f,"TYPE","xmlhttp"),Co(c,f),c.u&&c.o&&Ah(f,c.u,c.o),c.O&&(c.g.H=c.O);var g=c.g;c=c.ba,g.M=1,g.A=xl(yr(f)),g.u=null,g.R=!0,Vg(g,c)}t.Va=function(){this.C!=null&&(this.C=null,Tl(this),Ch(this),xt(19))};function kl(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function uy(c,f){var g=null;if(c.g==f){kl(c),Rh(c),c.g=null;var x=2}else if(Th(c.h,f))g=f.G,zg(c.h,f),x=1;else return;if(c.I!=0){if(f.o)if(x==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var j=c.D;x=vl(),wt(x,new Pg(x,g)),Sl(c)}else ly(c);else if(j=f.m,j==3||j==0&&f.X>0||!(x==1&&QT(c,f)||x==2&&Ch(c)))switch(g&&g.length>0&&(f=c.h,f.i=f.i.concat(g)),j){case 1:hs(c,5);break;case 4:hs(c,10);break;case 3:hs(c,6);break;default:hs(c,2)}}}function hy(c,f){let g=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(g*=2),g*f}function hs(c,f){if(c.j.info("Error code "+f),f==2){var g=h(c.bb,c),x=c.Ua;const j=!x;x=new nn(x||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||bo(x,"https"),xl(x),j?zT(x.toString(),g):qT(x.toString(),g)}else xt(2);c.I=0,c.l&&c.l.pa(f),dy(c),iy(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function dy(c){if(c.I=0,c.ja=[],c.l){const f=qg(c.h);(f.length!=0||c.i.length!=0)&&(_(c.ja,f),_(c.ja,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.oa()}}function fy(c,f,g){var x=g instanceof nn?yr(g):new nn(g);if(x.g!="")f&&(x.g=f+"."+x.g),Eo(x,x.u);else{var j=o.location;x=j.protocol,f=f?f+"."+j.hostname:j.hostname,j=+j.port;const L=new nn(null);x&&bo(L,x),f&&(L.g=f),j&&Eo(L,j),g&&(L.h=g),x=L}return g=c.G,f=c.wa,g&&f&&we(x,g,f),we(x,"VER",c.ka),Co(c,x),x}function py(c,f,g){if(f&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Aa&&!c.ma?new je(new Ih({ab:g})):new je(c.ma),f.Fa(c.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function my(){}t=my.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Il(){}Il.prototype.g=function(c,f){return new Pt(c,f)};function Pt(c,f){ut.call(this),this.g=new sy(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(c?c["X-WebChannel-Client-Profile"]=f.sa:c={"X-WebChannel-Client-Profile":f.sa}),this.g.U=c,(c=f&&f.Qb)&&!A(c)&&(this.g.u=c),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!A(f)&&(this.g.G=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Hs(this)}p(Pt,ut),Pt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){Nh(this.g)},Pt.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.v&&(g={},g.__data__=gh(c),c=g);f.i.push(new DT(f.Ya++,c)),f.I==3&&Sl(f)},Pt.prototype.N=function(){this.g.l=null,delete this.j,Nh(this.g),delete this.g,Pt.Z.N.call(this)};function gy(c){yh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}p(gy,yh);function yy(){vh.call(this),this.status=1}p(yy,vh);function Hs(c){this.g=c}p(Hs,my),Hs.prototype.ra=function(){wt(this.g,"a")},Hs.prototype.qa=function(c){wt(this.g,new gy(c))},Hs.prototype.pa=function(c){wt(this.g,new yy)},Hs.prototype.oa=function(){wt(this.g,"b")},Il.prototype.createWebChannel=Il.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,wE=function(){return new Il},_E=function(){return vl()},vE=ls,Mf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_l.NO_ERROR=0,_l.TIMEOUT=8,_l.HTTP_ERROR=6,xc=_l,jg.COMPLETE="complete",yE=jg,Ag.EventType=go,go.OPEN="a",go.CLOSE="b",go.ERROR="c",go.MESSAGE="d",ut.prototype.listen=ut.prototype.J,Go=Ag,je.prototype.listenOnce=je.prototype.K,je.prototype.getLastError=je.prototype.Ha,je.prototype.getLastErrorCode=je.prototype.ya,je.prototype.getStatus=je.prototype.ca,je.prototype.getResponseJson=je.prototype.La,je.prototype.getResponseText=je.prototype.la,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Fa,gE=je}).apply(typeof Kl<"u"?Kl:typeof self<"u"?self:typeof window<"u"?window:{});const yv="@firebase/firestore",vv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new xm("@firebase/firestore");function ei(){return Us.logLevel}function q(t,...e){if(Us.logLevel<=se.DEBUG){const r=e.map(Pm);Us.debug(`Firestore (${lo}): ${t}`,...r)}}function Jr(t,...e){if(Us.logLevel<=se.ERROR){const r=e.map(Pm);Us.error(`Firestore (${lo}): ${t}`,...r)}}function Hi(t,...e){if(Us.logLevel<=se.WARN){const r=e.map(Pm);Us.warn(`Firestore (${lo}): ${t}`,...r)}}function Pm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,xE(t,n,r)}function xE(t,e,r){let n=`FIRESTORE (${lo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Jr(n),new Error(n)}function Ce(t,e,r,n){let s="Unexpected state";typeof r=="string"?s=r:n=r,t||xE(e,s,n)}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Xr{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(pt.UNAUTHENTICATED))}shutdown(){}}class aP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class lP{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Ce(this.o===void 0,42304);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let i=new Fn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fn)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ce(typeof n.accessToken=="string",31837,{l:n}),new bE(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new pt(e)}}class cP{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uP{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new cP(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _v{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hP{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Er(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Ce(this.o===void 0,3512);const n=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new _v(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Ce(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new _v(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=dP(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%62))}return n}}function ae(t,e){return t<e?-1:t>e?1:0}function Uf(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const s=t.charAt(n),i=e.charAt(n);if(s!==i)return pd(s)===pd(i)?ae(s,i):pd(s)?1:-1}return ae(t.length,e.length)}const fP=55296,pP=57343;function pd(t){const e=t.charCodeAt(0);return e>=fP&&e<=pP}function Ki(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="__name__";class xr{constructor(e,r,n){r===void 0?r=0:r>e.length&&Z(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&Z(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return xr.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof xr?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=xr.compareSegments(e.get(s),r.get(s));if(i!==0)return i}return ae(e.length,r.length)}static compareSegments(e,r){const n=xr.isNumericId(e),s=xr.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?xr.extractNumericId(e).compare(xr.extractNumericId(r)):Uf(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $n.fromString(e.substring(4,e.length-2))}}class ve extends xr{construct(e,r,n){return new ve(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new z(U.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new ve(r)}static emptyPath(){return new ve([])}}const mP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends xr{construct(e,r,n){return new yt(e,r,n)}static isValidIdentifier(e){return mP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wv}static keyField(){return new yt([wv])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new z(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new z(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new z(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(n+=a,s++):(i(),s++)}if(i(),o)throw new z(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(r)}static emptyPath(){return new yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(ve.fromString(e))}static fromName(e){return new K(ve.fromString(e).popFirst(5))}static empty(){return new K(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ve.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new ve(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(t,e,r){if(!r)throw new z(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gP(t,e,r,n){if(e===!0&&n===!0)throw new z(U.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function xv(t){if(!K.isDocumentKey(t))throw new z(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bv(t){if(K.isDocumentKey(t))throw new z(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function TE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Hu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z(12329,{type:typeof t})}function Ba(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Hu(t);throw new z(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t,e){const r={typeString:t};return e&&(r.value=e),r}function hl(t,e){if(!TE(t))throw new z(U.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const s=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const o=t[n];if(s&&typeof o!==s){r=`JSON field '${n}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){r=`Expected '${n}' field to equal '${i.value}'`;break}}if(r)throw new z(U.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=-62135596800,Tv=1e6;class Se{static now(){return Se.fromMillis(Date.now())}static fromDate(e){return Se.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*Tv);return new Se(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new z(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new z(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Ev)throw new z(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tv}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Se._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hl(e,Se._jsonSchema))return new Se(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ev;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Se._jsonSchemaVersion="firestore/timestamp/1.0",Se._jsonSchema={type:We("string",Se._jsonSchemaVersion),seconds:We("number"),nanoseconds:We("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{static fromTimestamp(e){return new X(e)}static min(){return new X(new Se(0,0))}static max(){return new X(new Se(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=-1;function yP(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(n===1e9?new Se(r+1,0):new Se(r,n));return new Hn(s,K.empty(),e)}function vP(t){return new Hn(t.readTime,t.key,za)}class Hn{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Hn(X.min(),K.empty(),za)}static max(){return new Hn(X.max(),K.empty(),za)}}function _P(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=K.comparator(t.documentKey,e.documentKey),r!==0?r:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ku(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==wP)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new M((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof M?r:M.resolve(r)}catch(r){return M.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):M.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):M.reject(r)}static resolve(e){return new M((r,n)=>{r(e)})}static reject(e){return new M((r,n)=>{n(e)})}static waitFor(e){return new M((r,n)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&r()},l=>n(l))}),o=!0,i===s&&r()})}static or(e){let r=M.resolve(!1);for(const n of e)r=r.next(s=>s?M.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new M((n,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const h=l;r(e[h]).next(d=>{o[h]=d,++a,a===i&&n(o)},d=>s(d))}})}static doWhile(e,r){return new M((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function bP(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function co(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=-1;function Qu(t){return t==null}function hu(t){return t===0&&1/t==-1/0}function TP(t){return typeof t=="number"&&Number.isInteger(t)&&!hu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="";function SP(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Sv(e)),e=kP(t.get(r),e);return Sv(e)}function kP(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case SE:r+="";break;default:r+=i}}return r}function Sv(t){return t+SE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function uo(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function kE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,r){this.comparator=e,this.root=r||ot.EMPTY}insert(e,r){return new Le(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gl(this.root,e,this.comparator,!0)}}class Gl{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ot{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??ot.RED,this.left=s??ot.EMPTY,this.right=i??ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new ot(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return ot.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}}ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,r,n,s,i){return this}insert(e,r,n){return new ot(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Iv(this.data.getIterator())}getIteratorFrom(e){return new Iv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Xe(this.comparator);return r.data=e,r}}class Iv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new kn([])}unionWith(e){let r=new Xe(yt.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new kn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ki(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new IE("Invalid base64 string: "+i):i}}(e);return new ct(r)}static fromUint8Array(e){const r=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ct(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const IP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kn(t){if(Ce(!!t,39018),typeof t=="string"){let e=0;const r=IP.exec(t);if(Ce(!!r,46558,{timestamp:t}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Gn(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="server_timestamp",NE="__type__",CE="__previous_value__",RE="__local_write_time__";function Om(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[NE])==null?void 0:n.stringValue)===AE}function Ju(t){const e=t.mapValue.fields[CE];return Om(e)?Ju(e):e}function qa(t){const e=Kn(t.mapValue.fields[RE].timestampValue);return new Se(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,r,n,s,i,o,a,l,h,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=h,this.isUsingEmulator=d}}const du="(default)";class Wa{constructor(e,r){this.projectId=e,this.database=r||du}static empty(){return new Wa("","")}get isDefaultDatabase(){return this.database===du}isEqual(e){return e instanceof Wa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="__type__",NP="__max__",Ql={mapValue:{}},jE="__vector__",fu="value";function Qn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Om(t)?4:RP(t)?9007199254740991:CP(t)?10:11:Z(28295,{value:t})}function Pr(t,e){if(t===e)return!0;const r=Qn(t);if(r!==Qn(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qa(t).isEqual(qa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Kn(s.timestampValue),a=Kn(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Gn(s.bytesValue).isEqual(Gn(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Me(s.geoPointValue.latitude)===Me(i.geoPointValue.latitude)&&Me(s.geoPointValue.longitude)===Me(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Me(s.integerValue)===Me(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Me(s.doubleValue),a=Me(i.doubleValue);return o===a?hu(o)===hu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ki(t.arrayValue.values||[],e.arrayValue.values||[],Pr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(kv(o)!==kv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Pr(o[l],a[l])))return!1;return!0}(t,e);default:return Z(52216,{left:t})}}function Ha(t,e){return(t.values||[]).find(r=>Pr(r,e))!==void 0}function Gi(t,e){if(t===e)return 0;const r=Qn(t),n=Qn(e);if(r!==n)return ae(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Me(i.integerValue||i.doubleValue),l=Me(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Av(t.timestampValue,e.timestampValue);case 4:return Av(qa(t),qa(e));case 5:return Uf(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Gn(i),l=Gn(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let h=0;h<a.length&&h<l.length;h++){const d=ae(a[h],l[h]);if(d!==0)return d}return ae(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ae(Me(i.latitude),Me(o.latitude));return a!==0?a:ae(Me(i.longitude),Me(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Nv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var m,y,_,b;const a=i.fields||{},l=o.fields||{},h=(m=a[fu])==null?void 0:m.arrayValue,d=(y=l[fu])==null?void 0:y.arrayValue,p=ae(((_=h==null?void 0:h.values)==null?void 0:_.length)||0,((b=d==null?void 0:d.values)==null?void 0:b.length)||0);return p!==0?p:Nv(h,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ql.mapValue&&o===Ql.mapValue)return 0;if(i===Ql.mapValue)return 1;if(o===Ql.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),h=o.fields||{},d=Object.keys(h);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const m=Uf(l[p],d[p]);if(m!==0)return m;const y=Gi(a[l[p]],h[d[p]]);if(y!==0)return y}return ae(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Z(23264,{he:r})}}function Av(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const r=Kn(t),n=Kn(e),s=ae(r.seconds,n.seconds);return s!==0?s:ae(r.nanos,n.nanos)}function Nv(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=Gi(r[s],n[s]);if(i)return i}return ae(r.length,n.length)}function Qi(t){return $f(t)}function $f(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Kn(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Gn(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return K.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=$f(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const o of n)i?i=!1:s+=",",s+=`${o}:${$f(r.fields[o])}`;return s+"}"}(t.mapValue):Z(61005,{value:t})}function bc(t){switch(Qn(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ju(t);return e?16+bc(e):16;case 5:return 2*t.stringValue.length;case 6:return Gn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,i)=>s+bc(i),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return uo(n.fields,(i,o)=>{s+=i.length+bc(o)}),s}(t.mapValue);default:throw Z(13486,{value:t})}}function Cv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ff(t){return!!t&&"integerValue"in t}function Dm(t){return!!t&&"arrayValue"in t}function Rv(t){return!!t&&"nullValue"in t}function Pv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function md(t){return!!t&&"mapValue"in t}function CP(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[PE])==null?void 0:n.stringValue)===jE}function fa(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return uo(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=fa(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=fa(t.arrayValue.values[r]);return e}return{...t}}function RP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===NP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.value=e}static empty(){return new Tr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!md(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=fa(r)}setAll(e){let r=yt.emptyPath(),n={},s=[];e.forEach((o,a)=>{if(!r.isImmediateParentOf(a)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=a.popLast()}o?n[a.lastSegment()]=fa(o):s.push(a.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());md(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Pr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];md(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){uo(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new Tr(fa(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,r,n,s,i,o,a){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new gt(e,0,X.min(),X.min(),X.min(),Tr.empty(),0)}static newFoundDocument(e,r,n,s){return new gt(e,1,r,X.min(),n,s,0)}static newNoDocument(e,r){return new gt(e,2,r,X.min(),X.min(),Tr.empty(),0)}static newUnknownDocument(e,r){return new gt(e,3,r,X.min(),X.min(),Tr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,r){this.position=e,this.inclusive=r}}function jv(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?n=K.comparator(K.fromName(o.referenceValue),r.key):n=Gi(o,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function Ov(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Pr(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,r="asc"){this.field=e,this.dir=r}}function PP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{}class qe extends OE{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new OP(e,r,n):r==="array-contains"?new VP(e,n):r==="in"?new MP(e,n):r==="not-in"?new UP(e,n):r==="array-contains-any"?new $P(e,n):new qe(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new DP(e,n):new LP(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Gi(r,this.value)):r!==null&&Qn(this.value)===Qn(r)&&this.matchesComparison(Gi(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mr extends OE{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new mr(e,r)}matches(e){return DE(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function DE(t){return t.op==="and"}function LE(t){return jP(t)&&DE(t)}function jP(t){for(const e of t.filters)if(e instanceof mr)return!1;return!0}function Bf(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+Qi(t.value);if(LE(t))return t.filters.map(e=>Bf(e)).join(",");{const e=t.filters.map(r=>Bf(r)).join(",");return`${t.op}(${e})`}}function VE(t,e){return t instanceof qe?function(n,s){return s instanceof qe&&n.op===s.op&&n.field.isEqual(s.field)&&Pr(n.value,s.value)}(t,e):t instanceof mr?function(n,s){return s instanceof mr&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,o,a)=>i&&VE(o,s.filters[a]),!0):!1}(t,e):void Z(19439)}function ME(t){return t instanceof qe?function(r){return`${r.field.canonicalString()} ${r.op} ${Qi(r.value)}`}(t):t instanceof mr?function(r){return r.op.toString()+" {"+r.getFilters().map(ME).join(" ,")+"}"}(t):"Filter"}class OP extends qe{constructor(e,r,n){super(e,r,n),this.key=K.fromName(n.referenceValue)}matches(e){const r=K.comparator(e.key,this.key);return this.matchesComparison(r)}}class DP extends qe{constructor(e,r){super(e,"in",r),this.keys=UE("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class LP extends qe{constructor(e,r){super(e,"not-in",r),this.keys=UE("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function UE(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>K.fromName(n.referenceValue))}class VP extends qe{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Dm(r)&&Ha(r.arrayValue,this.value)}}class MP extends qe{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Ha(this.value.arrayValue,r)}}class UP extends qe{constructor(e,r){super(e,"not-in",r)}matches(e){if(Ha(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Ha(this.value.arrayValue,r)}}class $P extends qe{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Dm(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Ha(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,r=null,n=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Dv(t,e=null,r=[],n=[],s=null,i=null,o=null){return new FP(t,e,r,n,s,i,o)}function Lm(t){const e=he(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Bf(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Qu(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Qi(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Qi(n)).join(",")),e.Te=r}return e.Te}function Vm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!PP(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!VE(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ov(t.startAt,e.startAt)&&Ov(t.endAt,e.endAt)}function zf(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,r=null,n=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function BP(t,e,r,n,s,i,o,a){return new ho(t,e,r,n,s,i,o,a)}function Mm(t){return new ho(t)}function Lv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $E(t){return t.collectionGroup!==null}function pa(t){const e=he(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Xe(yt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(a=a.add(h.field))})}),a})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ka(i,n))}),r.has(yt.keyField().canonicalString())||e.Ie.push(new Ka(yt.keyField(),n))}return e.Ie}function Nr(t){const e=he(t);return e.Ee||(e.Ee=zP(e,pa(t))),e.Ee}function zP(t,e){if(t.limitType==="F")return Dv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ka(s.field,i)});const r=t.endAt?new pu(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new pu(t.startAt.position,t.startAt.inclusive):null;return Dv(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function qf(t,e){const r=t.filters.concat([e]);return new ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function mu(t,e,r){return new ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Yu(t,e){return Vm(Nr(t),Nr(e))&&t.limitType===e.limitType}function FE(t){return`${Lm(Nr(t))}|lt:${t.limitType}`}function ti(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>ME(s)).join(", ")}]`),Qu(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Qi(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Qi(s)).join(",")),`Target(${n})`}(Nr(t))}; limitType=${t.limitType})`}function Xu(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):K.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of pa(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(o,a,l){const h=jv(o,a,l);return o.inclusive?h<=0:h<0}(n.startAt,pa(n),s)||n.endAt&&!function(o,a,l){const h=jv(o,a,l);return o.inclusive?h>=0:h>0}(n.endAt,pa(n),s))}(t,e)}function qP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BE(t){return(e,r)=>{let n=!1;for(const s of pa(t)){const i=WP(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function WP(t,e,r){const n=t.field.isKeyField()?K.comparator(e.key,r.key):function(i,o,a){const l=o.data.field(i),h=a.data.field(i);return l!==null&&h!==null?Gi(l,h):Z(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Z(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){uo(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return kE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=new Le(K.comparator);function Jn(){return HP}const zE=new Le(K.comparator);function Qo(...t){let e=zE;for(const r of t)e=e.insert(r.key,r);return e}function KP(t){let e=zE;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Ts(){return ma()}function qE(){return ma()}function ma(){return new zs(t=>t.toString(),(t,e)=>t.isEqual(e))}const eV=new Le(K.comparator),GP=new Xe(K.comparator);function de(...t){let e=GP;for(const r of t)e=e.add(r);return e}const QP=new Xe(ae);function JP(){return QP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hu(e)?"-0":e}}function WE(t){return{integerValue:""+t}}function YP(t,e){return TP(e)?WE(e):Um(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(){this._=void 0}}function XP(t,e,r){return t instanceof Wf?function(s,i){const o={fields:{[NE]:{stringValue:AE},[RE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Om(i)&&(i=Ju(i)),i&&(o.fields[CE]=i),{mapValue:o}}(r,e):t instanceof gu?HE(t,e):t instanceof yu?KE(t,e):function(s,i){const o=ej(s,i),a=Vv(o)+Vv(s.Ae);return Ff(o)&&Ff(s.Ae)?WE(a):Um(s.serializer,a)}(t,e)}function ZP(t,e,r){return t instanceof gu?HE(t,e):t instanceof yu?KE(t,e):r}function ej(t,e){return t instanceof Hf?function(n){return Ff(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Wf extends Zu{}class gu extends Zu{constructor(e){super(),this.elements=e}}function HE(t,e){const r=GE(e);for(const n of t.elements)r.some(s=>Pr(s,n))||r.push(n);return{arrayValue:{values:r}}}class yu extends Zu{constructor(e){super(),this.elements=e}}function KE(t,e){let r=GE(e);for(const n of t.elements)r=r.filter(s=>!Pr(s,n));return{arrayValue:{values:r}}}class Hf extends Zu{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function Vv(t){return Me(t.integerValue||t.doubleValue)}function GE(t){return Dm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function tj(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof gu&&s instanceof gu||n instanceof yu&&s instanceof yu?Ki(n.elements,s.elements,Pr):n instanceof Hf&&s instanceof Hf?Pr(n.Ae,s.Ae):n instanceof Wf&&s instanceof Wf}(t.transform,e.transform)}class Ns{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Ns}static exists(e){return new Ns(void 0,e)}static updateTime(e){return new Ns(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ec(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $m{}function QE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nj(t.key,Ns.none()):new Fm(t.key,t.data,Ns.none());{const r=t.data,n=Tr.empty();let s=new Xe(yt.comparator);for(let i of e.fields)if(!s.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?n.delete(i):n.set(i,o),s=s.add(i)}return new eh(t.key,n,new kn(s.toArray()),Ns.none())}}function rj(t,e,r){t instanceof Fm?function(s,i,o){const a=s.value.clone(),l=Uv(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,r):t instanceof eh?function(s,i,o){if(!Ec(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Uv(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(JE(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function ga(t,e,r,n){return t instanceof Fm?function(i,o,a,l){if(!Ec(i.precondition,o))return a;const h=i.value.clone(),d=$v(i.fieldTransforms,l,o);return h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,r,n):t instanceof eh?function(i,o,a,l){if(!Ec(i.precondition,o))return a;const h=$v(i.fieldTransforms,l,o),d=o.data;return d.setAll(JE(i)),d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,r,n):function(i,o,a){return Ec(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,r)}function Mv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Ki(n,s,(i,o)=>tj(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fm extends $m{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class eh extends $m{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function JE(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function Uv(t,e,r){const n=new Map;Ce(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let s=0;s<r.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);n.set(i.field,ZP(o,a,r[s]))}return n}function $v(t,e,r){const n=new Map;for(const s of t){const i=s.transform,o=r.data.field(s.field);n.set(s.field,XP(i,o,e))}return n}class nj extends $m{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&rj(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=ga(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=ga(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=qE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=r.has(s.key)?null:a;const l=QE(o,a);l!==null&&n.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(X.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),de())}isEqual(e){return this.batchId===e.batchId&&Ki(this.mutations,e.mutations,(r,n)=>Mv(r,n))&&Ki(this.baseMutations,e.baseMutations,(r,n)=>Mv(r,n))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,ce;function YE(t){if(t===void 0)return Jr("GRPC error has no .code"),U.UNKNOWN;switch(t){case Fe.OK:return U.OK;case Fe.CANCELLED:return U.CANCELLED;case Fe.UNKNOWN:return U.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return U.INTERNAL;case Fe.UNAVAILABLE:return U.UNAVAILABLE;case Fe.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Fe.NOT_FOUND:return U.NOT_FOUND;case Fe.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Fe.ABORTED:return U.ABORTED;case Fe.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Fe.DATA_LOSS:return U.DATA_LOSS;default:return Z(39323,{code:t})}}(ce=Fe||(Fe={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=new $n([4294967295,4294967295],0);function Fv(t){const e=aj().encode(t),r=new mE;return r.update(e),new Uint8Array(r.digest())}function Bv(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new $n([r,n],0),new $n([s,i],0)]}class Bm{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Jo(`Invalid padding: ${r}`);if(n<0)throw new Jo(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Jo(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Jo(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=$n.fromNumber(this.ge)}ye(e,r,n){let s=e.add(r.multiply($n.fromNumber(n)));return s.compare(lj)===1&&(s=new $n([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=Fv(e),[n,s]=Bv(r);for(let i=0;i<this.hashCount;i++){const o=this.ye(n,s,i);if(!this.we(o))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Bm(i,s,r);return n.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const r=Fv(e),[n,s]=Bv(r);for(let i=0;i<this.hashCount;i++){const o=this.ye(n,s,i);this.Se(o)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Jo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,dl.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new th(X.min(),s,new Le(ae),Jn(),de())}}class dl{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new dl(n,r,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,r,n,s){this.be=e,this.removedTargetIds=r,this.key=n,this.De=s}}class XE{constructor(e,r){this.targetId=e,this.Ce=r}}class ZE{constructor(e,r,n=ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class zv{constructor(){this.ve=0,this.Fe=qv(),this.Me=ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=de(),r=de(),n=de();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Z(38017,{changeType:i})}}),new dl(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=qv()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class cj{constructor(e){this.Ge=e,this.ze=new Map,this.je=Jn(),this.Je=Jl(),this.He=Jl(),this.Ye=new Le(ae)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,s)=>{this.rt(s)&&r(s)})}st(e){const r=e.targetId,n=e.Ce.count,s=this.ot(r);if(s){const i=s.target;if(zf(i))if(n===0){const o=new K(i.path);this.et(r,o,gt.newNoDocument(o,X.min()))}else Ce(n===1,20013,{expectedCount:n});else{const o=this._t(r);if(o!==n){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(r);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,h)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let o,a;try{o=Gn(n).toUint8Array()}catch(l){if(l instanceof IE)return Hi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Bm(o,s,i)}catch(l){return Hi(l instanceof Jo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(r,i,null),s++)}),s}Tt(e){const r=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&zf(a.target)){const l=new K(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,gt.newNoDocument(l,e))}i.Be&&(r.set(o,i.ke()),i.qe())}});let n=de();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const h=this.ot(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new th(e,r,this.Ye,this.je,n);return this.je=Jn(),this.Je=Jl(),this.He=Jl(),this.Ye=new Le(ae),s}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,r)?s.Qe(r,1):s.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new zv,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Xe(ae),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Xe(ae),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||q("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zv),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function Jl(){return new Le(K.comparator)}function qv(){return new Le(K.comparator)}const uj={asc:"ASCENDING",desc:"DESCENDING"},hj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dj={and:"AND",or:"OR"};class fj{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Kf(t,e){return t.useProto3Json||Qu(e)?e:{value:e}}function Gf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function e1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Pi(t){return Ce(!!t,49232),X.fromTimestamp(function(r){const n=Kn(r);return new Se(n.seconds,n.nanos)}(t))}function t1(t,e){return Qf(t,e).canonicalString()}function Qf(t,e){const r=function(s){return new ve(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function r1(t){const e=ve.fromString(t);return Ce(a1(e),10190,{key:e.toString()}),e}function gd(t,e){const r=r1(e);if(r.get(1)!==t.databaseId.projectId)throw new z(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new z(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new K(s1(r))}function n1(t,e){return t1(t.databaseId,e)}function pj(t){const e=r1(t);return e.length===4?ve.emptyPath():s1(e)}function Wv(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function s1(t){return Ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function mj(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Z(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,d){return h.useProto3Json?(Ce(d===void 0||typeof d=="string",58123),ct.fromBase64String(d||"")):(Ce(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ct.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(h){const d=h.code===void 0?U.UNKNOWN:YE(h.code);return new z(d,h.message||"")}(o);r=new ZE(n,s,i,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=gd(t,n.document.name),i=Pi(n.document.updateTime),o=n.document.createTime?Pi(n.document.createTime):X.min(),a=new Tr({mapValue:{fields:n.document.fields}}),l=gt.newFoundDocument(s,i,o,a),h=n.targetIds||[],d=n.removedTargetIds||[];r=new Tc(h,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=gd(t,n.document),i=n.readTime?Pi(n.readTime):X.min(),o=gt.newNoDocument(s,i),a=n.removedTargetIds||[];r=new Tc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=gd(t,n.document),i=n.removedTargetIds||[];r=new Tc([],i,s,null)}else{if(!("filter"in e))return Z(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,o=new oj(s,i),a=n.targetId;r=new XE(a,o)}}return r}function gj(t,e){return{documents:[n1(t,e.path)]}}function yj(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=n1(t,s);const i=function(h){if(h.length!==0)return o1(mr.create(h,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:ri(m.field),direction:wj(m.dir)}}(d))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const a=Kf(t,e.limit);return a!==null&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:r,parent:s}}function vj(t){let e=pj(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Ce(n===1,65062);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];r.where&&(i=function(p){const m=i1(p);return m instanceof mr&&LE(m)?m.getFilters():[m]}(r.where));let o=[];r.orderBy&&(o=function(p){return p.map(m=>function(_){return new Ka(ni(_.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(r.orderBy));let a=null;r.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Qu(m)?null:m}(r.limit));let l=null;r.startAt&&(l=function(p){const m=!!p.before,y=p.values||[];return new pu(y,m)}(r.startAt));let h=null;return r.endAt&&(h=function(p){const m=!p.before,y=p.values||[];return new pu(y,m)}(r.endAt)),BP(e,s,o,i,a,"F",l,h)}function _j(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function i1(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=ni(r.unaryFilter.field);return qe.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=ni(r.unaryFilter.field);return qe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ni(r.unaryFilter.field);return qe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ni(r.unaryFilter.field);return qe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(t):t.fieldFilter!==void 0?function(r){return qe.create(ni(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return mr.create(r.compositeFilter.filters.map(n=>i1(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(r.compositeFilter.op))}(t):Z(30097,{filter:t})}function wj(t){return uj[t]}function xj(t){return hj[t]}function bj(t){return dj[t]}function ri(t){return{fieldPath:t.canonicalString()}}function ni(t){return yt.fromServerFormat(t.fieldPath)}function o1(t){return t instanceof qe?function(r){if(r.op==="=="){if(Pv(r.value))return{unaryFilter:{field:ri(r.field),op:"IS_NAN"}};if(Rv(r.value))return{unaryFilter:{field:ri(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Pv(r.value))return{unaryFilter:{field:ri(r.field),op:"IS_NOT_NAN"}};if(Rv(r.value))return{unaryFilter:{field:ri(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ri(r.field),op:xj(r.op),value:r.value}}}(t):t instanceof mr?function(r){const n=r.getFilters().map(s=>o1(s));return n.length===1?n[0]:{compositeFilter:{op:bj(r.op),filters:n}}}(t):Z(54877,{filter:t})}function a1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,r,n,s,i=X.min(),o=X.min(),a=ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new In(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new In(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new In(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new In(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e){this.yt=e}}function Tj(t){const e=vj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?mu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(){this.Cn=new kj}addToCollectionParentIndex(e,r){return this.Cn.add(r),M.resolve()}getCollectionParents(e,r){return M.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return M.resolve()}deleteFieldIndex(e,r){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,r){return M.resolve()}getDocumentsMatchingTarget(e,r){return M.resolve(null)}getIndexType(e,r){return M.resolve(0)}getFieldIndexes(e,r){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,r){return M.resolve(Hn.min())}getMinOffsetFromCollectionGroup(e,r){return M.resolve(Hn.min())}updateCollectionGroup(e,r,n){return M.resolve()}updateIndexEntries(e,r){return M.resolve()}}class kj{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Xe(ve.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Xe(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},l1=41943040;class kt{static withCacheSize(e){return new kt(e,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(l1,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ji(0)}static cr(){return new Ji(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="LruGarbageCollector",Ij=1048576;function Gv([t,e],[r,n]){const s=ae(t,r);return s===0?ae(e,n):s}class Aj{constructor(e){this.Ir=e,this.buffer=new Xe(Gv),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();Gv(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Nj{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){q(Kv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){co(r)?q(Kv,"Ignoring IndexedDB error during garbage collection: ",r):await Ku(r)}await this.Vr(3e5)})}}class Cj{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return M.resolve(Gu.ce);const n=new Aj(r);return this.mr.forEachTarget(e,s=>n.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>n.Ar(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Hv)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hv):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,s,i,o,a,l,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(n=p,a=Date.now(),this.removeTargets(e,n,r))).next(p=>(i=p,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(p=>(h=Date.now(),ei()<=se.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(h-l)+`ms
Total Duration: ${h-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function Rj(t,e){return new Cj(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(){this.changes=new zs(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?M.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&ga(n.mutation,s,kn.empty(),Se.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,de()).next(()=>n))}getLocalViewOfDocuments(e,r,n=de()){const s=Ts();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let o=Qo();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=Ts();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,de()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{r.set(o,a)})})}computeViews(e,r,n,s){let i=Jn();const o=ma(),a=function(){return ma()}();return r.forEach((l,h)=>{const d=n.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof eh)?i=i.insert(h.key,h):d!==void 0?(o.set(h.key,d.mutation.getFieldMask()),ga(d.mutation,h,d.mutation.getFieldMask(),Se.now())):o.set(h.key,kn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((h,d)=>o.set(h,d)),r.forEach((h,d)=>a.set(h,new jj(d,o.get(h)??null))),a))}recalculateAndSaveOverlays(e,r){const n=ma();let s=new Le((o,a)=>o-a),i=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const a of o)a.keys().forEach(l=>{const h=r.get(l);if(h===null)return;let d=n.get(l)||kn.empty();d=a.applyToLocalView(h,d),n.set(l,d);const p=(s.get(a.batchId)||de()).add(l);s=s.insert(a.batchId,p)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),h=l.key,d=l.value,p=qE();d.forEach(m=>{if(!i.has(m)){const y=QE(r.get(m),n.get(m));y!==null&&p.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return M.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):$E(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):M.resolve(Ts());let a=za,l=i;return o.next(h=>M.forEach(h,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),i.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,l,h,de())).next(d=>({batchId:a,changes:KP(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new K(r)).next(n=>{let s=Qo();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let o=Qo();return this.indexManager.getCollectionParents(e,i).next(a=>M.forEach(a,l=>{const h=function(p,m){return new ho(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(r,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,s).next(d=>{d.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(o=>{i.forEach((l,h)=>{const d=h.getKey();o.get(d)===null&&(o=o.insert(d,gt.newInvalidDocument(d)))});let a=Qo();return o.forEach((l,h)=>{const d=i.get(l);d!==void 0&&ga(d.mutation,h,kn.empty(),Se.now()),Xu(r,h)&&(a=a.insert(l,h))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return M.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Pi(s.createTime)}}(r)),M.resolve()}getNamedQuery(e,r){return M.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(s){return{name:s.name,query:Tj(s.bundledQuery),readTime:Pi(s.readTime)}}(r)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(){this.overlays=new Le(K.comparator),this.qr=new Map}getOverlay(e,r){return M.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Ts();return M.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.St(e,r,i)}),M.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(n)),M.resolve()}getOverlaysForCollection(e,r,n){const s=Ts(),i=r.length+1,o=new K(r.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,h=l.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===i&&l.largestBatchId>n&&s.set(l.getKey(),l)}return M.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Le((h,d)=>h-d);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let d=i.get(h.largestBatchId);d===null&&(d=Ts(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const a=Ts(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,d)=>a.set(h,d)),!(a.size()>=s)););return M.resolve(a)}St(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new ij(r,n));let i=this.qr.get(r);i===void 0&&(i=de(),this.qr.set(r,i)),this.qr.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(){this.Qr=new Xe(et.$r),this.Ur=new Xe(et.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new et(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new et(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new K(new ve([])),n=new et(r,e),s=new et(r,e+1),i=[];return this.Ur.forEachInRange([n,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new K(new ve([])),n=new et(r,e),s=new et(r,e+1);let i=de();return this.Ur.forEachInRange([n,s],o=>{i=i.add(o.key)}),i}containsKey(e){const r=new et(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class et{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return K.comparator(e.key,r.key)||ae(e.Yr,r.Yr)}static Kr(e,r){return ae(e.Yr,r.Yr)||K.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Xe(et.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sj(i,r,n,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new et(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,r){return M.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.ei(n),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?EP:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new et(r,0),s=new et(r,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Xe(ae);return r.forEach(s=>{const i=new et(s,0),o=new et(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{n=n.add(a.Yr)})}),M.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;K.isDocumentKey(i)||(i=i.child(""));const o=new et(new K(i),0);let a=new Xe(ae);return this.Zr.forEachWhile(l=>{const h=l.key.path;return!!n.isPrefixOf(h)&&(h.length===s&&(a=a.add(l.Yr)),!0)},o),M.resolve(this.ti(a))}ti(e){const r=[];return e.forEach(n=>{const s=this.Xr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Ce(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return M.forEach(r.mutations,s=>{const i=new et(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new et(r,0),s=this.Zr.firstAfterOrEqual(n);return M.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.ri=e,this.docs=function(){return new Le(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,o=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return M.resolve(n?n.document.mutableCopy():gt.newInvalidDocument(r))}getEntries(e,r){let n=Jn();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():gt.newInvalidDocument(s))}),M.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=Jn();const o=r.path,a=new K(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:d}}=l.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||_P(vP(d),n)<=0||(s.has(d.key)||Xu(r,d))&&(i=i.insert(d.key,d.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,r,n,s){Z(9500)}ii(e,r){return M.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new $j(this)}getSize(e){return M.resolve(this.size)}}class $j extends Pj{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)}),M.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.persistence=e,this.si=new zs(r=>Lm(r),Vm),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.oi=0,this._i=new zm,this.targetCount=0,this.ai=Ji.ur()}forEachTarget(e,r){return this.si.forEach((n,s)=>r(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),M.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Ji(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,M.resolve()}updateTargetData(e,r){return this.Pr(r),M.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return M.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),M.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),M.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return M.resolve(n)}containsKey(e,r){return M.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,r){this.ui={},this.overlays={},this.ci=new Gu(0),this.li=!1,this.li=!0,this.hi=new Vj,this.referenceDelegate=e(this),this.Pi=new Fj(this),this.indexManager=new Sj,this.remoteDocumentCache=function(s){return new Uj(s)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new Ej(r),this.Ii=new Dj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Lj,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new Mj(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){q("MemoryPersistence","Starting transaction:",e);const s=new Bj(this.ci.next());return this.referenceDelegate.Ei(),n(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,r){return M.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class Bj extends xP{constructor(e){super(),this.currentSequenceNumber=e}}class qm{constructor(e){this.persistence=e,this.Ri=new zm,this.Vi=null}static mi(e){return new qm(e)}get fi(){if(this.Vi)return this.Vi;throw Z(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),M.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),M.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),M.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(s=>this.fi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,n=>{const s=K.fromPath(n);return this.gi(e,s).next(i=>{i||r.removeEntry(s,X.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return M.or([()=>M.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class vu{constructor(e,r){this.persistence=e,this.pi=new zs(n=>SP(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=Rj(this,r)}static mi(e,r){return new vu(e,r)}Ei(){}di(e){return M.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return M.forEach(this.pi,(n,s)=>this.br(e,n,s).next(i=>i?M.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,r).next(a=>{a||(n++,i.removeEntry(o,X.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=bc(e.data.value)),r}br(e,r,n){return M.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.pi.get(r);return M.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=s}static As(e,r){let n=de(),s=de();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Wm(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return CN()?8:bP(_t())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.ys(e,r).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,r,s,n).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new zj;return this.Ss(e,r,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,r,o,a.size)})}).next(()=>i.result)}bs(e,r,n,s){return n.documentReadCount<this.fs?(ei()<=se.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",ti(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(ei()<=se.DEBUG&&q("QueryEngine","Query:",ti(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(ei()<=se.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",ti(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nr(r))):M.resolve())}ys(e,r){if(Lv(r))return M.resolve(null);let n=Nr(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=mu(r,null,"F"),n=Nr(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const o=de(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,n).next(l=>{const h=this.Ds(r,a);return this.Cs(r,h,o,l.readTime)?this.ys(e,mu(r,null,"F")):this.vs(e,h,r,l)}))})))}ws(e,r,n,s){return Lv(r)||s.isEqual(X.min())?M.resolve(null):this.ps.getDocuments(e,n).next(i=>{const o=this.Ds(r,i);return this.Cs(r,o,n,s)?M.resolve(null):(ei()<=se.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ti(r)),this.vs(e,o,r,yP(s,za)).next(a=>a))})}Ds(e,r){let n=new Xe(BE(e));return r.forEach((s,i)=>{Xu(e,i)&&(n=n.add(i))}),n}Cs(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,r,n){return ei()<=se.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",ti(r)),this.ps.getDocumentsMatchingQuery(e,r,Hn.min(),n)}vs(e,r,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="LocalStore",Wj=3e8;class Hj{constructor(e,r,n,s){this.persistence=e,this.Fs=r,this.serializer=s,this.Ms=new Le(ae),this.xs=new zs(i=>Lm(i),Vm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Oj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function Kj(t,e,r,n){return new Hj(t,e,r,n)}async function u1(t,e){const r=he(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const o=[],a=[];let l=de();for(const h of s){o.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}for(const h of i){a.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}return r.localDocuments.getDocuments(n,l).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:a}))})})}function h1(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function Gj(t,e){const r=he(t),n=e.snapshotVersion;let s=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});s=r.Ms;const a=[];e.targetChanges.forEach((d,p)=>{const m=s.get(p);if(!m)return;a.push(r.Pi.removeMatchingKeys(i,d.removedDocuments,p).next(()=>r.Pi.addMatchingKeys(i,d.addedDocuments,p)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ct.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,n)),s=s.insert(p,y),function(b,I,w){return b.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=Wj?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,y,d)&&a.push(r.Pi.updateTargetData(i,y))});let l=Jn(),h=de();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(Qj(i,o,e.documentUpdates).next(d=>{l=d.ks,h=d.qs})),!n.isEqual(X.min())){const d=r.Pi.getLastRemoteSnapshotVersion(i).next(p=>r.Pi.setTargetsMetadata(i,i.currentSequenceNumber,n));a.push(d)}return M.waitFor(a).next(()=>o.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,l,h)).next(()=>l)}).then(i=>(r.Ms=s,i))}function Qj(t,e,r){let n=de(),s=de();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let o=Jn();return r.forEach((a,l)=>{const h=i.get(a);l.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(X.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):q(Hm,"Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",l.version)}),{ks:o,qs:s}})}function Jj(t,e){const r=he(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Pi.getTargetData(n,e).next(i=>i?(s=i,M.resolve(s)):r.Pi.allocateTargetId(n).next(o=>(s=new In(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function Jf(t,e,r){const n=he(t),s=n.Ms.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,o=>n.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!co(o))throw o;q(Hm,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function Qv(t,e,r){const n=he(t);let s=X.min(),i=de();return n.persistence.runTransaction("Execute query","readwrite",o=>function(l,h,d){const p=he(l),m=p.xs.get(d);return m!==void 0?M.resolve(p.Ms.get(m)):p.Pi.getTargetData(h,d)}(n,o,Nr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(o,e,r?s:X.min(),r?i:de())).next(a=>(Yj(n,qP(e),a),{documents:a,Qs:i})))}function Yj(t,e,r){let n=t.Os.get(e)||X.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.Os.set(e,n)}class Jv{constructor(){this.activeTargetIds=JP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xj{constructor(){this.Mo=new Jv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Jv,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="ConnectivityMonitor";class Xv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){q(Yv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){q(Yv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yl=null;function Yf(){return Yl===null?Yl=function(){return 268435456+Math.round(2147483648*Math.random())}():Yl++,"0x"+Yl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="RestConnection",eO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===du?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,r,n,s,i){const o=Yf(),a=this.zo(e,r.toUriEncodedString());q(yd,`Sending RPC '${e}' ${o}:`,a,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:h}=new URL(a),d=oo(h);return this.Jo(e,a,l,n,d).then(p=>(q(yd,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Hi(yd,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",n),p})}Ho(e,r,n,s,i,o){return this.Go(e,r,n,s,i)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,i)=>e[i]=s),n&&n.headers.forEach((s,i)=>e[i]=s)}zo(e,r){const n=eO[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft="WebChannelConnection";class nO extends tO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,s,i){const o=Yf();return new Promise((a,l)=>{const h=new gE;h.setWithCredentials(!0),h.listenOnce(yE.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case xc.NO_ERROR:const p=h.getResponseJson();q(ft,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case xc.TIMEOUT:q(ft,`RPC '${e}' ${o} timed out`),l(new z(U.DEADLINE_EXCEEDED,"Request time out"));break;case xc.HTTP_ERROR:const m=h.getStatus();if(q(ft,`RPC '${e}' ${o} failed with status:`,m,"response text:",h.getResponseText()),m>0){let y=h.getResponseJson();Array.isArray(y)&&(y=y[0]);const _=y==null?void 0:y.error;if(_&&_.status&&_.message){const b=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(v)>=0?v:U.UNKNOWN}(_.status);l(new z(b,_.message))}else l(new z(U.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new z(U.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{q(ft,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);q(ft,`RPC '${e}' ${o} sending request:`,s),h.send(r,"POST",d,n,15)})}T_(e,r,n){const s=Yf(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=wE(),a=_E(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const d=i.join("");q(ft,`Creating RPC '${e}' stream ${s}: ${d}`,l);const p=o.createWebChannel(d,l);this.I_(p);let m=!1,y=!1;const _=new rO({Yo:I=>{y?q(ft,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(m||(q(ft,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),q(ft,`RPC '${e}' stream ${s} sending:`,I),p.send(I))},Zo:()=>p.close()}),b=(I,w,v)=>{I.listen(w,E=>{try{v(E)}catch(R){setTimeout(()=>{throw R},0)}})};return b(p,Go.EventType.OPEN,()=>{y||(q(ft,`RPC '${e}' stream ${s} transport opened.`),_.o_())}),b(p,Go.EventType.CLOSE,()=>{y||(y=!0,q(ft,`RPC '${e}' stream ${s} transport closed`),_.a_(),this.E_(p))}),b(p,Go.EventType.ERROR,I=>{y||(y=!0,Hi(ft,`RPC '${e}' stream ${s} transport errored. Name:`,I.name,"Message:",I.message),_.a_(new z(U.UNAVAILABLE,"The operation could not be completed")))}),b(p,Go.EventType.MESSAGE,I=>{var w;if(!y){const v=I.data[0];Ce(!!v,16349);const E=v,R=(E==null?void 0:E.error)||((w=E[0])==null?void 0:w.error);if(R){q(ft,`RPC '${e}' stream ${s} received error:`,R);const D=R.status;let V=function(k){const N=Fe[k];if(N!==void 0)return YE(N)}(D),S=R.message;V===void 0&&(V=U.INTERNAL,S="Unknown error status: "+D+" with message "+R.message),y=!0,_.a_(new z(V,S)),p.close()}else q(ft,`RPC '${e}' stream ${s} received:`,v),_.u_(v)}}),b(a,vE.STAT_EVENT,I=>{I.stat===Mf.PROXY?q(ft,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===Mf.NOPROXY&&q(ft,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function vd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(t){return new fj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,r,n=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,r-n);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="PersistentStream";class sO{constructor(e,r,n,s,i,o,a,l){this.Mi=e,this.S_=n,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new d1(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===U.RESOURCE_EXHAUSTED?(Jr(r.toString()),Jr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.D_===r&&this.G_(n,s)},n=>{e(()=>{const s=new z(U.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{n(()=>this.z_(s))}),this.stream.onMessage(s=>{n(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return q(Zv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(q(Zv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iO extends sO{constructor(e,r,n,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=mj(this.serializer,e),n=function(i){if(!("targetChange"in i))return X.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?Pi(o.readTime):X.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=Wv(this.serializer),r.addTarget=function(i,o){let a;const l=o.target;if(a=zf(l)?{documents:gj(i,l)}:{query:yj(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=e1(i,o.resumeToken);const h=Kf(i,o.expectedCount);h!==null&&(a.expectedCount=h)}else if(o.snapshotVersion.compareTo(X.min())>0){a.readTime=Gf(i,o.snapshotVersion.toTimestamp());const h=Kf(i,o.expectedCount);h!==null&&(a.expectedCount=h)}return a}(this.serializer,e);const n=_j(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=Wv(this.serializer),r.removeTarget=e,this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{}class aO extends oO{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new z(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Qf(r,n),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new z(U.UNKNOWN,i.toString())})}Ho(e,r,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Qf(r,n),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(U.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class lO{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jr(r),this.aa=!1):q("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="RemoteStore";class cO{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{n.enqueueAndForget(async()=>{pl(this)&&(q(Yi,"Restarting streams for network reachability change."),await async function(l){const h=he(l);h.Ea.add(4),await fl(h),h.Ra.set("Unknown"),h.Ea.delete(4),await nh(h)}(this))})}),this.Ra=new lO(n,s)}}async function nh(t){if(pl(t))for(const e of t.da)await e(!0)}async function fl(t){for(const e of t.da)await e(!1)}function f1(t,e){const r=he(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),Jm(r)?Qm(r):fo(r).O_()&&Gm(r,e))}function Km(t,e){const r=he(t),n=fo(r);r.Ia.delete(e),n.O_()&&p1(r,e),r.Ia.size===0&&(n.O_()?n.L_():pl(r)&&r.Ra.set("Unknown"))}function Gm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}fo(t).Y_(e)}function p1(t,e){t.Va.Ue(e),fo(t).Z_(e)}function Qm(t){t.Va=new cj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),fo(t).start(),t.Ra.ua()}function Jm(t){return pl(t)&&!fo(t).x_()&&t.Ia.size>0}function pl(t){return he(t).Ea.size===0}function m1(t){t.Va=void 0}async function uO(t){t.Ra.set("Online")}async function hO(t){t.Ia.forEach((e,r)=>{Gm(t,e)})}async function dO(t,e){m1(t),Jm(t)?(t.Ra.ha(e),Qm(t)):t.Ra.set("Unknown")}async function fO(t,e,r){if(t.Ra.set("Online"),e instanceof ZE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(n){q(Yi,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await e_(t,n)}else if(e instanceof Tc?t.Va.Ze(e):e instanceof XE?t.Va.st(e):t.Va.tt(e),!r.isEqual(X.min()))try{const n=await h1(t.localStore);r.compareTo(n)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(h);d&&i.Ia.set(h,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,h)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(ct.EMPTY_BYTE_STRING,d.snapshotVersion)),p1(i,l);const p=new In(d.target,l,h,d.sequenceNumber);Gm(i,p)}),i.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){q(Yi,"Failed to raise snapshot:",n),await e_(t,n)}}async function e_(t,e,r){if(!co(e))throw e;t.Ea.add(1),await fl(t),t.Ra.set("Offline"),r||(r=()=>h1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(Yi,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await nh(t)})}async function t_(t,e){const r=he(t);r.asyncQueue.verifyOperationInProgress(),q(Yi,"RemoteStore received new credentials");const n=pl(r);r.Ea.add(3),await fl(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await nh(r)}async function pO(t,e){const r=he(t);e?(r.Ea.delete(2),await nh(r)):e||(r.Ea.add(2),await fl(r),r.Ra.set("Unknown"))}function fo(t){return t.ma||(t.ma=function(r,n,s){const i=he(r);return i.sa(),new iO(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:uO.bind(null,t),t_:hO.bind(null,t),r_:dO.bind(null,t),H_:fO.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Jm(t)?Qm(t):t.Ra.set("Unknown")):(await t.ma.stop(),m1(t))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Fn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const o=Date.now()+n,a=new Ym(e,r,o,s,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function g1(t,e){if(Jr("AsyncQueue",`${e}: ${t}`),co(t))return new z(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{static emptySet(e){return new ji(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||K.comparator(r.key,n.key):(r,n)=>K.comparator(r.key,n.key),this.keyedMap=Qo(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof ji)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new ji;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(){this.ga=new Le(K.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Z(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class Xi{constructor(e,r,n,s,i,o,a,l,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,s,i){const o=[];return r.forEach(a=>{o.push({type:0,doc:a})}),new Xi(e,r,ji.emptySet(r),o,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class gO{constructor(){this.queries=n_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const s=he(r),i=s.queries;s.queries=n_(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(n)})})(this,new z(U.ABORTED,"Firestore shutting down"))}}function n_(){return new zs(t=>FE(t),Yu)}async function y1(t,e){const r=he(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.ba()&&e.Da()&&(n=2):(i=new mO,n=e.Da()?0:1);try{switch(n){case 0:i.wa=await r.onListen(s,!0);break;case 1:i.wa=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const a=g1(o,`Initialization of query '${ti(e.query)}' failed`);return void e.onError(a)}r.queries.set(s,i),i.Sa.push(e),e.va(r.onlineState),i.wa&&e.Fa(i.wa)&&Xm(r)}async function v1(t,e){const r=he(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function yO(t,e){const r=he(t);let n=!1;for(const s of e){const i=s.query,o=r.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(n=!0);o.wa=s}}n&&Xm(r)}function vO(t,e,r){const n=he(t),s=n.queries.get(e);if(s)for(const i of s.Sa)i.onError(r);n.queries.delete(e)}function Xm(t){t.Ca.forEach(e=>{e.next()})}var Xf,s_;(s_=Xf||(Xf={})).Ma="default",s_.Cache="cache";class _1{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Xi(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Xi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e){this.key=e}}class x1{constructor(e){this.key=e}}class _O{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=de(),this.mutatedKeys=de(),this.eu=BE(e),this.tu=new ji(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new r_,s=r?r.tu:this.tu;let i=r?r.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,p)=>{const m=s.get(d),y=Xu(this.query,p)?p:null,_=!!m&&this.mutatedKeys.has(m.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let I=!1;m&&y?m.data.isEqual(y.data)?_!==b&&(n.track({type:3,doc:y}),I=!0):this.su(m,y)||(n.track({type:2,doc:y}),I=!0,(l&&this.eu(y,l)>0||h&&this.eu(y,h)<0)&&(a=!0)):!m&&y?(n.track({type:0,doc:y}),I=!0):m&&!y&&(n.track({type:1,doc:m}),I=!0,(l||h)&&(a=!0)),I&&(y?(o=o.add(y),i=b?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),n.track({type:1,doc:d})}return{tu:o,iu:n,Cs:a,mutatedKeys:i}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,p)=>function(y,_){const b=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Rt:I})}};return b(y)-b(_)}(d.type,p.type)||this.eu(d.doc,p.doc)),this.ou(n),s=s??!1;const a=r&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,h=l!==this.Za;return this.Za=l,o.length!==0||h?{snapshot:new Xi(this.query,e.tu,i,o,e.mutatedKeys,l===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new r_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=de(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new x1(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new w1(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=de();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Xi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zm="SyncEngine";class wO{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class xO{constructor(e){this.key=e,this.hu=!1}}class bO{constructor(e,r,n,s,i,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new zs(a=>FE(a),Yu),this.Iu=new Map,this.Eu=new Set,this.du=new Le(K.comparator),this.Au=new Map,this.Ru=new zm,this.Vu={},this.mu=new Map,this.fu=Ji.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function EO(t,e,r=!0){const n=k1(t);let s;const i=n.Tu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await b1(n,e,r,!0),s}async function TO(t,e){const r=k1(t);await b1(r,e,!0,!1)}async function b1(t,e,r,n){const s=await Jj(t.localStore,Nr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,r);let a;return n&&(a=await SO(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&f1(t.remoteStore,s),a}async function SO(t,e,r,n,s){t.pu=(p,m,y)=>async function(b,I,w,v){let E=I.view.ru(w);E.Cs&&(E=await Qv(b.localStore,I.query,!1).then(({documents:S})=>I.view.ru(S,E)));const R=v&&v.targetChanges.get(I.targetId),D=v&&v.targetMismatches.get(I.targetId)!=null,V=I.view.applyChanges(E,b.isPrimaryClient,R,D);return o_(b,I.targetId,V.au),V.snapshot}(t,p,m,y);const i=await Qv(t.localStore,e,!0),o=new _O(e,i.Qs),a=o.ru(i.documents),l=dl.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),h=o.applyChanges(a,t.isPrimaryClient,l);o_(t,r,h.au);const d=new wO(e,r,o);return t.Tu.set(e,d),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),h.snapshot}async function kO(t,e,r){const n=he(t),s=n.Tu.get(e),i=n.Iu.get(s.targetId);if(i.length>1)return n.Iu.set(s.targetId,i.filter(o=>!Yu(o,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Jf(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&Km(n.remoteStore,s.targetId),Zf(n,s.targetId)}).catch(Ku)):(Zf(n,s.targetId),await Jf(n.localStore,s.targetId,!0))}async function IO(t,e){const r=he(t),n=r.Tu.get(e),s=r.Iu.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Km(r.remoteStore,n.targetId))}async function E1(t,e){const r=he(t);try{const n=await Gj(r.localStore,e);e.targetChanges.forEach((s,i)=>{const o=r.Au.get(i);o&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ce(o.hu,14607):s.removedDocuments.size>0&&(Ce(o.hu,42227),o.hu=!1))}),await S1(r,n,e)}catch(n){await Ku(n)}}function i_(t,e,r){const n=he(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=he(o);l.onlineState=a;let h=!1;l.queries.forEach((d,p)=>{for(const m of p.Sa)m.va(a)&&(h=!0)}),h&&Xm(l)}(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function AO(t,e,r){const n=he(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Au.get(e),i=s&&s.key;if(i){let o=new Le(K.comparator);o=o.insert(i,gt.newNoDocument(i,X.min()));const a=de().add(i),l=new th(X.min(),new Map,new Le(ae),o,a);await E1(n,l),n.du=n.du.remove(i),n.Au.delete(e),eg(n)}else await Jf(n.localStore,e,!1).then(()=>Zf(n,e,r)).catch(Ku)}function Zf(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||T1(t,n)})}function T1(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(Km(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),eg(t))}function o_(t,e,r){for(const n of r)n instanceof w1?(t.Ru.addReference(n.key,e),NO(t,n)):n instanceof x1?(q(Zm,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||T1(t,n.key)):Z(19791,{wu:n})}function NO(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(q(Zm,"New document in limbo: "+r),t.Eu.add(n),eg(t))}function eg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new K(ve.fromString(e)),n=t.fu.next();t.Au.set(n,new xO(r)),t.du=t.du.insert(r,n),f1(t.remoteStore,new In(Nr(Mm(r.path)),n,"TargetPurposeLimboResolution",Gu.ce))}}async function S1(t,e,r){const n=he(t),s=[],i=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach((a,l)=>{o.push(n.pu(l,e,r).then(h=>{var d;if((h||r)&&n.isPrimaryClient){const p=h?!h.fromCache:(d=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(h){s.push(h);const p=Wm.As(l.targetId,h);i.push(p)}}))}),await Promise.all(o),n.Pu.H_(s),await async function(l,h){const d=he(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(h,m=>M.forEach(m.Es,y=>d.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>M.forEach(m.ds,y=>d.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!co(p))throw p;q(Hm,"Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const y=d.Ms.get(m),_=y.snapshotVersion,b=y.withLastLimboFreeSnapshotVersion(_);d.Ms=d.Ms.insert(m,b)}}}(n.localStore,i))}async function CO(t,e){const r=he(t);if(!r.currentUser.isEqual(e)){q(Zm,"User change. New user:",e.toKey());const n=await u1(r.localStore,e);r.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new z(U.CANCELLED,o))})}),i.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await S1(r,n.Ls)}}function RO(t,e){const r=he(t),n=r.Au.get(e);if(n&&n.hu)return de().add(n.key);{let s=de();const i=r.Iu.get(e);if(!i)return s;for(const o of i){const a=r.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function k1(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=E1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AO.bind(null,e),e.Pu.H_=yO.bind(null,e.eventManager),e.Pu.yu=vO.bind(null,e.eventManager),e}class _u{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return Kj(this.persistence,new qj,e.initialUser,this.serializer)}Cu(e){return new c1(qm.mi,this.serializer)}Du(e){return new Xj}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_u.provider={build:()=>new _u};class PO extends _u{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Ce(this.persistence.referenceDelegate instanceof vu,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Nj(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new c1(n=>vu.mi(n,r),this.serializer)}}class ep{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>i_(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=CO.bind(null,this.syncEngine),await pO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new gO}()}createDatastore(e){const r=rh(e.databaseInfo.databaseId),n=function(i){return new nO(i)}(e.databaseInfo);return function(i,o,a,l){return new aO(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,o,a){return new cO(n,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,r=>i_(this.syncEngine,r,0),function(){return Xv.v()?new Xv:new Zj}())}createSyncEngine(e,r){return function(s,i,o,a,l,h,d){const p=new bO(s,i,o,a,l,h);return d&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=he(s);q(Yi,"RemoteStore shutting down."),i.Ea.add(5),await fl(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}ep.provider={build:()=>new ep};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn="FirestoreClient";class jO{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=pt.UNAUTHENTICATED,this.clientId=jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async o=>{q(Yn,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(q(Yn,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=g1(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function _d(t,e){t.asyncQueue.verifyOperationInProgress(),q(Yn,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await u1(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function a_(t,e){t.asyncQueue.verifyOperationInProgress();const r=await OO(t);q(Yn,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>t_(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>t_(e.remoteStore,s)),t._onlineComponents=e}async function OO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(Yn,"Using user provided OfflineComponentProvider");try{await _d(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Hi("Error using user provided cache. Falling back to memory cache: "+r),await _d(t,new _u)}}else q(Yn,"Using default OfflineComponentProvider"),await _d(t,new PO(void 0));return t._offlineComponents}async function DO(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(Yn,"Using user provided OnlineComponentProvider"),await a_(t,t._uninitializedComponentsProvider._online)):(q(Yn,"Using default OnlineComponentProvider"),await a_(t,new ep))),t._onlineComponents}async function A1(t){const e=await DO(t),r=e.eventManager;return r.onListen=EO.bind(null,e.syncEngine),r.onUnlisten=kO.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=TO.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=IO.bind(null,e.syncEngine),r}function LO(t,e,r={}){const n=new Fn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,h){const d=new I1({next:m=>{d.Nu(),o.enqueueAndForget(()=>v1(i,p));const y=m.docs.has(a);!y&&m.fromCache?h.reject(new z(U.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?h.reject(new z(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new _1(Mm(a.path),d,{includeMetadataChanges:!0,qa:!0});return y1(i,p)}(await A1(t),t.asyncQueue,e,r,n)),n.promise}function VO(t,e,r={}){const n=new Fn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,h){const d=new I1({next:m=>{d.Nu(),o.enqueueAndForget(()=>v1(i,p)),m.fromCache&&l.source==="server"?h.reject(new z(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new _1(a,d,{includeMetadataChanges:!0,qa:!0});return y1(i,p)}(await A1(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="firestore.googleapis.com",c_=!0;class u_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new z(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=C1,this.ssl=c_}else this.host=e.host,this.ssl=e.ssl??c_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=l1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ij)throw new z(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=N1(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new z(U.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new z(U.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new z(U.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sh{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new oP;switch(n.type){case"firstParty":return new uP(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new z(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=l_.get(r);n&&(q("ComponentProvider","Removing Datastore"),l_.delete(r),n.terminate())}(this),Promise.resolve()}}function MO(t,e,r,n={}){var h;t=Ba(t,sh);const s=oo(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${r}`;s&&(Nb(`https://${a}`),Cb("Firestore",!0)),i.host!==C1&&i.host!==a&&Hi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:n};if(!Ls(l,o)&&(t._setSettings(l),n.mockUserToken)){let d,p;if(typeof n.mockUserToken=="string")d=n.mockUserToken,p=pt.MOCK_USER;else{d=xN(n.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new z(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new pt(m)}t._authCredentials=new aP(new bE(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ss(this.firestore,e,this._query)}}class Ye{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ye(this.firestore,e,this._key)}toJSON(){return{type:Ye._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(hl(r,Ye._jsonSchema))return new Ye(e,n||null,new K(ve.fromString(r.referencePath)))}}Ye._jsonSchemaVersion="firestore/documentReference/1.0",Ye._jsonSchema={type:We("string",Ye._jsonSchemaVersion),referencePath:We("string")};class Bn extends ss{constructor(e,r,n){super(e,r,Mm(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ye(this.firestore,null,new K(e))}withConverter(e){return new Bn(this.firestore,e,this._path)}}function tp(t,e,...r){if(t=fr(t),EE("collection","path",e),t instanceof sh){const n=ve.fromString(e,...r);return bv(n),new Bn(t,null,n)}{if(!(t instanceof Ye||t instanceof Bn))throw new z(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ve.fromString(e,...r));return bv(n),new Bn(t.firestore,null,n)}}function R1(t,e,...r){if(t=fr(t),arguments.length===1&&(e=jm.newId()),EE("doc","path",e),t instanceof sh){const n=ve.fromString(e,...r);return xv(n),new Ye(t,null,new K(n))}{if(!(t instanceof Ye||t instanceof Bn))throw new z(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ve.fromString(e,...r));return xv(n),new Ye(t.firestore,t instanceof Bn?t.converter:null,new K(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="AsyncQueue";class d_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new d1(this,"async_queue_retry"),this._c=()=>{const n=vd();n&&q(h_,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=vd();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=vd();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Fn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!co(e))throw e;q(h_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,Jr("INTERNAL UNHANDLED ERROR: ",f_(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const s=Ym.createAndSchedule(this,e,r,n,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Z(47125,{Pc:f_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function f_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class tg extends sh{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new d_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new d_(e),this._firestoreClient=void 0,await e}}}function UO(t,e){const r=typeof t=="object"?t:Ob(),n=typeof t=="string"?t:du,s=Em(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=_N("firestore");i&&MO(s,...i)}return s}function P1(t){if(t._terminated)throw new z(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$O(t),t._firestoreClient}function $O(t){var n,s,i;const e=t._freezeSettings(),r=function(a,l,h,d){return new AP(a,l,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,N1(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new jO(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gt(ct.fromBase64String(e))}catch(r){throw new z(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Gt(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hl(e,Gt._jsonSchema))return Gt.fromBase64String(e.bytes)}}Gt._jsonSchemaVersion="firestore/bytes/1.0",Gt._jsonSchema={type:We("string",Gt._jsonSchemaVersion),bytes:We("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new z(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new z(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new z(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cr._jsonSchemaVersion}}static fromJSON(e){if(hl(e,Cr._jsonSchema))return new Cr(e.latitude,e.longitude)}}Cr._jsonSchemaVersion="firestore/geoPoint/1.0",Cr._jsonSchema={type:We("string",Cr._jsonSchemaVersion),latitude:We("number"),longitude:We("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Rr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hl(e,Rr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new Rr(e.vectorValues);throw new z(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Rr._jsonSchemaVersion="firestore/vectorValue/1.0",Rr._jsonSchema={type:We("string",Rr._jsonSchemaVersion),vectorValues:We("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=/^__.*__$/;function D1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ac:t})}}class rg{constructor(e,r,n,s,i,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new rg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return rp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(D1(this.Ac)&&FO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class BO{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||rh(e)}Cc(e,r,n,s=!1){return new rg({Ac:e,methodName:r,Dc:n,path:yt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zO(t){const e=t._freezeSettings(),r=rh(t._databaseId);return new BO(t._databaseId,!!e.ignoreUndefinedProperties,r)}function qO(t,e,r,n=!1){return ng(r,t.Cc(n?4:3,e))}function ng(t,e){if(L1(t=fr(t)))return HO("Unsupported field value:",e,t),WO(t,e);if(t instanceof O1)return function(n,s){if(!D1(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const i=[];let o=0;for(const a of n){let l=ng(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=fr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return YP(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Se.fromDate(n);return{timestampValue:Gf(s.serializer,i)}}if(n instanceof Se){const i=new Se(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Gf(s.serializer,i)}}if(n instanceof Cr)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Gt)return{bytesValue:e1(s.serializer,n._byteString)};if(n instanceof Ye){const i=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:t1(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Rr)return function(o,a){return{mapValue:{fields:{[PE]:{stringValue:jE},[fu]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw a.Sc("VectorValues must only contain numeric values.");return Um(a.serializer,h)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${Hu(n)}`)}(t,e)}function WO(t,e){const r={};return kE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uo(t,(n,s)=>{const i=ng(s,e.mc(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function L1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Se||t instanceof Cr||t instanceof Gt||t instanceof Ye||t instanceof O1||t instanceof Rr)}function HO(t,e,r){if(!L1(r)||!TE(r)){const n=Hu(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}const KO=new RegExp("[~\\*/\\[\\]]");function GO(t,e,r){if(e.search(KO)>=0)throw rp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new j1(...e.split("."))._internalPath}catch{throw rp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function rp(t,e,r,n,s){const i=n&&!n.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${n}`),o&&(l+=` in document ${s}`),l+=")"),new z(U.INVALID_ARGUMENT,a+t+l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(ih("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class QO extends V1{data(){return super.data()}}function ih(t,e){return typeof e=="string"?GO(t,e):e instanceof j1?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sg{}class ig extends sg{}function Yo(t,e,...r){let n=[];e instanceof sg&&n.push(e),n=n.concat(r),function(i){const o=i.filter(l=>l instanceof og).length,a=i.filter(l=>l instanceof oh).length;if(o>1||o>0&&a>0)throw new z(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class oh extends ig{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new oh(e,r,n)}_apply(e){const r=this._parse(e);return M1(e._query,r),new ss(e.firestore,e.converter,qf(e._query,r))}_parse(e){const r=zO(e.firestore);return function(i,o,a,l,h,d,p){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new z(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){g_(p,d);const _=[];for(const b of p)_.push(m_(l,i,b));m={arrayValue:{values:_}}}else m=m_(l,i,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||g_(p,d),m=qO(a,o,p,d==="in"||d==="not-in");return qe.create(h,d,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function si(t,e,r){const n=e,s=ih("where",t);return oh._create(s,n,r)}class og extends sg{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new og(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:mr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)M1(o,l),o=qf(o,l)}(e._query,r),new ss(e.firestore,e.converter,qf(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ag extends ig{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new ag(e,r)}_apply(e){const r=function(s,i,o){if(s.startAt!==null)throw new z(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new z(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ka(i,o)}(e._query,this._field,this._direction);return new ss(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ho(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function YO(t,e="asc"){const r=e,n=ih("orderBy",t);return ag._create(n,r)}class lg extends ig{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new lg(e,r,n)}_apply(e){return new ss(e.firestore,e.converter,mu(e._query,this._limit,this._limitType))}}function p_(t){return lg._create("limit",t,"F")}function m_(t,e,r){if(typeof(r=fr(r))=="string"){if(r==="")throw new z(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$E(e)&&r.indexOf("/")!==-1)throw new z(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ve.fromString(r));if(!K.isDocumentKey(n))throw new z(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Cv(t,new K(n))}if(r instanceof Ye)return Cv(t,r._key);throw new z(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hu(r)}.`)}function g_(t,e){if(!Array.isArray(t)||t.length===0)throw new z(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function M1(t,e){const r=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new z(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class XO{convertValue(e,r="none"){switch(Qn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Gn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return uo(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var n,s,i;const r=(i=(s=(n=e.fields)==null?void 0:n[fu].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Me(o.doubleValue));return new Rr(r)}convertGeoPoint(e){return new Cr(Me(e.latitude),Me(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Ju(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(qa(e));default:return null}}convertTimestamp(e){const r=Kn(e);return new Se(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ve.fromString(e);Ce(a1(n),9688,{name:e});const s=new Wa(n.get(1),n.get(3)),i=new K(n.popFirst(5));return s.isEqual(r)||Jr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cs extends V1{constructor(e,r,n,s,i,o){super(e,r,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Sc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(ih("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Cs._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Cs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Cs._jsonSchema={type:We("string",Cs._jsonSchemaVersion),bundleSource:We("string","DocumentSnapshot"),bundleName:We("string"),bundle:We("string")};class Sc extends Cs{data(e={}){return super.data(e)}}class Oi{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Xo(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Sc(this._firestore,this._userDataWriter,n.key,n,new Xo(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new z(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Sc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Xo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Sc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Xo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return a.type!==0&&(h=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:ZO(a.type),doc:l,oldIndex:h,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(r.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ZO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t){t=Ba(t,Ye);const e=Ba(t.firestore,tg);return LO(P1(e),t._key).then(r=>e4(e,t,r))}Oi._jsonSchemaVersion="firestore/querySnapshot/1.0",Oi._jsonSchema={type:We("string",Oi._jsonSchemaVersion),bundleSource:We("string","QuerySnapshot"),bundleName:We("string"),bundle:We("string")};class $1 extends XO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gt(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ye(this.firestore,null,r)}}function Zo(t){t=Ba(t,ss);const e=Ba(t.firestore,tg),r=P1(e),n=new $1(e);return JO(t._query),VO(r,t._query).then(s=>new Oi(e,n,t,s))}function e4(t,e,r){const n=r.docs.get(e._key),s=new $1(t);return new Cs(t,s,e._key,n,new Xo(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(s){lo=s})(ao),qi(new Vs("firestore",(n,{instanceIdentifier:s,options:i})=>{const o=n.getProvider("app").getImmediate(),a=new tg(new lP(n.getProvider("auth-internal")),new hP(o,n.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new z(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wa(h.options.projectId,d)}(o,s),o);return i={useFetchStreams:r,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Un(yv,vv,e),Un(yv,vv,"esm2020")})();const is=!1;console.warn("Missing Firebase environment variables. Please check your .env file.");const t4={apiKey:"placeholder",authDomain:"placeholder.firebaseapp.com",projectId:"placeholder-project",storageBucket:"placeholder.appspot.com",messagingSenderId:"0000000000",appId:"1:0000000000:web:0000000000"},F1=jb(t4),tV=sP(F1),ya=UO(F1),B1=O.createContext(void 0);function r4({children:t}){const[e,r]=O.useState(null),[n,s]=O.useState(null),[i,o]=O.useState(!0);O.useEffect(()=>{{const p=localStorage.getItem("wedding_user");if(p){const m=JSON.parse(p);r(m),s(m)}o(!1)}},[]);const a=async p=>{{const m=await ue("/auth/login",{method:"POST",body:JSON.stringify(p)});r(m.user),s(m.user),localStorage.setItem("wedding_user",JSON.stringify(m.user));return}},l=async p=>{{const m=await ue("/auth/register",{method:"POST",body:JSON.stringify(p)});r(m.user),s(m.user),localStorage.setItem("wedding_user",JSON.stringify(m.user));return}},h=async()=>{localStorage.removeItem("wedding_user"),s(null),r(null)},d=async()=>{const p={id:"demo-user-123",uid:"demo-user-123",email:"demo@example.com",name:"Demo User",role:"vendor"};r(p),s(p),localStorage.setItem("wedding_user",JSON.stringify(p)),o(!1)};return u.jsx(B1.Provider,{value:{user:e,profile:n,loading:i,logout:h,loginAsDemoUser:d,login:a,register:l},children:!i&&t})}function Bt(){const t=O.useContext(B1);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function n4(){var p;const{id:t}=ub(),e=rs(),{user:r}=Bt(),[n,s]=O.useState(null),[i,o]=O.useState([]),[a,l]=O.useState(!0);O.useEffect(()=>{t&&h(t)},[t]);const h=async m=>{try{if(l(!0),m.startsWith("mock-")){const _=ru.find(b=>b.id===m);if(_){s(_),o([{id:"s1",name:"Platinum Collection",description:"Our most comprehensive suite involving full-day coverage and elite post-production.",price:4500,vendor_id:m},{id:"s2",name:"Signature Series",description:"The essential Bliss experience, curated for elegance and impact.",price:2800,vendor_id:m},{id:"s3",name:"Bespoke Half-Day",description:"Tailored excellence for intimate celebrations and micro-weddings.",price:1800,vendor_id:m}]),l(!1);return}}const y=await ue(`/vendors/${m}`);s(y),o([{id:"s1",name:"Platinum Collection",description:"Full comprehensive service with priority support.",price:4500,vendor_id:m},{id:"s2",name:"Signature Series",description:"Balanced service for the modern couple.",price:2800,vendor_id:m}])}catch(y){console.error("Failed to fetch details:",y)}finally{l(!1)}},d=async()=>{if(!r){e("/login");return}const m=document.getElementById("enquiry-message"),y=m==null?void 0:m.value;if(!y){alert("Please enter a brief message to start the conversation.");return}try{l(!0);const _=await ue("/enquiries",{method:"POST",body:JSON.stringify({vendorId:n==null?void 0:n.id,userId:r.uid||r.id,message:y,userName:(profile==null?void 0:profile.name)||r.displayName,userEmail:profile==null?void 0:profile.email})});e(`/negotiation/${_.id}`)}catch(_){console.error("Booking error:",_),alert("Failed to send inquiry. Please try again.")}finally{l(!1)}};return a?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n?u.jsx("div",{className:"bg-white min-h-screen pt-32 pb-24",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[u.jsxs("button",{onClick:()=>e(-1),className:"group mb-12 flex items-center text-[10px] font-black uppercase tracking-[0.3em] text-slate-400 hover:text-primary-600 transition-colors",children:[u.jsx("span",{className:"mr-2 group-hover:-translate-x-1 transition-transform",children:""})," Return to Collection"]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-20",children:[u.jsxs("div",{className:"lg:col-span-7 space-y-8",children:[u.jsx("div",{className:"relative aspect-[16/10] rounded-[3rem] overflow-hidden shadow-2xl",children:u.jsx("img",{src:((p=n.images)==null?void 0:p[0])||"https://images.unsplash.com/photo-1519741497674-611481863552?auto=format&fit=crop&q=80&w=800",alt:n.business_name,className:"w-full h-full object-cover"})}),u.jsx("div",{className:"grid grid-cols-2 gap-8 line-clamp-2",children:(n.images||[]).slice(1,3).map((m,y)=>u.jsx("div",{className:"aspect-square rounded-[2rem] overflow-hidden shadow-xl border border-slate-100",children:u.jsx("img",{src:m,className:"w-full h-full object-cover transition-transform hover:scale-110 duration-700",alt:"Work"})},y))})]}),u.jsx("div",{className:"lg:col-span-5",children:u.jsxs("div",{className:"sticky top-40 space-y-10",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[u.jsx("span",{className:"bg-primary-50 text-primary-600 px-4 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest",children:n.category}),u.jsx("span",{className:"text-slate-300 font-light",children:"|"}),u.jsxs("span",{className:"text-slate-900 font-bold text-sm tracking-tighter",children:[n.rating,"  Rating"]})]}),u.jsx("h1",{className:"text-5xl md:text-7xl font-serif font-bold text-slate-900 leading-tight mb-4",children:n.business_name}),u.jsxs("div",{className:"flex items-center text-slate-400 font-medium",children:[u.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),n.location]})]}),u.jsxs("div",{className:"p-8 rounded-[2.5rem] bg-slate-50 border border-slate-100 italic font-light text-slate-600 leading-relaxed",children:['"',n.description,'"']}),u.jsx("div",{className:"space-y-4",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-end pb-4 border-b border-slate-100",children:[u.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-400",children:"Starting From"}),u.jsx("span",{className:"text-4xl font-serif font-black text-slate-900",children:n.price_range})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("textarea",{className:"w-full bg-white border border-slate-200 rounded-2xl p-4 text-sm focus:ring-2 focus:ring-primary-600 outline-none resize-none",rows:3,placeholder:"Hi, I'm interested in your services for my wedding on...",id:"enquiry-message"}),u.jsx(pe,{onClick:d,className:"w-full h-14 rounded-full bg-slate-900 text-white font-black text-lg hover:bg-primary-600 shadow-xl transition-all",children:"Send Inquiry"})]}),u.jsx("p",{className:"text-center text-[10px] font-bold text-slate-300 uppercase tracking-widest",children:"Connect Directly with Artisan"})]})})]})}),i.length>0&&u.jsxs("div",{className:"mt-32",children:[u.jsxs("div",{className:"text-center mb-16",children:[u.jsx("h2",{className:"text-4xl font-serif font-bold text-slate-900 mb-2 italic",children:"Available Experiences"}),u.jsx("div",{className:"w-12 h-1 bg-primary-600 mx-auto"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12",children:i.map(m=>u.jsxs("div",{className:"group p-10 rounded-[3rem] bg-white border border-slate-100 hover:shadow-2xl transition-all duration-500 relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary-50 -mr-16 -mt-16 rounded-full group-hover:scale-[10] transition-transform duration-1000 opacity-20"}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-4",children:m.name}),u.jsx("p",{className:"text-slate-500 font-light text-sm mb-10 leading-relaxed",children:m.description}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-2xl font-serif font-black text-slate-900",children:["$",m.price]}),u.jsx("span",{className:"text-[10px] font-bold text-primary-600 uppercase tracking-widest cursor-pointer hover:underline",children:"Select Service "})]})]})]},m.id))})]})]})]})}):u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx("h1",{className:"text-2xl font-serif italic text-slate-400",children:"Artisan not found in our collection."})})}function s4(...t){return bb(gb(t))}const Qt=O.forwardRef(({className:t,type:e,...r},n)=>u.jsx("input",{type:e,className:s4("input",t),ref:n,...r}));Qt.displayName="Input";function z1(){const[t,e]=O.useState(!0),[r,n]=O.useState(""),[s,i]=O.useState(""),[o,a]=O.useState(""),[l,h]=O.useState("couple"),[d,p]=O.useState(!1),[m,y]=O.useState(null),{loginAsDemoUser:_,login:b,register:I}=Bt(),w=rs(),v=async()=>{try{await _(),w("/")}catch(R){console.error("Demo login failed:",R)}},E=async R=>{R.preventDefault(),p(!0),y(null);try{if(!is){t?await b({email:r,password:s}):await I({name:o,email:r,password:s,role:l});const D=JSON.parse(localStorage.getItem("wedding_user")||"{}");D.role==="admin"?w("/admin"):D.role==="vendor"?w("/vendor/dashboard"):w("/")}}catch(D){console.error(D);let V=D.message;D.code==="auth/api-key-not-valid"||D.message.includes("api-key-not-valid")?V="Invalid Firebase API Key. Please update your client/.env file.":D.code==="auth/invalid-email"?V="Invalid email address.":(D.code==="auth/user-not-found"||D.code==="auth/wrong-password")&&(V="Invalid email or password."),y(V)}finally{p(!1)}};return u.jsx("div",{className:"min-h-screen flex items-center justify-center pt-20 pb-12 px-4 sm:px-6 lg:px-8 bg-slate-50/50",children:u.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 sm:p-10 rounded-[2rem] shadow-2xl shadow-slate-200/50 border border-slate-100 animate-fade-in",children:[u.jsx("div",{children:u.jsx("h2",{className:"mt-6 text-center text-3xl font-serif font-bold text-slate-900",children:t?"Sign in to your account":"Create your account"})}),m&&u.jsxs("div",{className:"bg-red-50 border border-red-100 text-red-600 px-6 py-4 rounded-2xl relative text-sm animate-shake",role:"alert",children:[u.jsx("span",{className:"block sm:inline",children:m}),(m.includes("API Key")||m.includes("api-key-not-valid")||m.includes("unexpected"))&&u.jsx("div",{className:"mt-4",children:u.jsx(pe,{type:"button",variant:"outline",className:"w-full text-xs py-2 border-red-200 hover:bg-red-100 text-red-700 rounded-xl transition-all",onClick:()=>v(),children:"Login as Demo User (Bypass)"})})]}),u.jsxs("form",{className:"mt-8 space-y-6",onSubmit:E,children:[u.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[!t&&u.jsx("div",{className:"mb-4",children:u.jsx(Qt,{type:"text",required:!0,placeholder:"Full Name / Business Name",value:o,onChange:R=>a(R.target.value)})}),u.jsx("div",{className:"mb-4",children:u.jsx(Qt,{type:"email",required:!0,placeholder:"Email address",value:r,onChange:R=>n(R.target.value)})}),u.jsx("div",{className:"mb-4",children:u.jsx(Qt,{type:"password",required:!0,placeholder:"Password",value:s,onChange:R=>i(R.target.value)})}),!t&&u.jsx("div",{className:"mb-4",children:u.jsxs("select",{className:"input",value:l,onChange:R=>h(R.target.value),children:[u.jsx("option",{value:"couple",children:"Couple"}),u.jsx("option",{value:"vendor",children:"Vendor"})]})})]}),u.jsx("div",{children:u.jsx(pe,{type:"submit",className:"w-full",disabled:d,children:d?"Processing...":t?"Sign in":"Sign up"})})]}),u.jsx("div",{className:"text-center",children:u.jsx("button",{className:"text-sm font-medium text-primary-600 hover:text-primary-500 hover:underline",onClick:()=>{e(!t),y(null)},children:t?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})})}function i4(){return u.jsxs("div",{className:"min-h-screen bg-white",children:[u.jsxs("section",{className:"relative h-[70vh] flex items-center justify-center overflow-hidden pt-20",children:[u.jsx("img",{src:"https://images.unsplash.com/photo-1519741497674-611481863552?auto=format&fit=crop&w=2000&q=80",alt:"Wedding Planning",className:"absolute inset-0 w-full h-full object-cover z-0 brightness-[0.7]"}),u.jsxs("div",{className:"relative z-10 text-center text-white px-6 max-w-4xl",children:[u.jsx("h1",{className:"text-3xl sm:text-5xl md:text-6xl font-serif font-bold mb-6 tracking-tight animate-fade-in-up leading-tight",children:"Crafting Unforgettable Moments"}),u.jsx("p",{className:"text-base sm:text-lg md:text-xl font-light text-white/90 max-w-2xl mx-auto leading-relaxed",children:"Where luxury meets detail. We don't just plan weddings; we engineer masterpieces of love and celebration."})]})]}),u.jsx("section",{className:"py-20 sm:py-24 px-6 bg-slate-50",children:u.jsxs("div",{className:"max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-12 sm:gap-16 items-center",children:[u.jsxs("div",{className:"space-y-6 text-center md:text-left",children:[u.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-serif font-bold text-slate-900 leading-tight",children:"Our Mission"}),u.jsx("p",{className:"text-base sm:text-lg text-slate-600 leading-relaxed italic border-l-0 md:border-l-4 border-primary-500 pl-0 md:pl-6",children:'"To simplify the art of celebration through innovation, connection, and an unwavering commitment to excellence."'}),u.jsx("p",{className:"text-sm sm:text-base text-slate-600 leading-relaxed font-light",children:"Founded on the belief that every couple deserves a stress-free path to the altar, Bliss has evolved into more than a platformit's a sanctuary for creativity. We bridge the gap between imagination and reality by curating the finest vendors and providing intuitive tools for every step of the journey."})]}),u.jsxs("div",{className:"relative mt-8 md:mt-0",children:[u.jsxs("div",{className:"aspect-square rounded-2xl bg-primary-100 overflow-hidden shadow-2xl skew-y-0 md:skew-y-3 hover:skew-y-0 transition-transform duration-700 max-w-md mx-auto md:max-w-none",children:[u.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary-600/20 to-primary-900/40 absolute inset-0 z-10"}),u.jsx("img",{src:"https://images.unsplash.com/photo-1511795409834-ef04bbd61622?auto=format&fit=crop&w=1000&q=80",alt:"Detail",className:"w-full h-full object-cover grayscale-[20%]"})]}),u.jsxs("div",{className:"absolute -bottom-6 -left-6 bg-white p-6 sm:p-8 rounded-xl shadow-xl hidden lg:block",children:[u.jsx("p",{className:"text-3xl sm:text-4xl font-serif font-bold text-primary-600",children:"10k+"}),u.jsx("p",{className:"text-xs sm:text-sm text-slate-500 font-medium font-sans uppercase tracking-widest",children:"Weddings Planned"})]})]})]})}),u.jsx("section",{className:"py-12 sm:py-20 px-6",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[u.jsx("h2",{className:"text-2xl sm:text-3xl font-serif font-bold text-slate-900 mb-4 italic",children:"The Bliss Standard"}),u.jsx("div",{className:"w-16 sm:w-20 h-1 bg-primary-500 mx-auto"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 sm:gap-12",children:[{title:"Unparalleled Curation",desc:"Every vendor on our platform undergoes a rigorous 50-point verification process to ensure absolute reliability.",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"},{title:"Bespoke Technology",desc:"Our real-time negotiation suites and budget management tools are custom-built for the modern couple.",icon:"M13 10V3L4 14h7v7l9-11h-7z"},{title:"Legacy of Excellence",desc:"With over a decade of industry leadership, we understand the nuances that turn a good wedding into a legend.",icon:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12z"}].map((t,e)=>u.jsxs("div",{className:"group p-8 rounded-3xl bg-white border border-slate-100 hover:border-primary-100 hover:shadow-2xl hover:shadow-primary-100/30 transition-all duration-500",children:[u.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 rounded-2xl bg-primary-50 text-primary-600 flex items-center justify-center mb-6 group-hover:scale-110 group-hover:bg-primary-600 group-hover:text-white transition-all duration-500",children:u.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:t.icon})})}),u.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-4",children:t.title}),u.jsx("p",{className:"text-sm sm:text-base text-slate-500 leading-relaxed font-light",children:t.desc})]},e))})]})}),u.jsxs("section",{className:"bg-slate-900 py-16 sm:py-24 px-6 text-center",children:[u.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-serif font-bold text-white mb-8 italic leading-tight",children:"Ready to write your story?"}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 justify-center",children:[u.jsx("button",{className:"px-10 py-3.5 sm:px-12 sm:py-4 bg-primary-600 text-white rounded-full font-bold hover:bg-primary-700 transition-all shadow-xl shadow-primary-900/20 text-sm sm:text-base",children:"Get Started"}),u.jsx("button",{className:"px-10 py-3.5 sm:px-12 sm:py-4 bg-white/10 text-white rounded-full font-bold hover:bg-white/20 transition-all border border-white/20 backdrop-blur-md text-sm sm:text-base",children:"Our Services"})]})]})]})}function o4(){return u.jsxs("div",{className:"min-h-screen bg-white",children:[u.jsxs("section",{className:"relative h-[50vh] flex items-center justify-center pt-20",children:[u.jsx("img",{src:"/images/contact_hero.png",alt:"Contact Bliss",className:"absolute inset-0 w-full h-full object-cover z-0 brightness-[0.8] saturate-[0.8]"}),u.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[u.jsx("h1",{className:"text-4xl sm:text-5xl md:text-7xl font-serif font-bold mb-4 tracking-tight animate-fade-in-up",children:"Let's Connect"}),u.jsx("p",{className:"text-base sm:text-lg md:text-xl font-light text-slate-100 max-w-xl mx-auto leading-relaxed px-4",children:"Your dream celebration starts with a conversation. We're here to listen, advise, and inspire."})]})]}),u.jsx("section",{className:"py-20 sm:py-24 px-4",children:u.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-20",children:[u.jsxs("div",{className:"space-y-12",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-3xl font-serif font-bold text-slate-900 mb-6",children:"Reach Out to Us"}),u.jsx("p",{className:"text-slate-500 leading-relaxed text-lg",children:"Whether you're a couple looking for your dream team or a vendor wanting to join our elite circle, our team is ready to assist you."})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"p-8 rounded-2xl bg-slate-50 border border-slate-100 hover:shadow-xl transition-all duration-300",children:[u.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary-600 text-white flex items-center justify-center mb-6",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),u.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest text-slate-400 mb-2",children:"Email Address"}),u.jsx("p",{className:"text-lg font-bold text-slate-900",children:"hello@bliss.com"}),u.jsx("p",{className:"text-xs text-slate-500 mt-1 italic",children:"Expect response within 24h"})]}),u.jsxs("div",{className:"p-8 rounded-2xl bg-slate-50 border border-slate-100 hover:shadow-xl transition-all duration-300",children:[u.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary-600 text-white flex items-center justify-center mb-6",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),u.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest text-slate-400 mb-2",children:"Phone Number"}),u.jsx("p",{className:"text-lg font-bold text-slate-900",children:"+91 8688693885"}),u.jsx("p",{className:"text-xs text-slate-500 mt-1 italic",children:"Mon-Fri, 9am - 6pm IST"})]})]}),u.jsxs("div",{className:"p-8 rounded-2xl border border-slate-100 flex items-start space-x-6",children:[u.jsx("div",{className:"w-12 h-12 bg-slate-900 text-white rounded-xl flex items-center justify-center flex-shrink-0",children:u.jsxs("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Our Headquarters"}),u.jsxs("p",{className:"text-slate-500 leading-relaxed font-light",children:["Suite 405, Celebration Tower",u.jsx("br",{}),"Business Enclave, Mumbai 400001"]})]})]})]}),u.jsxs("div",{className:"bg-white p-10 rounded-3xl shadow-2xl shadow-slate-200/50 border border-slate-100",children:[u.jsx("h2",{className:"text-2xl font-serif font-bold text-slate-900 mb-8",children:"Send Us a Message"}),u.jsxs("form",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"First Name"}),u.jsx(Qt,{placeholder:"E.g. Jane"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"Last Name"}),u.jsx(Qt,{placeholder:"E.g. Doe"})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"Email Address"}),u.jsx(Qt,{type:"email",placeholder:"jane@example.com"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"Your Message"}),u.jsx("textarea",{className:"w-full rounded-xl border-slate-200 focus:border-primary-500 focus:ring-primary-500 bg-slate-50 min-h-[150px] p-4 text-slate-900 transition-all font-light",placeholder:"Tell us about your celebration..."})]}),u.jsxs(pe,{className:"w-full py-4 text-lg bg-primary-600 hover:bg-primary-700 shadow-xl shadow-primary-100 group",children:[u.jsx("span",{children:"Send Message"}),u.jsx("svg",{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]})]})]})})]})}function cg(){const t=rs();return u.jsxs("button",{onClick:()=>t(-1),className:"fixed bottom-8 left-8 z-[100] flex items-center gap-2 px-4 py-2 bg-slate-900 text-white text-xs font-bold rounded-full shadow-2xl hover:bg-primary-600 transition-all active:scale-95 group","aria-label":"Go back",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-3 h-3 transform group-hover:-translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15 19l-7-7 7-7"})}),u.jsx("span",{children:"BACK"})]})}function a4(){var o;const{profile:t,loading:e,logout:r}=Bt(),n=rs(),[s,i]=O.useState(!1);return O.useEffect(()=>{!e&&(!t||t.role!=="admin")&&n("/")},[t,e,n]),e?u.jsx("div",{className:"p-8 text-center",children:"Loading..."}):u.jsxs("div",{className:"flex h-screen bg-slate-100 relative",children:[u.jsxs("div",{className:"md:hidden fixed top-0 left-0 right-0 bg-slate-900 text-white p-4 flex items-center justify-between z-[60] shadow-md",children:[u.jsx("h1",{className:"text-xl font-bold font-serif",children:"Admin Panel"}),u.jsx("button",{onClick:()=>i(!s),className:"p-2 hover:bg-slate-800 rounded-lg transition-colors","aria-label":"Toggle menu",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]}),s&&u.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>i(!1)}),u.jsxs("div",{className:`
                fixed inset-y-0 left-0 z-50 w-64 bg-slate-900 text-white flex-shrink-0 transition-transform duration-300 ease-in-out
                md:relative md:translate-x-0
                ${s?"translate-x-0 shadow-2xl":"-translate-x-full"}
            `,children:[u.jsx("div",{className:"p-4 border-b border-slate-800 hidden md:block",children:u.jsx("h1",{className:"text-xl font-bold font-serif",children:"Admin Panel"})}),u.jsxs("div",{className:"p-4 border-b border-slate-800 md:hidden flex items-center space-x-3",children:[u.jsx("div",{className:"h-8 w-8 rounded-full bg-primary-600 flex items-center justify-center font-bold",children:((o=t==null?void 0:t.name)==null?void 0:o[0])||"A"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-sm",children:t==null?void 0:t.name}),u.jsx("p",{className:"text-xs text-slate-400",children:"Administrator"})]})]}),u.jsxs("nav",{className:"mt-4 flex-1",children:[u.jsxs(oe,{to:"/admin",onClick:()=>i(!1),className:"flex items-center px-6 py-3 text-slate-300 hover:bg-slate-800 hover:text-white transition-colors",children:[u.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Dashboard"]}),u.jsxs(oe,{to:"/admin/vendors",onClick:()=>i(!1),className:"flex items-center px-6 py-3 text-slate-300 hover:bg-slate-800 hover:text-white transition-colors",children:[u.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Manage Vendors"]}),u.jsxs(oe,{to:"/admin/users",onClick:()=>i(!1),className:"flex items-center px-6 py-3 text-slate-300 hover:bg-slate-800 hover:text-white transition-colors",children:[u.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"Manage Users"]}),u.jsxs(oe,{to:"/admin/bookings",onClick:()=>i(!1),className:"flex items-center px-6 py-3 text-slate-300 hover:bg-slate-800 hover:text-white transition-colors",children:[u.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"All Bookings"]}),u.jsxs(oe,{to:"/admin/reports",onClick:()=>i(!1),className:"flex items-center px-6 py-3 text-slate-300 hover:bg-slate-800 hover:text-white transition-colors",children:[u.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"User Reports"]}),u.jsxs(oe,{to:"/admin/settings",onClick:()=>i(!1),className:"flex items-center px-6 py-3 text-slate-300 hover:bg-slate-800 hover:text-white transition-colors",children:[u.jsxs("svg",{className:"w-5 h-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]})]}),u.jsx("div",{className:"p-4 border-t border-slate-800",children:u.jsxs("button",{onClick:r,className:"flex items-center w-full px-6 py-3 text-slate-400 hover:text-white transition-colors",children:[u.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})})]}),u.jsxs("div",{className:"flex-1 overflow-auto h-full flex flex-col pt-16 md:pt-0",children:[u.jsx("main",{className:"p-4 md:p-8 flex-1 max-w-7xl mx-auto w-full",children:u.jsx(_m,{})}),u.jsx(cg,{})]})]})}function ah(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function l4(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{h(n.next(d))}catch(p){o(p)}}function l(d){try{h(n.throw(d))}catch(p){o(p)}}function h(d){d.done?i(d.value):s(d.value).then(a,l)}h((n=n.apply(t,e||[])).next())})}const c4=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class ug extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class u4 extends ug{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class y_ extends ug{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class v_ extends ug{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var np;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(np||(np={}));class h4{constructor(e,{headers:r={},customFetch:n,region:s=np.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=c4(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return l4(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:a,method:l,body:h,signal:d,timeout:p}=n;let m={},{region:y}=n;y||(y=this.region);const _=new URL(`${this.url}/${r}`);y&&y!=="any"&&(m["x-region"]=y,_.searchParams.set("forceFunctionRegion",y));let b;h&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",b=h):typeof h=="string"?(m["Content-Type"]="text/plain",b=h):typeof FormData<"u"&&h instanceof FormData?b=h:(m["Content-Type"]="application/json",b=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?b=JSON.stringify(h):b=h;let I=d;p&&(o=new AbortController,i=setTimeout(()=>o.abort(),p),d?(I=o.signal,d.addEventListener("abort",()=>o.abort())):I=o.signal);const w=yield this.fetch(_.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),a),body:b,signal:I}).catch(D=>{throw new u4(D)}),v=w.headers.get("x-relay-error");if(v&&v==="true")throw new y_(w);if(!w.ok)throw new v_(w);let E=((s=w.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),R;return E==="application/json"?R=yield w.json():E==="application/octet-stream"||E==="application/pdf"?R=yield w.blob():E==="text/event-stream"?R=w:E==="multipart/form-data"?R=yield w.formData():R=yield w.text(),{data:R,error:null,response:w}}catch(a){return{data:null,error:a,response:a instanceof v_||a instanceof y_?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var d4=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},f4=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,h=i.status,d=i.statusText;if(i.ok){var p,m;if(r.method!=="HEAD"){var y;const w=await i.text();w===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((y=r.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?a=w:a=JSON.parse(w))}const b=(p=r.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),I=(m=i.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");b&&I&&I.length>1&&(l=parseInt(I[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,h=406,d="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var _;const b=await i.text();try{o=JSON.parse(b),Array.isArray(o)&&i.status===404&&(a=[],o=null,h=200,d="OK")}catch{i.status===404&&b===""?(h=204,d="No Content"):o={message:b}}if(o&&r.isMaybeSingle&&(!(o==null||(_=o.details)===null||_===void 0)&&_.includes("0 rows"))&&(o=null,h=200,d="OK"),o&&r.shouldThrowOnError)throw new d4(o)}return{error:o,data:a,count:l,status:h,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let a="";const l=i==null?void 0:i.cause;if(l){var h,d,p,m;const _=(h=l==null?void 0:l.message)!==null&&h!==void 0?h:"",b=(d=l==null?void 0:l.code)!==null&&d!==void 0?d:"";a=`${(p=i==null?void 0:i.name)!==null&&p!==void 0?p:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(m=l==null?void 0:l.name)!==null&&m!==void 0?m:"Error"}: ${_}`,b&&(a+=` (${b})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var y;a=(y=i==null?void 0:i.stack)!==null&&y!==void 0?y:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},p4=class extends f4{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const __=new RegExp("[,()]");var ii=class extends p4{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&__.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&__.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},m4=class{constructor(t,{headers:e={},schema:r,fetch:n}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:r=!1,count:n}=e??{},s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(h=>/\s/.test(h)&&!i?"":(h==='"'&&(i=!i),h)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),n&&l.append("Prefer",`count=${n}`),new ii({method:s,url:a,headers:l,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var n;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),r||o.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,h)=>l.concat(Object.keys(h)),[]);if(a.length>0){const l=[...new Set(a)].map(h=>`"${h}"`);i.searchParams.set("columns",l.join(","))}}return new ii({method:s,url:i,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&a.searchParams.set("on_conflict",e),n&&l.append("Prefer",`count=${n}`),s||l.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((d,p)=>d.concat(Object.keys(p)),[]);if(h.length>0){const d=[...new Set(h)].map(p=>`"${p}"`);a.searchParams.set("columns",d.join(","))}}return new ii({method:o,url:a,headers:l,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:e}={}){var r;const n="PATCH",{url:s,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new ii({method:n,url:s,headers:i,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new ii({method:r,url:n,headers:s,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},g4=class q1{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new m4(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new q1(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let h;const d=y=>y!==null&&typeof y=="object"&&(!Array.isArray(y)||y.some(d)),p=n&&Object.values(r).some(d);p?(a="POST",h=r):n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([y,_])=>_!==void 0).map(([y,_])=>[y,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([y,_])=>{l.searchParams.append(y,_)})):(a="POST",h=r);const m=new Headers(this.headers);return p?m.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&m.set("Prefer",`count=${i}`),new ii({method:a,url:l,headers:m,schema:this.schemaName,body:h,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class y4{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const v4="2.90.1",_4=`realtime-js/${v4}`,W1="1.0.0",w4="2.0.0",w_=W1,sp=1e4,x4=1e3,b4=100;var mn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(mn||(mn={}));var Ge;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ge||(Ge={}));var or;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(or||(or={}));var ip;(function(t){t.websocket="websocket"})(ip||(ip={}));var _s;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(_s||(_s={}));class E4{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,r,n){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",h=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},p=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+h.length+p.length,y=new ArrayBuffer(this.HEADER_LENGTH+m);let _=new DataView(y),b=0;_.setUint8(b++,this.KINDS.userBroadcastPush),_.setUint8(b++,l.length),_.setUint8(b++,a.length),_.setUint8(b++,o.length),_.setUint8(b++,h.length),_.setUint8(b++,p.length),_.setUint8(b++,r),Array.from(l,w=>_.setUint8(b++,w.charCodeAt(0))),Array.from(a,w=>_.setUint8(b++,w.charCodeAt(0))),Array.from(o,w=>_.setUint8(b++,w.charCodeAt(0))),Array.from(h,w=>_.setUint8(b++,w.charCodeAt(0))),Array.from(p,w=>_.setUint8(b++,w.charCodeAt(0)));var I=new Uint8Array(y.byteLength+n.byteLength);return I.set(new Uint8Array(y),0),I.set(new Uint8Array(n),y.byteLength),I.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[s,i,o,a,l]=n;return r({join_ref:s,ref:i,topic:o,event:a,payload:l})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,s)}}_decodeUserBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),a=r.getUint8(4);let l=this.HEADER_LENGTH+4;const h=n.decode(e.slice(l,l+s));l=l+s;const d=n.decode(e.slice(l,l+i));l=l+i;const p=n.decode(e.slice(l,l+o));l=l+o;const m=e.slice(l,e.byteLength),y=a===this.JSON_ENCODING?JSON.parse(n.decode(m)):m,_={type:this.BROADCAST_EVENT,event:d,payload:y};return o>0&&(_.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class H1{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ye;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ye||(ye={}));const x_=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=T4(o,t,e,s),i),{}):{}},T4=(t,e,r,n)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=r[t];return i&&!n.includes(i)?K1(i,o):op(o)},K1=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return A4(e,r)}switch(t){case ye.bool:return S4(e);case ye.float4:case ye.float8:case ye.int2:case ye.int4:case ye.int8:case ye.numeric:case ye.oid:return k4(e);case ye.json:case ye.jsonb:return I4(e);case ye.timestamp:return N4(e);case ye.abstime:case ye.date:case ye.daterange:case ye.int4range:case ye.int8range:case ye.money:case ye.reltime:case ye.text:case ye.time:case ye.timestamptz:case ye.timetz:case ye.tsrange:case ye.tstzrange:return op(e);default:return op(e)}},op=t=>t,S4=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},k4=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},I4=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},A4=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>K1(e,a))}return t},N4=t=>typeof t=="string"?t.replace(" ","T"):t,G1=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class wd{constructor(e,r,n={},s=sp){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var b_;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(b_||(b_={}));class va{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=va.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=va.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=va.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),o=this.transformState(r),a={},l={};return this.map(i,(h,d)=>{o[h]||(l[h]=d)}),this.map(o,(h,d)=>{const p=i[h];if(p){const m=d.map(I=>I.presence_ref),y=p.map(I=>I.presence_ref),_=d.filter(I=>y.indexOf(I.presence_ref)<0),b=p.filter(I=>m.indexOf(I.presence_ref)<0);_.length>0&&(a[h]=_),b.length>0&&(l[h]=b)}else a[h]=d}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var h;const d=(h=e[a])!==null&&h!==void 0?h:[];if(e[a]=this.cloneDeep(l),d.length>0){const p=e[a].map(y=>y.presence_ref),m=d.filter(y=>p.indexOf(y.presence_ref)<0);e[a].unshift(...m)}n(a,d,l)}),this.map(o,(a,l)=>{let h=e[a];if(!h)return;const d=l.map(p=>p.presence_ref);h=h.filter(p=>d.indexOf(p.presence_ref)<0),e[a]=h,s(a,h,l),h.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var E_;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(E_||(E_={}));var _a;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(_a||(_a={}));var Vr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Vr||(Vr={}));class xi{constructor(e,r={config:{}},n){var s,i;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new wd(this,or.join,this.params,this.timeout),this.rejoinTimer=new H1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ge.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(or.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new va(this),this.broadcastEndpointURL=G1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ge.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,h=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(y=>y.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[_a.PRESENCE]&&this.bindings[_a.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},m={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:h,private:l};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(y=>e==null?void 0:e(Vr.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(Vr.CLOSED)),this.updateJoinPayload(Object.assign({config:m},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:y})=>{var _;if(this.socket._isManualToken()||this.socket.setAuth(),y===void 0){e==null||e(Vr.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,I=(_=b==null?void 0:b.length)!==null&&_!==void 0?_:0,w=[];for(let v=0;v<I;v++){const E=b[v],{filter:{event:R,schema:D,table:V,filter:S}}=E,T=y&&y[v];if(T&&T.event===R&&xi.isFilterValueEqual(T.schema,D)&&xi.isFilterValueEqual(T.table,V)&&xi.isFilterValueEqual(T.filter,S))w.push(Object.assign(Object.assign({},E),{id:T.id}));else{this.unsubscribe(),this.state=Ge.errored,e==null||e(Vr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Vr.SUBSCRIBED);return}}).receive("error",y=>{this.state=Ge.errored,e==null||e(Vr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Vr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Ge.joined&&e===_a.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const h=await a.json();l=h.error||h.message||l}catch{}return Promise.reject(new Error(l))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const h=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ge.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(or.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new wd(this,or.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ge.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new wd(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>b4){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:h,join:d}=or;if(n&&[a,l,h,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var _,b,I;return((_=y.filter)===null||_===void 0?void 0:_.event)==="*"||((I=(b=y.filter)===null||b===void 0?void 0:b.event)===null||I===void 0?void 0:I.toLocaleLowerCase())===o}).map(y=>y.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var _,b,I,w,v,E,R,D;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const V=y.id,S=(_=y.filter)===null||_===void 0?void 0:_.event;return V&&((b=r.ids)===null||b===void 0?void 0:b.includes(V))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((I=r.data)===null||I===void 0?void 0:I.type.toLocaleLowerCase()))&&(!(!((w=y.filter)===null||w===void 0)&&w.table)||y.filter.table===((v=r.data)===null||v===void 0?void 0:v.table))}else{const V=(R=(E=y==null?void 0:y.filter)===null||E===void 0?void 0:E.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return V==="*"||V===((D=r==null?void 0:r.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof m=="object"&&"ids"in m){const _=m.data,{schema:b,table:I,commit_timestamp:w,type:v,errors:E}=_;m=Object.assign(Object.assign({},{schema:b,table:I,commit_timestamp:w,eventType:v,new:{},old:{},errors:E}),this._getPayloadRecords(_))}y.callback(m,n)})}_isClosed(){return this.state===Ge.closed}_isJoined(){return this.state===Ge.joined}_isJoining(){return this.state===Ge.joining}_isLeaving(){return this.state===Ge.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&xi.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(or.close,{},e)}_onError(e){this._on(or.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ge.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=x_(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=x_(e.columns,e.old_record)),r}}const xd=()=>{},Xl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},C4=[1e3,2e3,5e3,1e4],R4=1e4,P4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class j4{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=sp,this.transport=null,this.heartbeatIntervalMs=Xl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xd,this.ref=0,this.reconnectTimer=null,this.vsn=w_,this.logger=xd,this.conn=null,this.sendBuffer=[],this.serializer=new E4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${ip.websocket}`,this.httpEndpoint=G1(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=y4.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case mn.connecting:return _s.Connecting;case mn.open:return _s.Open;case mn.closing:return _s.Closing;default:return _s.Closed}}isConnected(){return this.connectionState()===_s.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new xi(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(x4,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Xl.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",h)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(h=>h._isMember(n)).forEach(h=>h._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===mn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===mn.open||this.conn.readyState===mn.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(or.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([P4],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:_4};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(or.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new H1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Xl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,o,a,l,h,d,p,m,y;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:sp,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Xl.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:xd,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:w_,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:_=>C4[_-1]||R4,this.vsn){case W1:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(_,b)=>b(JSON.stringify(_)),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:(_,b)=>b(JSON.parse(_));break;case w4:this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(y=e==null?void 0:e.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Ga=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function O4(t,e,r){const n=new URL(e,t);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function D4(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function L4(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const a=O4(t.baseUrl,n,s),l=await D4(t.auth),h=await e(a,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),d=await h.text(),p=(h.headers.get("content-type")||"").includes("application/json"),m=p&&d?JSON.parse(d):d;if(!h.ok){const y=p?m:void 0,_=y==null?void 0:y.error;throw new Ga((_==null?void 0:_.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:_==null?void 0:_.type,icebergCode:_==null?void 0:_.code,details:y})}return{status:h.status,headers:h.headers,data:m}}}}function Zl(t){return t.join("")}var V4=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Zl(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Zl(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Zl(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Zl(t.namespace)}`}),!0}catch(e){if(e instanceof Ga&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Ga&&r.status===409)return;throw r}}};function Gs(t){return t.join("")}var M4=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gs(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Gs(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Gs(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Gs(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gs(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Gs(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Ga&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Ga&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},U4=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=L4({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new V4(this.client,e),this.tableOps=new M4(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},lh=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Ie(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var $4=class extends lh{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ap=class extends lh{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const hg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),F4=()=>Response,lp=t=>{if(Array.isArray(t))return t.map(r=>lp(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=lp(n)}),e},B4=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},z4=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Qa(t){"@babel/helpers - typeof";return Qa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qa(t)}function q4(t,e){if(Qa(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qa(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function W4(t){var e=q4(t,"string");return Qa(e)=="symbol"?e:e+""}function H4(t,e,r){return(e=W4(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function J(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?T_(Object(r),!0).forEach(function(n){H4(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T_(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const bd=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},K4=async(t,e,r)=>{t instanceof await F4()&&!(r!=null&&r.noResolveJson)?t.json().then(n=>{const s=t.status||500,i=(n==null?void 0:n.statusCode)||s+"";e(new $4(bd(n),s,i))}).catch(n=>{e(new ap(bd(n),n))}):e(new ap(bd(t),t))},G4=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(B4(n)?(s.headers=J({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),J(J({},s),r))};async function ml(t,e,r,n,s,i){return new Promise((o,a)=>{t(r,G4(e,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>K4(l,a,n))})}async function Ja(t,e,r,n){return ml(t,"GET",e,r,n)}async function sr(t,e,r,n,s){return ml(t,"POST",e,n,s,r)}async function cp(t,e,r,n,s){return ml(t,"PUT",e,n,s,r)}async function Q4(t,e,r,n){return ml(t,"HEAD",e,J(J({},r),{},{noResolveJson:!0}),n)}async function dg(t,e,r,n,s){return ml(t,"DELETE",e,n,s,r)}var J4=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Ie(e))return{data:null,error:e};throw e}}};let Q1;Q1=Symbol.toStringTag;var Y4=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Q1]="BlobDownloadBuilder",this.promise=null}asStream(){return new J4(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Ie(e))return{data:null,error:e};throw e}}};const X4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},S_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Z4=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=hg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,r,n){var s=this;try{let i;const o=J(J({},S_),n);let a=J(J({},s.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(a=J(J({},a),n.headers));const h=s._removeEmptyFolders(e),d=s._getFinalPath(h),p=await(t=="PUT"?cp:sr)(s.fetch,`${s.url}/object/${d}`,i,J({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:h,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(Ie(i))return{data:null,error:i};throw i}}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,n){var s=this;const i=s._removeEmptyFolders(t),o=s._getFinalPath(i),a=new URL(s.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const h=J({upsert:S_.upsert},n),d=J(J({},s.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",h.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",h.cacheControl)):(l=r,d["cache-control"]=`max-age=${h.cacheControl}`,d["content-type"]=h.contentType),{data:{path:i,fullPath:(await cp(s.fetch,a.toString(),l,{headers:d})).Key},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(Ie(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var r=this;try{let n=r._getFinalPath(t);const s=J({},r.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const i=await sr(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+i.url),a=o.searchParams.get("token");if(!a)throw new lh("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var n=this;try{return{data:await sr(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}}async copy(t,e,r){var n=this;try{return{data:{path:(await sr(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}}async createSignedUrl(t,e,r){var n=this;try{let s=n._getFinalPath(t),i=await sr(n.fetch,`${n.url}/object/sign/${s}`,J({expiresIn:e},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}}async createSignedUrls(t,e,r){var n=this;try{const s=await sr(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:t},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>J(J({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}}download(t,e){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(t),o=()=>Ja(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new Y4(o,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);try{return{data:lp(await Ja(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await Q4(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ie(n)&&n instanceof ap){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(t,e){const r=this._getFinalPath(t),n=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&n.push(s);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&n.push(o);let a=n.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${a}`)}}}async remove(t){var e=this;try{return{data:await dg(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}async list(t,e,r){var n=this;try{const s=J(J(J({},X4),e),{},{prefix:t||""});return{data:await sr(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}}async listV2(t,e){var r=this;try{const n=J({},t);return{data:await sr(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},e),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const J1="2.90.1",Y1={"X-Client-Info":`storage-js/${J1}`};var eD=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1;const s=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=J(J({},Y1),e),this.fetch=hg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const r=e.listBucketOptionsToQueryString(t);return{data:await Ja(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await Ja(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}async createBucket(t,e={public:!1}){var r=this;try{return{data:await sr(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}}async updateBucket(t,e){var r=this;try{return{data:await cp(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}}async emptyBucket(t){var e=this;try{return{data:await sr(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await dg(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},tD=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=J(J({},Y1),e),this.fetch=hg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await sr(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}async listBuckets(t){var e=this;try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return{data:await Ja(e.fetch,s,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await dg(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}}from(t){var e=this;if(!z4(t))throw new lh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new U4({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(s,a),error:null}}catch(l){if(n)throw l;return{data:null,error:l}}}}})}};const fg={"X-Client-Info":`storage-js/${J1}`,"Content-Type":"application/json"};var X1=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Dt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Ed=class extends X1{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},rD=class extends X1{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const pg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),nD=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},k_=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),sD=async(t,e,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const n=t.status||500,s=t;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";e(new Ed(k_(i),n,o))}).catch(()=>{const i=n+"";e(new Ed(s.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";e(new Ed(s.statusText||`HTTP ${n} error`,n,i))}}else e(new rD(k_(t),t))},iD=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(nD(n)?(s.headers=J({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,J(J({},s),r)):s};async function oD(t,e,r,n,s,i){return new Promise((o,a)=>{t(r,iD(e,n,s,i)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const h=l.headers.get("content-type");return!h||!h.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>sD(l,a,n))})}async function Lt(t,e,r,n,s){return oD(t,"POST",e,n,s,r)}var aD=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=J(J({},fg),e),this.fetch=pg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Lt(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}async getIndex(t,e){var r=this;try{return{data:await Lt(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}}async listIndexes(t){var e=this;try{return{data:await Lt(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}async deleteIndex(t,e){var r=this;try{return{data:await Lt(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}}},lD=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=J(J({},fg),e),this.fetch=pg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Lt(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}async getVectors(t){var e=this;try{return{data:await Lt(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Lt(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}async queryVectors(t){var e=this;try{return{data:await Lt(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Lt(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}},cD=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=J(J({},fg),e),this.fetch=pg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Lt(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await Lt(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}async listBuckets(t={}){var e=this;try{return{data:await Lt(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await Lt(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}},uD=class extends cD{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new hD(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},hD=class extends aD{constructor(t,e,r,n){super(t,e,n),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,J(J({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,J(J({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new dD(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},dD=class extends lD{constructor(t,e,r,n,s){super(t,e,s),this.vectorBucketName=r,this.indexName=n}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,J(J({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,J(J({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,J(J({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,J(J({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,J(J({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},fD=class extends eD{constructor(t,e={},r,n){super(t,e,r,n)}from(t){return new Z4(this.url,this.headers,t,this.fetch)}get vectors(){return new uD(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new tD(this.url+"/iceberg",this.headers,this.fetch)}};const Z1="2.90.1",oi=30*1e3,up=3,Td=up*oi,pD="http://localhost:9999",mD="supabase.auth.token",gD={"X-Client-Info":`gotrue-js/${Z1}`},hp="X-Supabase-Api-Version",eT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vD=10*60*1e3;class Ya extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function H(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class _D extends Ya{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function wD(t){return H(t)&&t.name==="AuthApiError"}class ws extends Ya{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Zr extends Ya{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class jt extends Zr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xD(t){return H(t)&&t.name==="AuthSessionMissingError"}class Qs extends Zr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ec extends Zr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class tc extends Zr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function bD(t){return H(t)&&t.name==="AuthImplicitGrantRedirectError"}class I_ extends Zr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ED extends Zr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class dp extends Zr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Sd(t){return H(t)&&t.name==="AuthRetryableFetchError"}class A_ extends Zr{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class fp extends Zr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const wu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),N_=` 	
\r=`.split(""),TD=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<N_.length;e+=1)t[N_[e].charCodeAt(0)]=-2;for(let e=0;e<wu.length;e+=1)t[wu[e].charCodeAt(0)]=e;return t})();function C_(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(wu[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(wu[n]),e.queuedBits-=6}}function tT(t,e,r){const n=TD[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function R_(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{ID(o,n,r)};for(let o=0;o<t.length;o+=1)tT(t.charCodeAt(o),s,i);return e.join("")}function SD(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function kD(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}SD(n,e)}}function ID(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Di(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)tT(t.charCodeAt(s),r,n);return new Uint8Array(e)}function AD(t){const e=[];return kD(t,r=>e.push(r)),new Uint8Array(e)}function Ss(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>C_(s,r,n)),C_(null,r,n),e.join("")}function ND(t){return Math.round(Date.now()/1e3)+t}function CD(){return Symbol("auth-callback")}const st=()=>typeof window<"u"&&typeof document<"u",fs={tested:!1,writable:!1},rT=()=>{if(!st())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fs.tested)return fs.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),fs.tested=!0,fs.writable=!0}catch{fs.tested=!0,fs.writable=!1}return fs.writable};function RD(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const nT=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),PD=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ai=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},ps=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},nt=async(t,e)=>{await t.removeItem(e)};class ch{constructor(){this.promise=new ch.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}ch.promiseConstructor=Promise;function kd(t){const e=t.split(".");if(e.length!==3)throw new fp("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!yD.test(e[n]))throw new fp("JWT not in base64url format");return{header:JSON.parse(R_(e[0])),payload:JSON.parse(R_(e[1])),signature:Di(e[2]),raw:{header:e[0],payload:e[1]}}}async function jD(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function OD(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function DD(t){return("0"+t.toString(16)).substr(-2)}function LD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,DD).join("")}async function VD(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function MD(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await VD(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Js(t,e,r=!1){const n=LD();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await ai(t,`${e}-code-verifier`,s);const i=await MD(n);return[i,n===i?"plain":"s256"]}const UD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $D(t){const e=t.headers.get(hp);if(!e||!e.match(UD))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function FD(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function BD(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const zD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ys(t){if(!zD.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Id(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function qD(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function P_(t){return JSON.parse(JSON.stringify(t))}const vs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),WD=[502,503,504];async function j_(t){var e;if(!PD(t))throw new dp(vs(t),0);if(WD.includes(t.status))throw new dp(vs(t),t.status);let r;try{r=await t.json()}catch(i){throw new ws(vs(i),i)}let n;const s=$D(t);if(s&&s.getTime()>=eT["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new A_(vs(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new jt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new A_(vs(r),t.status,r.weak_password.reasons);throw new _D(vs(r),t.status||500,n)}const HD=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Q(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[hp]||(i[hp]=eT["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await KD(t,e,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function KD(t,e,r,n,s,i){const o=HD(e,n,s,i);let a;try{a=await t(r,Object.assign({},o))}catch(l){throw console.error(l),new dp(vs(l),0)}if(a.ok||await j_(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await j_(l)}}function rr(t){var e;let r=null;JD(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=ND(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function O_(t){const e=rr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function bn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function GD(t){return{data:t,error:null}}function QD(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,o=ah(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function D_(t){return t}function JD(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ad=["global","local","others"];class YD{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=nT(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Ad[0]){if(Ad.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ad.join(", ")}`);try{return await Q(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:bn})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=ah(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:QD,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(H(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:bn})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,o,a,l;try{const h={nextPage:null,lastPage:0,total:0},d=await Q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:D_});if(d.error)throw d.error;const p=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return y.length>0&&(y.forEach(_=>{const b=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(_.split(";")[1].split("=")[1]);h[`${I}Page`]=b}),h.total=parseInt(m)),{data:Object.assign(Object.assign({},p),h),error:null}}catch(h){if(H(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Ys(e);try{return await Q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:bn})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Ys(e);try{return await Q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:bn})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Ys(e);try{return await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:bn})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Ys(e.userId);try{const{data:r,error:n}=await Q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(H(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Ys(e.userId),Ys(e.id);try{return{data:await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,i,o,a,l;try{const h={nextPage:null,lastPage:0,total:0},d=await Q(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:D_});if(d.error)throw d.error;const p=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return y.length>0&&(y.forEach(_=>{const b=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(_.split(";")[1].split("=")[1]);h[`${I}Page`]=b}),h.total=parseInt(m)),{data:Object.assign(Object.assign({},p),h),error:null}}catch(h){if(H(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await Q(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await Q(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await Q(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(H(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Q(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await Q(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(H(r))return{data:null,error:r};throw r}}}function L_(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Xs={debug:!!(globalThis&&rT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sT extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class XD extends sT{}async function ZD(t,e,r){Xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Xs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new XD(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Xs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function eL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function iT(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function tL(t){return parseInt(t,16)}function rL(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function nL(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:h,scheme:d,uri:p,version:m}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const y=iT(t.address),_=d?`${d}://${n}`:n,b=t.statement?`${t.statement}
`:"",I=`${_} wants you to sign in with your Ethereum account:
${y}

${b}`;let w=`URI: ${p}
Version: ${m}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(w+=`
Expiration Time: ${s.toISOString()}`),a&&(w+=`
Not Before: ${a.toISOString()}`),l&&(w+=`
Request ID: ${l}`),h){let v=`
Resources:`;for(const E of h){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);v+=`
- ${E}`}w+=v}return`${I}
${w}`}class Be extends Error{constructor({message:e,code:r,cause:n,name:s}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class xu extends Be{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function sL({error:t,options:e}){var r,n,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Be({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Be({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Be({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Be({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Be({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Be({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Be({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Be({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(oT(o)){if(i.rp.id!==o)return new Be({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Be({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Be({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Be({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Be({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function iL({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Be({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Be({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(oT(n)){if(r.rpId!==n)return new Be({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Be({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Be({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Be({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class oL{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const aL=new oL;function lL(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=ah(t,["challenge","user","excludeCredentials"]),i=Di(e).buffer,o=Object.assign(Object.assign({},r),{id:Di(r.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const h=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},h),{id:Di(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return a}function cL(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=ah(t,["challenge","allowCredentials"]),s=Di(e).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const a=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Di(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function uL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ss(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ss(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function hL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ss(new Uint8Array(s.authenticatorData)),clientDataJSON:Ss(new Uint8Array(s.clientDataJSON)),signature:Ss(new Uint8Array(s.signature)),userHandle:s.userHandle?Ss(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function oT(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function V_(){var t,e;return!!(st()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function dL(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xu("Browser returned unexpected credential type",e)}:{data:null,error:new xu("Empty credential response",e)}}catch(e){return{data:null,error:sL({error:e,options:t})}}}async function fL(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xu("Browser returned unexpected credential type",e)}:{data:null,error:new xu("Empty credential response",e)}}catch(e){return{data:null,error:iL({error:e,options:t})}}}const pL={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},mL={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function bu(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(e(o)){const a=n[i];e(a)?n[i]=bu(a,o):n[i]=bu(o)}else n[i]=o}return n}function gL(t,e){return bu(pL,t,e||{})}function yL(t,e){return bu(mL,t,e||{})}class vL{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:a};const l=s??aL.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:h}=o.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${n}`),h.displayName||(h.displayName=h.name)}switch(o.webauthn.type){case"create":{const h=gL(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:p}=await dL({publicKey:h,signal:l});return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}case"request":{const h=yL(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:p}=await fL(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:h,signal:l}));return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}}}catch(o){return H(o)?{data:null,error:o}:{data:null,error:new ws("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Ya("rpId is required for WebAuthn authentication")};try{if(!V_())return{data:null,error:new ws("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return H(o)?{data:null,error:o}:{data:null,error:new ws("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Ya("rpId is required for WebAuthn registration")};try{if(!V_())return{data:null,error:new ws("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var p;return(p=d.data)===null||p===void 0?void 0:p.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:h}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:h}}catch(o){return H(o)?{data:null,error:o}:{data:null,error:new ws("Unexpected error in register",o)}}}}eL();const _L={url:pD,storageKey:mD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function M_(t,e,r){return await r()}const Zs={};class Xa{get jwks(){var e,r;return(r=(e=Zs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Zs[this.storageKey]=Object.assign(Object.assign({},Zs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Zs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Zs[this.storageKey]=Object.assign(Object.assign({},Zs[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},_L),e);if(this.storageKey=i.storageKey,this.instanceID=(r=Xa.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Xa.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&st()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new YD({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=nT(i.fetch),this.lock=i.lock||M_,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&st()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=ZD:this.lock=M_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new vL(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:rT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=L_(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=L_(this.memoryStorage)),st()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Z1}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(st()&&(r=RD(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),st()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),bD(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return H(r)?this._returnResult({error:r}):this._returnResult({error:new ws("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:rr}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:h,session:l},error:null})}catch(i){if(H(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:d,password:p,options:m}=e;let y=null,_=null;this.flowType==="pkce"&&([y,_]=await Js(this.storage,this.storageKey)),i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:p,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:y,code_challenge_method:_},xform:rr})}else if("phone"in e){const{phone:d,password:p,options:m}=e;i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:rr})}else throw new ec("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await nt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:h,session:l},error:null})}catch(i){if(await nt(this.storage,`${this.storageKey}-code-verifier`),H(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:a}=e;r=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:O_})}else if("phone"in e){const{phone:i,password:o,options:a}=e;r=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:O_})}else throw new ec("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Qs;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(H(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,i,o,a,l,h,d,p,m;let y,_;if("message"in e)y=e.message,_=e.signature;else{const{chain:b,wallet:I,statement:w,options:v}=e;let E;if(st())if(typeof I=="object")E=I;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")E=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=I}const R=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href),D=await E.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const V=iT(D[0]);let S=(n=v==null?void 0:v.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!S){const k=await E.request({method:"eth_chainId"});S=tL(k)}const T={domain:R.host,address:V,statement:w,uri:R.href,version:"1",chainId:S,nonce:(s=v==null?void 0:v.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=v==null?void 0:v.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(h=v==null?void 0:v.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(d=v==null?void 0:v.signInWithEthereum)===null||d===void 0?void 0:d.resources};y=nL(T),_=await E.request({method:"personal_sign",params:[rL(y),V]})}try{const{data:b,error:I}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:_},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:rr});if(I)throw I;if(!b||!b.session||!b.user){const w=new Qs;return this._returnResult({data:{user:null,session:null},error:w})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:I})}catch(b){if(H(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async signInWithSolana(e){var r,n,s,i,o,a,l,h,d,p,m,y;let _,b;if("message"in e)_=e.message,b=e.signature;else{const{chain:I,wallet:w,statement:v,options:E}=e;let R;if(st())if(typeof w=="object")R=w;else{const V=window;if("solana"in V&&typeof V.solana=="object"&&("signIn"in V.solana&&typeof V.solana.signIn=="function"||"signMessage"in V.solana&&typeof V.solana.signMessage=="function"))R=V.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=w}const D=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in R&&R.signIn){const V=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E==null?void 0:E.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),v?{statement:v}:null));let S;if(Array.isArray(V)&&V[0]&&typeof V[0]=="object")S=V[0];else if(V&&typeof V=="object"&&"signedMessage"in V&&"signature"in V)S=V;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)_=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),b=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${D.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(s=(n=E==null?void 0:E.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=E==null?void 0:E.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((o=E==null?void 0:E.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((a=E==null?void 0:E.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((l=E==null?void 0:E.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((h=E==null?void 0:E.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((p=(d=E==null?void 0:E.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",...E.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const V=await R.signMessage(new TextEncoder().encode(_),"utf8");if(!V||!(V instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=V}}try{const{data:I,error:w}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Ss(b)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:rr});if(w)throw w;if(!I||!I.session||!I.user){const v=new Qs;return this._returnResult({data:{user:null,session:null},error:v})}return I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),this._returnResult({data:Object.assign({},I),error:w})}catch(I){if(H(I))return this._returnResult({data:{user:null,session:null},error:I});throw I}}async _exchangeCodeForSession(e){const r=await ps(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new ED;const{data:i,error:o}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:rr});if(await nt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new Qs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await nt(this.storage,`${this.storageKey}-code-verifier`),H(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=e,a=await Q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:rr}),{data:l,error:h}=a;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!l||!l.session||!l.user){const d=new Qs;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:h})}catch(r){if(H(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let h=null,d=null;this.flowType==="pkce"&&([h,d]=await Js(this.storage,this.storageKey));const{error:p}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:h,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in e){const{phone:a,options:l}=e,{data:h,error:d}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:d})}throw new ec("You must provide either an email or phone number.")}catch(a){if(await nt(this.storage,`${this.storageKey}-code-verifier`),H(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await Q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:rr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,h=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:h,session:l},error:null})}catch(s){if(H(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var r,n,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Js(this.storage,this.storageKey));const h=await Q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:GD});return!((i=h.data)===null||i===void 0)&&i.url&&st()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(a){if(await nt(this.storage,`${this.storageKey}-code-verifier`),H(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new jt;const{error:s}=await Q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(H(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await Q(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:a}=await Q(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new ec("You must provide either an email or phone number and a type")}catch(r){if(H(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await ps(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Td:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await ps(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Id()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=qD(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:bn}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new jt}:await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:bn})})}catch(r){if(H(r))return xD(r)&&(await this._removeSession(),await nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new jt;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Js(this.storage,this.storageKey));const{data:h,error:d}=await Q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:bn});if(d)throw d;return o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await nt(this.storage,`${this.storageKey}-code-verifier`),H(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new jt;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=kd(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(H(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:a}=r;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new jt;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(H(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!st())throw new tc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new tc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new I_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new tc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new I_("No code detected.");const{data:v,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:h}=e;if(!i||!a||!o||!h)throw new tc("No session defined in URL");const d=Math.round(Date.now()/1e3),p=parseInt(a);let m=d+p;l&&(m=parseInt(l));const y=m-d;y*1e3<=oi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);const _=m-p;d-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,m,d):d-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,m,d);const{data:b,error:I}=await this._getUser(i);if(I)throw I;const w={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:m,refresh_token:o,token_type:h,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:e.type},error:null})}catch(n){if(H(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await ps(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(wD(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=CD(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Js(this.storage,this.storageKey,!0));try{return await Q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await nt(this.storage,`${this.storageKey}-code-verifier`),H(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(H(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,h,d;const{data:p,error:m}=i;if(m)throw m;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Q(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(h=p.session)===null||h===void 0?void 0:h.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return st()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(H(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:a,token:l,access_token:h,nonce:d}=e,p=await Q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:h,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:rr}),{data:m,error:y}=p;return y?this._returnResult({data:{user:null,session:null},error:y}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new Qs}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:y}))}catch(s){if(await nt(this.storage,`${this.storageKey}-code-verifier`),H(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await Q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(H(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await OD(async s=>(s>0&&await jD(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:rr})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Sd(i)&&Date.now()+o-n<oi})}catch(n){if(this._debug(r,"error",n),H(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),st()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await ps(this.storage,this.storageKey);if(s&&this.userStorage){let o=await ps(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await ai(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Id()}else if(s&&!s.user&&!s.user){const o=await ps(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await nt(this.storage,this.storageKey+"-user"),await ai(this.storage,this.storageKey,s)):s.user=Id()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Td;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Td}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Sd(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new jt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ch;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new jt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),H(i)){const o={data:null,error:i};return Sd(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await nt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await ai(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=P_(s);await ai(this.storage,this.storageKey,i)}else{const s=P_(r);await ai(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await nt(this.storage,this.storageKey),await nt(this.storage,this.storageKey+"-code-verifier"),await nt(this.storage,this.storageKey+"-user"),this.userStorage&&await nt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&st()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),oi);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/oi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${oi}ms, refresh threshold is ${up} ticks`),s<=up&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sT)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!st()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Js(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await Q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(H(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:h}=await Q(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(H(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?uL(e.webauthn.credential_response):hL(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(r){if(H(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:lL(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:cL(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(H(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=kd(n.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const h=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await Q(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new jt})})}catch(r){if(H(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new jt});const o=await Q(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&st()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(H(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new jt});const o=await Q(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&st()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(H(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await Q(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new jt})})}catch(e){if(H(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await Q(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new jt})})}catch(r){if(H(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(a=>a.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+vD>s)return n;const{data:i,error:o}=await Q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:y,error:_}=await this.getSession();if(_||!y.session)return this._returnResult({data:null,error:_});n=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=kd(n);r!=null&&r.allowExpired||FD(i.exp);const h=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!h){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const d=BD(s.alg),p=await crypto.subtle.importKey("jwk",h,d,!0,["verify"]);if(!await crypto.subtle.verify(d,p,o,AD(`${a}.${l}`)))throw new fp("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(H(n))return this._returnResult({data:null,error:n});throw n}}}Xa.nextInstanceID={};const wL=Xa,xL="2.90.1";let ea="";typeof Deno<"u"?ea="deno":typeof document<"u"?ea="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ea="react-native":ea="node";const bL={"X-Client-Info":`supabase-js-${ea}/${xL}`},EL={headers:bL},TL={schema:"public"},SL={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kL={};function Za(t){"@babel/helpers - typeof";return Za=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Za(t)}function IL(t,e){if(Za(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Za(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AL(t){var e=IL(t,"string");return Za(e)=="symbol"?e:e+""}function NL(t,e,r){return(e=AL(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function U_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Oe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U_(Object(r),!0).forEach(function(n){NL(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U_(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const CL=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),RL=()=>Headers,PL=(t,e,r)=>{const n=CL(r),s=RL();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let h=new s(o==null?void 0:o.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${l}`),n(i,Oe(Oe({},o),{},{headers:h}))}};function jL(t){return t.endsWith("/")?t:t+"/"}function OL(t,e){var r,n;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:h,realtime:d,global:p}=e,m={db:Oe(Oe({},l),s),auth:Oe(Oe({},h),i),realtime:Oe(Oe({},d),o),storage:{},global:Oe(Oe(Oe({},p),a),{},{headers:Oe(Oe({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function DL(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(jL(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var LL=class extends wL{constructor(t){super(t)}},VL=class{constructor(t,e,r){var n,s;this.supabaseUrl=t,this.supabaseKey=e;const i=DL(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:TL,realtime:kL,auth:Oe(Oe({},SL),{},{storageKey:o}),global:EL},l=OL(r??{},a);if(this.storageKey=(n=l.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(d,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=l.auth)!==null&&h!==void 0?h:{},this.headers,l.global.fetch)}this.fetch=PL(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Oe({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new g4(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new fD(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new h4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:n}=await t.auth.getSession();return(e=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:h},d,p){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new LL({url:this.authUrl.href,headers:Oe(Oe({},m),d),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:a,debug:l,throwOnError:h,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new j4(this.realtimeUrl.href,Oe(Oe({},t),{},{params:Oe(Oe({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const ML=(t,e,r)=>new VL(t,e,r);function UL(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const r=e.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}UL()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");console.warn("Missing Supabase environment variables. Please check your .env file.");const $_=ML("https://placeholder.supabase.co","placeholder");function $L(){const{id:t}=ub(),{user:e,profile:r}=Bt(),[n,s]=O.useState([]),[i,o]=O.useState(""),[a,l]=O.useState(null),[h,d]=O.useState(""),p=O.useRef(null),m=(r==null?void 0:r.role)==="vendor",y=m?a==null?void 0:a.userId:a==null?void 0:a.vendorId;O.useEffect(()=>{if(!e||!t)return;(async()=>{try{const R=await ue(`/negotiation/${t}`);l(R.contextItem),s(R.messages.map(D=>({id:D.id,senderId:D.sender_id,senderName:D.sender_id===e.uid?e.displayName||"Me":R.contextItem.userName||R.contextItem.vendorName||"Partner",text:D.content,timestamp:D.created_at,type:D.type,metadata:D.metadata})))}catch(R){console.error("Failed to load negotiation context",R)}})();const E=$_.channel(`room_${t}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`booking_id=eq.${t}`},R=>{const D=R.new;s(V=>V.find(S=>S.id===D.id)?V:[...V,{id:D.id,senderId:D.sender_id,senderName:D.sender_id===e.uid?"Me":(a==null?void 0:a.userName)||(a==null?void 0:a.vendorName)||"Partner",text:D.content,timestamp:D.created_at,type:D.type,metadata:D.metadata}]),_()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:a!=null&&a.isEnquiry?"enquiries":"bookings",filter:`id=eq.${t}`},R=>{l(D=>D?{...D,status:R.new.status}:null)}).subscribe();return()=>{$_.removeChannel(E)}},[e,t,a==null?void 0:a.isEnquiry]);const _=()=>{var v;(v=p.current)==null||v.scrollIntoView({behavior:"smooth"})},b=async(v="text",E)=>{if(!e||!a||!i.trim()&&v==="text")return;const R={senderId:e.uid,receiverId:y,content:v==="text"?i:I(v,E),bookingId:a.isEnquiry?null:t,enquiryId:a.isEnquiry?t:null,type:v,metadata:E};try{const D={id:"opt_"+Date.now(),senderId:e.uid,senderName:"Me",text:R.content,timestamp:new Date().toISOString(),type:v,metadata:E};s(V=>[...V,D]),_(),o(""),v==="offer"&&d(""),await ue("/messages",{method:"POST",body:JSON.stringify(R)})}catch(D){console.error("Failed to send message:",D)}},I=(v,E)=>{switch(v){case"offer":return`Offer Proposed: $${E.newPrice}`;case"acceptance":return"Offer Accepted! Deal Confirmed.";case"rejection":return"Offer Rejected.";default:return""}},w=()=>{h&&b("offer",{newPrice:Number(h)})};return u.jsxs("div",{className:"flex flex-col h-[calc(100vh-64px)] bg-slate-50",children:[u.jsxs("div",{className:"bg-white p-4 shadow-sm flex justify-between items-center z-10",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-bold text-slate-800",children:m?`Negotiating with ${a==null?void 0:a.userName}`:`Negotiating with ${a==null?void 0:a.vendorName}`}),u.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[u.jsx("span",{className:`px-2 py-0.5 rounded-full capitalize ${(a==null?void 0:a.status)==="confirmed"?"bg-green-100 text-green-800":(a==null?void 0:a.status)==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:a==null?void 0:a.status}),(a==null?void 0:a.price)&&u.jsxs("span",{className:"font-semibold text-slate-600",children:["Current Price: $",a.price]})]})]}),u.jsx("div",{className:"flex gap-2",children:(a==null?void 0:a.status)!=="confirmed"&&u.jsx(u.Fragment,{children:u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"text-slate-500 text-sm",children:"$"}),u.jsx("input",{type:"number",className:"w-24 px-2 py-1 border rounded text-sm",placeholder:"Price",value:h,onChange:v=>d(v.target.value)}),u.jsx(pe,{size:"sm",onClick:w,children:"Send Offer"})]})})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[n.map((v,E)=>{const R=v.senderId===(e==null?void 0:e.uid);return v.type!=="text"?u.jsx("div",{className:"flex justify-center my-4",children:u.jsxs("div",{className:"bg-slate-200 text-slate-600 px-4 py-2 rounded-full text-sm font-medium flex flex-col items-center gap-2",children:[u.jsx("span",{children:v.text}),v.type==="offer"&&v.senderId!==(e==null?void 0:e.uid)&&(a==null?void 0:a.status)!=="confirmed"&&u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("button",{onClick:()=>b("acceptance"),className:"bg-green-600 text-white px-3 py-1 rounded-full text-xs hover:bg-green-700",children:"Accept"}),u.jsx("button",{onClick:()=>b("rejection"),className:"bg-red-500 text-white px-3 py-1 rounded-full text-xs hover:bg-red-600",children:"Reject"})]})]})},E):u.jsx("div",{className:`flex ${R?"justify-end":"justify-start"}`,children:u.jsxs("div",{className:`max-w-[70%] p-3 rounded-2xl ${R?"bg-primary-600 text-white rounded-br-none":"bg-white text-slate-800 shadow-sm rounded-bl-none"}`,children:[u.jsx("p",{children:v.text}),u.jsx("p",{className:`text-[10px] mt-1 ${R?"text-primary-100":"text-slate-400"}`,children:new Date(v.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},E)}),u.jsx("div",{ref:p})]}),u.jsx("div",{className:"p-4 bg-white border-t border-slate-200",children:u.jsxs("form",{onSubmit:v=>{v.preventDefault(),b("text")},className:"flex gap-2",children:[u.jsx("input",{type:"text",className:"flex-1 input bg-slate-50",placeholder:"Type a message...",value:i,onChange:v=>o(v.target.value)}),u.jsx(pe,{type:"submit",disabled:!i.trim(),children:"Send"})]})})]})}const jr=Object.create(null);jr.open="0";jr.close="1";jr.ping="2";jr.pong="3";jr.message="4";jr.upgrade="5";jr.noop="6";const kc=Object.create(null);Object.keys(jr).forEach(t=>{kc[jr[t]]=t});const pp={type:"error",data:"parser error"},aT=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",lT=typeof ArrayBuffer=="function",cT=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,mg=({type:t,data:e},r,n)=>aT&&e instanceof Blob?r?n(e):F_(e,n):lT&&(e instanceof ArrayBuffer||cT(e))?r?n(e):F_(new Blob([e]),n):n(jr[t]+(e||"")),F_=(t,e)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];e("b"+(n||""))},r.readAsDataURL(t)};function B_(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Nd;function FL(t,e){if(aT&&t.data instanceof Blob)return t.data.arrayBuffer().then(B_).then(e);if(lT&&(t.data instanceof ArrayBuffer||cT(t.data)))return e(B_(t.data));mg(t,!1,r=>{Nd||(Nd=new TextEncoder),e(Nd.encode(r))})}const z_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ta=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<z_.length;t++)ta[z_.charCodeAt(t)]=t;const BL=t=>{let e=t.length*.75,r=t.length,n,s=0,i,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const h=new ArrayBuffer(e),d=new Uint8Array(h);for(n=0;n<r;n+=4)i=ta[t.charCodeAt(n)],o=ta[t.charCodeAt(n+1)],a=ta[t.charCodeAt(n+2)],l=ta[t.charCodeAt(n+3)],d[s++]=i<<2|o>>4,d[s++]=(o&15)<<4|a>>2,d[s++]=(a&3)<<6|l&63;return h},zL=typeof ArrayBuffer=="function",gg=(t,e)=>{if(typeof t!="string")return{type:"message",data:uT(t,e)};const r=t.charAt(0);return r==="b"?{type:"message",data:qL(t.substring(1),e)}:kc[r]?t.length>1?{type:kc[r],data:t.substring(1)}:{type:kc[r]}:pp},qL=(t,e)=>{if(zL){const r=BL(t);return uT(r,e)}else return{base64:!0,data:t}},uT=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},hT="",WL=(t,e)=>{const r=t.length,n=new Array(r);let s=0;t.forEach((i,o)=>{mg(i,!1,a=>{n[o]=a,++s===r&&e(n.join(hT))})})},HL=(t,e)=>{const r=t.split(hT),n=[];for(let s=0;s<r.length;s++){const i=gg(r[s],e);if(n.push(i),i.type==="error")break}return n};function KL(){return new TransformStream({transform(t,e){FL(t,r=>{const n=r.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(r)})}})}let Cd;function rc(t){return t.reduce((e,r)=>e+r.length,0)}function nc(t,e){if(t[0].length===e)return t.shift();const r=new Uint8Array(e);let n=0;for(let s=0;s<e;s++)r[s]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),r}function GL(t,e){Cd||(Cd=new TextDecoder);const r=[];let n=0,s=-1,i=!1;return new TransformStream({transform(o,a){for(r.push(o);;){if(n===0){if(rc(r)<1)break;const l=nc(r,1);i=(l[0]&128)===128,s=l[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(rc(r)<2)break;const l=nc(r,2);s=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),n=3}else if(n===2){if(rc(r)<8)break;const l=nc(r,8),h=new DataView(l.buffer,l.byteOffset,l.length),d=h.getUint32(0);if(d>Math.pow(2,21)-1){a.enqueue(pp);break}s=d*Math.pow(2,32)+h.getUint32(4),n=3}else{if(rc(r)<s)break;const l=nc(r,s);a.enqueue(gg(i?l:Cd.decode(l),e)),n=0}if(s===0||s>t){a.enqueue(pp);break}}}})}const dT=4;function He(t){if(t)return QL(t)}function QL(t){for(var e in He.prototype)t[e]=He.prototype[e];return t}He.prototype.on=He.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};He.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};He.prototype.off=He.prototype.removeListener=He.prototype.removeAllListeners=He.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,s=0;s<r.length;s++)if(n=r[s],n===e||n.fn===e){r.splice(s,1);break}return r.length===0&&delete this._callbacks["$"+t],this};He.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,s=r.length;n<s;++n)r[n].apply(this,e)}return this};He.prototype.emitReserved=He.prototype.emit;He.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};He.prototype.hasListeners=function(t){return!!this.listeners(t).length};const uh=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,r)=>r(e,0),Kt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),JL="arraybuffer";function fT(t,...e){return e.reduce((r,n)=>(t.hasOwnProperty(n)&&(r[n]=t[n]),r),{})}const YL=Kt.setTimeout,XL=Kt.clearTimeout;function hh(t,e){e.useNativeTimers?(t.setTimeoutFn=YL.bind(Kt),t.clearTimeoutFn=XL.bind(Kt)):(t.setTimeoutFn=Kt.setTimeout.bind(Kt),t.clearTimeoutFn=Kt.clearTimeout.bind(Kt))}const ZL=1.33;function e6(t){return typeof t=="string"?t6(t):Math.ceil((t.byteLength||t.size)*ZL)}function t6(t){let e=0,r=0;for(let n=0,s=t.length;n<s;n++)e=t.charCodeAt(n),e<128?r+=1:e<2048?r+=2:e<55296||e>=57344?r+=3:(n++,r+=4);return r}function pT(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function r6(t){let e="";for(let r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e}function n6(t){let e={},r=t.split("&");for(let n=0,s=r.length;n<s;n++){let i=r[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class s6 extends Error{constructor(e,r,n){super(e),this.description=r,this.context=n,this.type="TransportError"}}class yg extends He{constructor(e){super(),this.writable=!1,hh(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,r,n){return super.emitReserved("error",new s6(e,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const r=gg(e,this.socket.binaryType);this.onPacket(r)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,r={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const r=r6(e);return r.length?"?"+r:""}}class i6 extends yg{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const r=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};HL(e,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,WL(e,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=pT()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(e,r)}}let mT=!1;try{mT=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const o6=mT;function a6(){}class l6 extends i6{constructor(e){if(super(e),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,r){const n=this.request({method:"POST",data:e});n.on("success",r),n.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=e}}let Li=class Ic extends He{constructor(e,r,n){super(),this.createRequest=e,hh(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const r=fT(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Ic.requestsCount++,Ic.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=a6,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ic.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Li.requestsCount=0;Li.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",q_);else if(typeof addEventListener=="function"){const t="onpagehide"in Kt?"pagehide":"unload";addEventListener(t,q_,!1)}}function q_(){for(let t in Li.requests)Li.requests.hasOwnProperty(t)&&Li.requests[t].abort()}const c6=function(){const t=gT({xdomain:!1});return t&&t.responseType!==null}();class u6 extends l6{constructor(e){super(e);const r=e&&e.forceBase64;this.supportsBinary=c6&&!r}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Li(gT,this.uri(),e)}}function gT(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||o6))return new XMLHttpRequest}catch{}if(!e)try{return new Kt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const yT=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class h6 extends yg{get name(){return"websocket"}doOpen(){const e=this.uri(),r=this.opts.protocols,n=yT?{}:fT(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,r,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){const n=e[r],s=r===e.length-1;mg(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}s&&uh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=pT()),this.supportsBinary||(r.b64=1),this.createUri(e,r)}}const Rd=Kt.WebSocket||Kt.MozWebSocket;class d6 extends h6{createSocket(e,r,n){return yT?new Rd(e,r,n):r?new Rd(e,r):new Rd(e)}doWrite(e,r){this.ws.send(r)}}class f6 extends yg{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const r=GL(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(r).getReader(),s=KL();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{n.read().then(({done:a,value:l})=>{a||(this.onPacket(l),i())}).catch(a=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let r=0;r<e.length;r++){const n=e[r],s=r===e.length-1;this._writer.write(n).then(()=>{s&&uh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const p6={websocket:d6,webtransport:f6,polling:u6},m6=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,g6=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function mp(t){if(t.length>8e3)throw"URI too long";const e=t,r=t.indexOf("["),n=t.indexOf("]");r!=-1&&n!=-1&&(t=t.substring(0,r)+t.substring(r,n).replace(/:/g,";")+t.substring(n,t.length));let s=m6.exec(t||""),i={},o=14;for(;o--;)i[g6[o]]=s[o]||"";return r!=-1&&n!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=y6(i,i.path),i.queryKey=v6(i,i.query),i}function y6(t,e){const r=/\/{2,9}/g,n=e.replace(r,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function v6(t,e){const r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,i){s&&(r[s]=i)}),r}const gp=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ac=[];gp&&addEventListener("offline",()=>{Ac.forEach(t=>t())},!1);class zn extends He{constructor(e,r){if(super(),this.binaryType=JL,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(r=e,e=null),e){const n=mp(e);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=mp(r.host).host);hh(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const s=n.prototype.name;this.transports.push(s),this._transportsByName[s]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=n6(this.opts.query)),gp&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ac.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const r=Object.assign({},this.opts.query);r.EIO=dT,r.transport=e,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&zn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(e);r.open(),this.setTransport(r)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",zn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=e.data,this._onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(r+=e6(s)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,uh(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,r,n){return this._sendPacket("message",e,r,n),this}send(e,r,n){return this._sendPacket("message",e,r,n),this}_sendPacket(e,r,n,s){if(typeof r=="function"&&(s=r,r=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:e,data:r,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(zn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),gp&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Ac.indexOf(this._offlineEventListener);n!==-1&&Ac.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this._prevBufferLen=0}}}zn.protocol=dT;class _6 extends zn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let r=this.createTransport(e),n=!1;zn.priorWebsocketSuccess=!1;const s=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",p=>{if(!n)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;zn.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(d(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=r.name,this.emitReserved("upgradeError",m)}}))};function i(){n||(n=!0,d(),r.close(),r=null)}const o=p=>{const m=new Error("probe error: "+p);m.transport=r.name,i(),this.emitReserved("upgradeError",m)};function a(){o("transport closed")}function l(){o("socket closed")}function h(p){r&&p.name!==r.name&&i()}const d=()=>{r.removeListener("open",s),r.removeListener("error",o),r.removeListener("close",a),this.off("close",l),this.off("upgrading",h)};r.once("open",s),r.once("error",o),r.once("close",a),this.once("close",l),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const r=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&r.push(e[n]);return r}}let w6=class extends _6{constructor(e,r={}){const n=typeof e=="object"?e:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(s=>p6[s]).filter(s=>!!s)),super(e,n)}};function x6(t,e="",r){let n=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),n=mp(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+e,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}const b6=typeof ArrayBuffer=="function",E6=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,vT=Object.prototype.toString,T6=typeof Blob=="function"||typeof Blob<"u"&&vT.call(Blob)==="[object BlobConstructor]",S6=typeof File=="function"||typeof File<"u"&&vT.call(File)==="[object FileConstructor]";function vg(t){return b6&&(t instanceof ArrayBuffer||E6(t))||T6&&t instanceof Blob||S6&&t instanceof File}function Nc(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(Nc(t[r]))return!0;return!1}if(vg(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Nc(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&Nc(t[r]))return!0;return!1}function k6(t){const e=[],r=t.data,n=t;return n.data=yp(r,e),n.attachments=e.length,{packet:n,buffers:e}}function yp(t,e){if(!t)return t;if(vg(t)){const r={_placeholder:!0,num:e.length};return e.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=yp(t[n],e);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=yp(t[n],e));return r}return t}function I6(t,e){return t.data=vp(t.data,e),delete t.attachments,t}function vp(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=vp(t[r],e);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=vp(t[r],e));return t}const A6=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],N6=5;var ie;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(ie||(ie={}));class C6{constructor(e){this.replacer=e}encode(e){return(e.type===ie.EVENT||e.type===ie.ACK)&&Nc(e)?this.encodeAsBinary({type:e.type===ie.EVENT?ie.BINARY_EVENT:ie.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===ie.BINARY_EVENT||e.type===ie.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data,this.replacer)),r}encodeAsBinary(e){const r=k6(e),n=this.encodeAsString(r.packet),s=r.buffers;return s.unshift(n),s}}function W_(t){return Object.prototype.toString.call(t)==="[object Object]"}class _g extends He{constructor(e){super(),this.reviver=e}add(e){let r;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(e);const n=r.type===ie.BINARY_EVENT;n||r.type===ie.BINARY_ACK?(r.type=n?ie.EVENT:ie.ACK,this.reconstructor=new R6(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(vg(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0;const n={type:Number(e.charAt(0))};if(ie[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===ie.BINARY_EVENT||n.type===ie.BINARY_ACK){const i=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);const o=e.substring(i,r);if(o!=Number(o)||e.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(e.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););n.nsp=e.substring(i,r)}else n.nsp="/";const s=e.charAt(r+1);if(s!==""&&Number(s)==s){const i=r+1;for(;++r;){const o=e.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===e.length)break}n.id=Number(e.substring(i,r+1))}if(e.charAt(++r)){const i=this.tryParse(e.substr(r));if(_g.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,r){switch(e){case ie.CONNECT:return W_(r);case ie.DISCONNECT:return r===void 0;case ie.CONNECT_ERROR:return typeof r=="string"||W_(r);case ie.EVENT:case ie.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&A6.indexOf(r[0])===-1);case ie.ACK:case ie.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class R6{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const r=I6(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const P6=Object.freeze(Object.defineProperty({__proto__:null,Decoder:_g,Encoder:C6,get PacketType(){return ie},protocol:N6},Symbol.toStringTag,{value:"Module"}));function ar(t,e,r){return t.on(e,r),function(){t.off(e,r)}}const j6=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class _T extends He{constructor(e,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ar(e,"open",this.onopen.bind(this)),ar(e,"packet",this.onpacket.bind(this)),ar(e,"error",this.onerror.bind(this)),ar(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...r){var n,s,i;if(j6.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(r.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const o={type:ie.EVENT,data:r};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const d=this.ids++,p=r.pop();this._registerAckCallback(d,p),o.id=d}const a=(s=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||s===void 0?void 0:s.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,r){var n;const s=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(s===void 0){this.acks[e]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);r.call(this,new Error("operation has timed out"))},s),o=(...a)=>{this.io.clearTimeoutFn(i),r.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...r){return new Promise((n,s)=>{const i=(o,a)=>o?s(o):n(a);i.withError=!0,r.push(i),this.emit(e,...r)})}_addToQueue(e){let r;typeof e[e.length-1]=="function"&&(r=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>n!==this._queue[0]?void 0:(s!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(s)):(this._queue.shift(),r&&r(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!e||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:ie.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ie.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ie.EVENT:case ie.BINARY_EVENT:this.onevent(e);break;case ie.ACK:case ie.BINARY_ACK:this.onack(e);break;case ie.DISCONNECT:this.ondisconnect();break;case ie.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const r=e.data||[];e.id!=null&&r.push(this.ack(e.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const r=this;let n=!1;return function(...s){n||(n=!0,r.packet({type:ie.ACK,id:e,data:s}))}}onack(e){const r=this.acks[e.id];typeof r=="function"&&(delete this.acks[e.id],r.withError&&e.data.unshift(null),r.apply(this,e.data))}onconnect(e,r){this.id=e,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ie.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,e.data)}}}function po(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}po.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+r:t-r}return Math.min(t,this.max)|0};po.prototype.reset=function(){this.attempts=0};po.prototype.setMin=function(t){this.ms=t};po.prototype.setMax=function(t){this.max=t};po.prototype.setJitter=function(t){this.jitter=t};class _p extends He{constructor(e,r){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(r=e,e=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,hh(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new po({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=e;const s=r.parser||P6;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var r;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(r=this.backoff)===null||r===void 0||r.setMin(e),this)}randomizationFactor(e){var r;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(r=this.backoff)===null||r===void 0||r.setJitter(e),this)}reconnectionDelayMax(e){var r;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(r=this.backoff)===null||r===void 0||r.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new w6(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=ar(r,"open",function(){n.onopen(),e&&e()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=ar(r,"error",i);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),r.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(s),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ar(e,"ping",this.onping.bind(this)),ar(e,"data",this.ondata.bind(this)),ar(e,"error",this.onerror.bind(this)),ar(e,"close",this.onclose.bind(this)),ar(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(r){this.onclose("parse error",r)}}ondecoded(e){uh(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,r){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new _T(this,e,r),this.nsps[e]=n),n}_destroy(e){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(e){const r=this.encoder.encode(e);for(let n=0;n<r.length;n++)this.engine.write(r[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Fo={};function Cc(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const r=x6(t,e.path||"/socket.io"),n=r.source,s=r.id,i=r.path,o=Fo[s]&&i in Fo[s].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new _p(n,e):(Fo[s]||(Fo[s]=new _p(n,e)),l=Fo[s]),r.query&&!e.query&&(e.query=r.queryKey),l.socket(r.path,e)}Object.assign(Cc,{Manager:_p,Socket:_T,io:Cc,connect:Cc});const wT=O.createContext(null);function O6({children:t}){const[e,r]=O.useState(null);return O.useEffect(()=>{const n=Cc("http://localhost:3002");return r(n),()=>{n.close()}},[]),u.jsx(wT.Provider,{value:e,children:t})}function gl(){return O.useContext(wT)}function D6(){const[t,e]=O.useState({users:0,vendors:0,bookings:0,revenue:0,pendingBookings:0,verifiedVendors:0}),[r,n]=O.useState([]),[s,i]=O.useState(!0),o=gl();O.useEffect(()=>{if(a(),o){const h=()=>{a()};return o.on("booking-updated",h),o.on("vendor-status-changed",h),o.on("user-status-changed",h),o.on("report-updated",h),()=>{o.off("booking-updated",h),o.off("vendor-status-changed",h),o.off("user-status-changed",h),o.off("report-updated",h)}}},[o]);const a=async()=>{try{if(t.users===0&&i(!0),!is){const h=await ue("/admin/analytics"),d=await ue("/admin/bookings"),p=await ue("/admin/users"),m=await ue("/admin/vendors");e({users:p.length||0,vendors:m.length||0,bookings:d.length||0,revenue:h.totalRevenue||d.length*150,pendingBookings:d.filter(y=>y.status==="pending").length,verifiedVendors:m.filter(y=>y.is_verified||y.verified).length}),n(d.slice(-5).reverse())}}catch(h){console.error("Error fetching admin stats:",h)}finally{i(!1)}};if(s)return u.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});const l=[{label:"Total Users",value:t.users,color:"blue",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},{label:"Active Vendors",value:t.vendors,sub:`${t.verifiedVendors} verified`,color:"green",icon:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},{label:"Platform Bookings",value:t.bookings,sub:`${t.pendingBookings} pending`,color:"purple",icon:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},{label:"Total Revenue",value:`$${t.revenue.toLocaleString()}`,color:"amber",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}];return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Platform Overview"}),u.jsx("p",{className:"text-slate-500 mt-1",children:"Real-time statistics and activities."})]}),u.jsx("div",{className:"grid grid-cols-1 xs:grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:l.map((h,d)=>u.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow",children:[u.jsx("div",{className:"flex items-center justify-between mb-2 md:mb-4",children:u.jsx("div",{className:`p-2 md:p-3 rounded-xl bg-${h.color}-50 text-${h.color}-600`,children:u.jsx("svg",{className:"w-5 h-5 md:w-6 md:h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:h.icon})})})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs md:text-sm font-medium text-slate-500",children:h.label}),u.jsx("h3",{className:"text-lg md:text-2xl font-bold text-slate-900 mt-1",children:h.value}),h.sub&&u.jsx("p",{className:"text-[10px] md:text-xs text-slate-400 mt-1",children:h.sub})]})]},d))}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Recent Activity"}),u.jsx(oe,{to:"/admin/bookings",className:"text-sm text-primary-600 hover:underline font-medium",children:"View All"})]}),r.length===0?u.jsx("div",{className:"text-center py-12 text-slate-400",children:"No recent activity found."}):u.jsx("div",{className:"space-y-4",children:r.map(h=>{var d;return u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-4 rounded-xl bg-slate-50 border border-slate-100 gap-3",children:[u.jsxs("div",{className:"flex items-center space-x-4 min-w-0",children:[u.jsx("div",{className:"h-10 w-10 shrink-0 rounded-full bg-white border border-slate-200 flex items-center justify-center text-primary-600 font-bold",children:(d=h.userName)==null?void 0:d[0]}),u.jsxs("div",{className:"min-w-0",children:[u.jsxs("p",{className:"text-sm font-semibold text-slate-900 truncate",children:[h.userName," ",u.jsx("span",{className:"text-slate-400 font-normal",children:"booked"})," ",h.vendorName]}),u.jsx("p",{className:"text-xs text-slate-500",children:new Date(h.createdAt).toLocaleString()})]})]}),u.jsx("span",{className:`self-start sm:self-auto px-2.5 py-1 rounded-full text-xs font-medium ${h.status==="confirmed"?"bg-green-100 text-green-700":h.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:h.status})]},h.id)})})]}),u.jsxs("div",{className:"bg-gradient-to-br from-primary-600 to-primary-800 rounded-2xl shadow-xl p-8 text-white flex flex-col justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold mb-2",children:"Admin Quick Start"}),u.jsx("p",{className:"text-primary-100 text-sm leading-relaxed",children:"Efficiently manage your platform's users, vendors, and business transactions from this master control center."})]}),u.jsxs("div",{className:"space-y-3 mt-8",children:[u.jsx(oe,{to:"/admin/vendors",className:"block w-full py-3 bg-white/10 hover:bg-white/20 rounded-xl text-center font-medium transition-colors border border-white/20",children:"Verify New Vendors"}),u.jsx(oe,{to:"/admin/users",className:"block w-full py-3 bg-white/10 hover:bg-white/20 rounded-xl text-center font-medium transition-colors border border-white/20",children:"Review User Reports"})]})]})]})]})}function L6(){const[t,e]=O.useState([]),[r,n]=O.useState(!0),[s,i]=O.useState(""),[o,a]=O.useState(null),l=gl();O.useEffect(()=>(h(),l&&l.on("vendor-status-changed",b=>{e(I=>I.map(w=>w.id===b.vendorId?{...w,...b}:w))}),()=>{l&&l.off("vendor-status-changed")}),[l]);const h=async()=>{try{if(n(!0),!is){const b=await ue("/admin/vendors");e(b)}}catch(b){console.error("Error fetching vendors:",b)}finally{n(!1)}},d=async(b,I)=>{try{await ue(`/admin/vendors/${b}`,{method:"PATCH",body:JSON.stringify({is_verified:!I})})}catch(w){console.error("Error updating vendor:",w)}},p=async(b,I)=>{try{await ue(`/admin/vendors/${b}`,{method:"PATCH",body:JSON.stringify({is_suspended:!I})})}catch(w){console.error("Error suspending vendor:",w)}},m=async b=>{if(b.preventDefault(),!!o)try{await ue(`/admin/vendors/${o.id}`,{method:"PATCH",body:JSON.stringify(o)}),a(null)}catch(I){console.error("Error updating vendor:",I)}},y=async b=>{if(confirm("Are you sure you want to delete this vendor?"))try{await ue(`/admin/vendors/${b}`,{method:"DELETE"}),h()}catch(I){console.error("Error deleting vendor:",I)}},_=t.filter(b=>b.business_name.toLowerCase().includes(s.toLowerCase())||b.category.toLowerCase().includes(s.toLowerCase())||b.location.toLowerCase().includes(s.toLowerCase()));return r?u.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading vendors..."}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Manage Vendors"}),u.jsxs("div",{className:"relative w-full sm:w-64",children:[u.jsx("input",{type:"text",placeholder:"Search vendors...",className:"input pl-10 w-full",value:s,onChange:b=>i(b.target.value)}),u.jsx("svg",{className:"w-5 h-5 text-slate-400 absolute left-3 top-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),u.jsxs("div",{className:"bg-white shadow-sm border border-slate-200 rounded-lg overflow-hidden overflow-x-auto",children:[u.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[u.jsx("thead",{className:"bg-slate-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Business"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Category"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:_.map(b=>u.jsxs("tr",{children:[u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[u.jsx("div",{className:"text-sm font-medium text-slate-900",children:b.business_name}),u.jsx("div",{className:"text-xs text-slate-500",children:b.location})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-slate-100 text-slate-800",children:b.category})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap space-x-2",children:[u.jsx("button",{onClick:()=>d(b.id,!!b.is_verified),className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full cursor-pointer hover:opacity-80 transition-opacity ${b.is_verified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:b.is_verified?"Verified":"Pending"}),u.jsx("button",{onClick:()=>p(b.id,!!b.is_suspended),className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full cursor-pointer hover:opacity-80 transition-opacity ${b.is_suspended?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:b.is_suspended?"Suspended":"Active"})]}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[u.jsx("button",{className:"text-primary-600 hover:text-primary-900",onClick:()=>a(b),children:"Edit"}),u.jsx("button",{className:"text-red-600 hover:text-red-900",onClick:()=>y(b.id),children:"Delete"})]})]},b.id))})]}),_.length===0&&u.jsx("div",{className:"p-12 text-center text-slate-500",children:"No vendors matched your search."})]}),o&&u.jsx("div",{className:"fixed inset-0 bg-slate-900/50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full p-8",children:[u.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-6",children:"Edit Vendor"}),u.jsxs("form",{onSubmit:m,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Business Name"}),u.jsx("input",{type:"text",className:"input w-full",value:o.business_name,onChange:b=>a({...o,business_name:b.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Category"}),u.jsx("input",{type:"text",className:"input w-full",value:o.category,onChange:b=>a({...o,category:b.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Location"}),u.jsx("input",{type:"text",className:"input w-full",value:o.location,onChange:b=>a({...o,location:b.target.value})})]}),u.jsxs("div",{className:"flex gap-4 mt-8",children:[u.jsx(pe,{type:"button",variant:"outline",className:"flex-1",onClick:()=>a(null),children:"Cancel"}),u.jsx(pe,{type:"submit",className:"flex-1",children:"Save Changes"})]})]})]})})]})}function V6(){const[t,e]=O.useState([]),[r,n]=O.useState(!0),[s,i]=O.useState(""),o=gl();O.useEffect(()=>(a(),o&&o.on("user-status-changed",m=>{e(y=>y.map(_=>_.id===m.userId?{..._,...m}:_))}),()=>{o&&o.off("user-status-changed")}),[o]);const a=async()=>{try{if(n(!0),!is){const m=await ue("/admin/users");e(m)}}catch(m){console.error("Error fetching users:",m)}finally{n(!1)}},l=async(m,y)=>{try{await ue(`/admin/users/${m}/role`,{method:"PATCH",body:JSON.stringify({role:y})})}catch(_){console.error("Error updating role:",_)}},h=async(m,y)=>{try{await ue(`/admin/users/${m}/status`,{method:"PATCH",body:JSON.stringify({is_suspended:!y})})}catch(_){console.error("Error updating status:",_)}},d=async m=>{if(confirm("Are you sure you want to delete this user? This action is irreversible."))try{await ue(`/admin/users/${m}`,{method:"DELETE"}),e(y=>y.filter(_=>_.id!==m))}catch(y){console.error("Error deleting user:",y)}},p=t.filter(m=>{var y,_;return((y=m.full_name)==null?void 0:y.toLowerCase().includes(s.toLowerCase()))||((_=m.email)==null?void 0:_.toLowerCase().includes(s.toLowerCase()))});return r?u.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading users..."}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900 font-serif",children:"Manage Platform Users"}),u.jsxs("div",{className:"relative w-full sm:w-80",children:[u.jsx("input",{type:"text",placeholder:"Search by name or email...",className:"input pl-10 w-full bg-white/50 backdrop-blur-sm focus:bg-white transition-all border-slate-200",value:s,onChange:m=>i(m.target.value)}),u.jsx("svg",{className:"w-5 h-5 text-slate-400 absolute left-3 top-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),u.jsxs("div",{className:"bg-white/80 backdrop-blur-md shadow-xl border border-white/20 rounded-2xl overflow-hidden overflow-x-auto",children:[u.jsxs("table",{className:"min-w-full divide-y divide-slate-100",children:[u.jsx("thead",{className:"bg-slate-50/50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-widest",children:"User Details"}),u.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Role & Status"}),u.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Administrative Actions"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100",children:p.map(m=>{var y,_;return u.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:`h-12 w-12 flex-shrink-0 rounded-2xl flex items-center justify-center font-bold text-lg shadow-sm ${m.role==="admin"?"bg-indigo-100 text-indigo-700":m.role==="vendor"?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"}`,children:((_=(y=m.full_name)==null?void 0:y[0])==null?void 0:_.toUpperCase())||"?"}),u.jsxs("div",{className:"ml-4",children:[u.jsx("div",{className:"text-sm font-semibold text-slate-900",children:m.full_name}),u.jsx("div",{className:"text-xs text-slate-500",children:m.email})]})]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("select",{className:"text-xs font-medium border-slate-200 bg-white rounded-lg px-3 py-1.5 focus:ring-2 focus:ring-primary-500 w-32 shadow-sm",value:m.role,onChange:b=>l(m.id,b.target.value),children:[u.jsx("option",{value:"couple",children:"Couple"}),u.jsx("option",{value:"vendor",children:"Vendor"}),u.jsx("option",{value:"admin",children:"Admin"})]}),u.jsx("button",{onClick:()=>h(m.id,!!m.is_suspended),className:`w-32 py-1 px-3 rounded-lg text-[10px] uppercase tracking-tighter font-bold transition-all shadow-sm ${m.is_suspended?"bg-red-500 text-white hover:bg-red-600":"bg-green-500 text-white hover:bg-green-600"}`,children:m.is_suspended?"Suspended":"Active Account"})]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:u.jsx("div",{className:"flex justify-end items-center gap-3",children:u.jsx(pe,{variant:"ghost",className:"text-slate-400 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-all p-2 rounded-xl hover:bg-red-50",onClick:()=>d(m.id),title:"Delete User",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})})]},m.id)})})]}),p.length===0&&u.jsxs("div",{className:"p-16 text-center",children:[u.jsx("div",{className:"mx-auto w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4",children:u.jsx("svg",{className:"w-8 h-8 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),u.jsx("p",{className:"text-slate-500 font-medium",children:"No members found matching your search."})]})]})]})}function M6(){const[t,e]=O.useState([]),[r,n]=O.useState(!0),[s,i]=O.useState("all"),o=gl();O.useEffect(()=>(a(),o&&o.on("booking-updated",p=>{e(m=>m.map(y=>y.id===p.bookingId?{...y,status:p.status}:y))}),()=>{o&&o.off("booking-updated")}),[o]);const a=async()=>{try{if(n(!0),!is){const p=await ue("/admin/bookings");e(p)}}catch(p){console.error("Error fetching bookings:",p)}finally{n(!1)}},l=async(p,m)=>{try{await ue(`/admin/bookings/${p}/status`,{method:"PATCH",body:JSON.stringify({status:m})})}catch(y){console.error("Error updating status:",y)}},h=async p=>{if(confirm("Are you sure you want to delete this booking?"))try{await ue(`/admin/bookings/${p}`,{method:"DELETE"}),a()}catch(m){console.error("Error deleting booking:",m)}},d=t.filter(p=>s==="all"?!0:p.status===s);return r?u.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading bookings..."}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Platform Bookings"}),u.jsx("div",{className:"flex flex-wrap gap-2 w-full sm:w-auto",children:["all","pending","confirmed","cancelled"].map(p=>u.jsx("button",{onClick:()=>i(p),className:`flex-1 sm:flex-none px-3 py-2 rounded-lg text-xs font-medium transition-colors ${s===p?"bg-primary-600 text-white":"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50"}`,children:p.charAt(0).toUpperCase()+p.slice(1)},p))})]}),u.jsxs("div",{className:"bg-white shadow-sm border border-slate-200 rounded-lg overflow-hidden overflow-x-auto",children:[u.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[u.jsx("thead",{className:"bg-slate-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Booking ID"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Couple"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Vendor"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Date"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:d.map(p=>u.jsxs("tr",{children:[u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-slate-500",children:["#",p.id.slice(0,8)]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("div",{className:"text-sm font-medium text-slate-900",children:p.userName})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("div",{className:"text-sm text-slate-900",children:p.vendorName})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("div",{className:"text-sm text-slate-500",children:new Date(p.date).toLocaleDateString()})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="confirmed"?"bg-green-100 text-green-800":p.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:p.status.toUpperCase()})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:u.jsxs("div",{className:"flex justify-end gap-2",children:[p.status==="pending"&&u.jsxs(u.Fragment,{children:[u.jsx(pe,{size:"sm",onClick:()=>l(p.id,"confirmed"),className:"bg-green-600 hover:bg-green-700 text-white",children:"Confirm"}),u.jsx(pe,{size:"sm",variant:"ghost",onClick:()=>l(p.id,"cancelled"),className:"text-red-600 hover:bg-red-50",children:"Cancel"})]}),p.status==="confirmed"&&u.jsx(pe,{size:"sm",variant:"outline",onClick:()=>l(p.id,"cancelled"),className:"text-red-600 border-red-200 hover:bg-red-50",children:"Cancel"}),u.jsx(pe,{size:"sm",variant:"ghost",className:"text-slate-400 hover:text-red-600",onClick:()=>h(p.id),children:u.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},p.id))})]}),d.length===0&&u.jsx("div",{className:"p-12 text-center text-slate-500",children:"No bookings found for this status."})]})]})}function U6(){const[t,e]=O.useState({platformName:"Bliss Wedding Planner",contactEmail:"admin@bliss.com",maintenanceMode:!1,allowVendorRegistration:!0}),[r,n]=O.useState(!1),s=async i=>{i.preventDefault(),n(!0),await new Promise(o=>setTimeout(o,1e3)),n(!1),alert("Settings saved successfully!")};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Platform Settings"}),u.jsx("p",{className:"text-slate-500 mt-1",children:"Configure general platform options and details."})]}),u.jsx("div",{className:"bg-white shadow-sm border border-slate-200 rounded-lg p-6 max-w-2xl",children:u.jsxs("form",{onSubmit:s,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Platform Name"}),u.jsx("input",{type:"text",className:"input w-full",value:t.platformName,onChange:i=>e({...t,platformName:i.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Contact Email"}),u.jsx("input",{type:"email",className:"input w-full",value:t.contactEmail,onChange:i=>e({...t,contactEmail:i.target.value})})]}),u.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-100",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-slate-900",children:"Maintenance Mode"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Temporarily disable the platform for non-admin users."})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.maintenanceMode,onChange:i=>e({...t,maintenanceMode:i.target.checked})}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-slate-900",children:"Allow Vendor Registration"}),u.jsx("p",{className:"text-sm text-slate-500",children:"New vendors can sign up effectively."})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.allowVendorRegistration,onChange:i=>e({...t,allowVendorRegistration:i.target.checked})}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]}),u.jsx("div",{className:"pt-4",children:u.jsx(pe,{type:"submit",disabled:r,children:r?"Saving...":"Save Changes"})})]})})]})}function $6(){var h,d,p;const{profile:t,loading:e,logout:r}=Bt(),n=rs(),s=so(),[i,o]=O.useState(!1);if(O.useEffect(()=>{!e&&(!t||t.role!=="vendor")&&n("/")},[t,e,n]),e)return u.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading Vendor Portal..."});const a=[{to:"/vendor/dashboard",label:"Dashboard",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{to:"/vendor/services",label:"My Services",icon:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"},{to:"/vendor/enquiries",label:"Enquiries",icon:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"},{to:"/vendor/bookings",label:"Bookings",icon:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},{to:"/vendor/profile",label:"Profile Settings",icon:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"}],l=async()=>{await r(),n("/")};return u.jsxs("div",{className:"flex h-screen bg-slate-50 relative overflow-hidden",children:[u.jsxs("header",{className:"md:hidden fixed top-0 left-0 right-0 h-16 bg-white border-b border-slate-200 px-4 flex items-center justify-between z-40 shadow-sm",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"font-serif text-xl font-bold text-primary-600",children:"Bliss"}),u.jsx("span",{className:"text-[10px] bg-primary-50 text-primary-600 px-2 py-0.5 rounded-full font-bold uppercase tracking-wider",children:"Vendor"})]}),u.jsx("button",{onClick:()=>o(!i),className:"p-2 text-slate-500 hover:bg-slate-50 rounded-lg transition-colors",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:i?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]}),i&&u.jsx("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-40 md:hidden",onClick:()=>o(!1)}),u.jsxs("aside",{className:`
                fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-slate-200 flex flex-col flex-shrink-0 shadow-xl transition-all duration-300 ease-in-out md:translate-x-0 md:relative md:shadow-none
                ${i?"translate-x-0":"-translate-x-full"}
            `,children:[u.jsxs("div",{className:"p-6 border-b border-slate-100 hidden md:block",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("h1",{className:"text-2xl font-bold font-serif text-primary-600 tracking-tight",children:"Bliss"}),u.jsx("span",{className:"text-[10px] bg-primary-50 text-primary-600 px-2 py-0.5 rounded-full font-bold uppercase tracking-wider",children:"Vendor"})]}),u.jsx("p",{className:"text-[10px] text-slate-400 mt-1 uppercase tracking-[0.2em] font-bold",children:"Workspace Manager"})]}),u.jsx("div",{className:"md:hidden p-6 border-b border-slate-100 bg-slate-50/50",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-600 flex items-center justify-center text-white font-bold shadow-soft",children:((h=t==null?void 0:t.name)==null?void 0:h[0])||"V"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-slate-800 text-sm leading-tight",children:(t==null?void 0:t.name)||"Vendor"}),u.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:t==null?void 0:t.email})]})]})}),u.jsx("nav",{className:"flex-1 px-4 py-8 space-y-1 overflow-y-auto",children:a.map(m=>{const y=s.pathname===m.to;return u.jsxs(oe,{to:m.to,onClick:()=>o(!1),className:`flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 group ${y?"bg-primary-600 text-white shadow-lg shadow-primary-200":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[u.jsx("svg",{className:`w-5 h-5 transition-colors ${y?"text-white":"text-slate-400 group-hover:text-slate-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:m.icon})}),u.jsx("span",{children:m.label})]},m.to)})}),u.jsx("div",{className:"p-4 border-t border-slate-100",children:u.jsxs("button",{onClick:l,className:"flex items-center space-x-3 w-full px-4 py-3 rounded-xl text-sm font-bold text-slate-500 hover:bg-red-50 hover:text-red-600 transition-all duration-300",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),u.jsx("span",{children:"Sign Out"})]})})]}),u.jsxs("main",{className:"flex-1 overflow-y-auto bg-slate-50 relative pt-16 md:pt-0",children:[u.jsxs("header",{className:"sticky top-0 z-30 bg-white/80 backdrop-blur-md border-b border-slate-200 px-8 py-4 hidden md:flex justify-between items-center",children:[u.jsx("h2",{className:"text-slate-900 font-bold uppercase tracking-widest text-xs",children:((d=a.find(m=>m.to===s.pathname))==null?void 0:d.label)||"Vendor Panel"}),u.jsx("div",{className:"flex items-center space-x-4",children:u.jsxs("div",{className:"flex items-center space-x-3 bg-slate-50 px-4 py-2 rounded-full border border-slate-100",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-600 flex items-center justify-center text-white font-bold text-xs shadow-sm",children:((p=t==null?void 0:t.name)==null?void 0:p[0])||"V"}),u.jsxs("div",{className:"hidden lg:block text-left",children:[u.jsx("p",{className:"text-[11px] font-bold text-slate-800 leading-none",children:(t==null?void 0:t.name)||"Vendor Partner"}),u.jsx("p",{className:"text-[9px] text-slate-400 mt-1 uppercase tracking-wider font-bold",children:"Verified Vendor"})]})]})})]}),u.jsx("div",{className:"p-4 md:p-8 max-w-7xl mx-auto w-full min-h-full",children:u.jsx(_m,{})}),u.jsx(cg,{})]})]})}function F6(){const{user:t}=Bt(),[e,r]=O.useState({bookings:0,enquiries:0,rating:0,views:0}),[n,s]=O.useState([]),[i,o]=O.useState([]),[a,l]=O.useState(!0);O.useEffect(()=>{t&&h()},[t]);const h=async()=>{if(t){l(!0);try{if(!is)try{const m=await ue(`/vendors/user/${t.uid}`).catch(()=>null),y=m?m.id:t.uid,_=await ue(`/vendors/${y}/analytics`).catch(()=>({totalBookings:0,confirmedBookings:0,pendingBookings:0,totalRevenue:0,averageRating:0,totalReviews:0})),b=await ue(`/enquiries/vendor/${y}`).catch(()=>[]),I=await ue(`/bookings?vendorId=${y}`).catch(()=>[]);r({bookings:_.totalBookings||0,enquiries:b.length||0,rating:_.averageRating||0,views:450}),s(b.slice(0,5).map(w=>({id:w.id,message:w.message,status:w.status==="pending"?"unread":"read",created_at:w.createdAt,vendor_id:w.vendorId}))),o(I.slice(0,5).map(w=>({id:w.id,date:w.date,status:w.status,vendor_id:w.vendorId,user_id:w.userId}))),l(!1);return}catch(m){console.warn("Local API failed for vendor dashboard:",m)}const d=R1(ya,"vendors",t.uid),p=await U1(d);if(p.exists()){const m=p.data(),y=tp(ya,"bookings"),_=Yo(y,si("vendor_id","==",t.uid)),I=(await Zo(_)).size,w=tp(ya,"enquiries"),v=Yo(w,si("vendor_id","==",t.uid)),R=(await Zo(v)).size;r({bookings:I||0,enquiries:R||0,rating:m.rating||0,views:124});const D=Yo(w,si("vendor_id","==",t.uid),YO("created_at","desc"),p_(5)),V=await Zo(D);s(V.docs.map(k=>({id:k.id,...k.data()})));const S=Yo(y,si("vendor_id","==",t.uid),si("date",">=",new Date().toISOString().split("T")[0]),p_(5)),T=await Zo(S);o(T.docs.map(k=>({id:k.id,...k.data()})))}}catch(d){console.error("Error fetching dashboard data:",d)}finally{l(!1)}}};return a?u.jsx("div",{children:"Loading dashboard..."}):u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Vendor Dashboard"}),u.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:"Verified Vendor"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[u.jsx("h3",{className:"text-slate-500 text-sm font-medium",children:"Active Bookings"}),u.jsx("p",{className:"text-3xl font-bold text-slate-900 mt-2",children:e.bookings})]}),u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[u.jsx("h3",{className:"text-slate-500 text-sm font-medium",children:"New Enquiries"}),u.jsx("p",{className:"text-3xl font-bold text-slate-900 mt-2",children:e.enquiries})]}),u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[u.jsx("h3",{className:"text-slate-500 text-sm font-medium",children:"Average Rating"}),u.jsxs("p",{className:"text-3xl font-bold text-yellow-500 mt-2",children:[e.rating," "]})]}),u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[u.jsx("h3",{className:"text-slate-500 text-sm font-medium",children:"Profile Views"}),u.jsx("p",{className:"text-3xl font-bold text-primary-600 mt-2",children:e.views})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Enquiries"}),n.length===0?u.jsx("p",{className:"text-slate-500 text-center py-8",children:"No new enquiries."}):u.jsx("div",{className:"space-y-4",children:n.map(d=>u.jsxs("div",{className:"border-b border-slate-100 pb-4 last:border-0 last:pb-0",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("p",{className:"text-sm text-slate-900 font-medium truncate",children:d.message}),u.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${d.status==="unread"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:d.status})]}),u.jsxs("div",{className:"flex justify-between items-center mt-2",children:[u.jsx("p",{className:"text-xs text-slate-500",children:new Date(d.created_at).toLocaleDateString()}),u.jsx(oe,{to:`/negotiation/${d.id}`,className:"text-xs bg-primary-50 text-primary-700 px-2 py-1 rounded hover:bg-primary-100 font-medium transition-colors",children:"Negotiate"})]})]},d.id))})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Upcoming Bookings"}),i.length===0?u.jsx("p",{className:"text-slate-500 text-center py-8",children:"No upcoming bookings."}):u.jsx("div",{className:"space-y-4",children:i.map(d=>u.jsxs("div",{className:"border-b border-slate-100 pb-4 last:border-0 last:pb-0",children:[u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsxs("span",{className:"font-medium text-slate-900",children:["Booking #",d.id.slice(0,8)]}),u.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${d.status==="confirmed"?"bg-green-100 text-green-700":d.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-slate-100 text-slate-700"}`,children:d.status})]}),u.jsxs("div",{className:"flex justify-between mt-1 text-sm text-slate-600 items-center",children:[u.jsxs("span",{children:["Date: ",new Date(d.date).toLocaleDateString()]}),u.jsx(oe,{to:`/negotiation/${d.id}`,className:"text-xs text-primary-600 hover:text-primary-800 font-medium",children:"Negotiate"})]})]},d.id))})]})]})]})}function B6(){const{user:t}=Bt(),[e,r]=O.useState([]),[n,s]=O.useState(!0),[i,o]=O.useState(!1),[a,l]=O.useState({}),[h,d]=O.useState(null);O.useEffect(()=>{t&&p()},[t]);const p=async()=>{if(t)try{if(!is){d("mock-v1"),r([{id:"ms1",name:"Premium Package",description:"Full wedding day coverage",price:2500,discount_percentage:10,availability:"2026-06-12 to 2026-12-31",image_url:"https://images.unsplash.com/photo-1511795409834-ef04bbd61622?auto=format&fit=crop&w=400",vendor_id:"mock-v1"},{id:"ms2",name:"Engagement Session",description:"2-hour outdoor session",price:500,availability:"Always Available",image_url:"https://images.unsplash.com/photo-1519741497674-611481863552?auto=format&fit=crop&w=400",vendor_id:"mock-v1"}]),s(!1);return}const _=R1(ya,"vendors",t.uid),b=await U1(_);if(b.exists()){d(b.id);const I=tp(ya,"services"),w=Yo(I,si("vendor_id","==",t.uid)),v=await Zo(w);r(v.docs.map(E=>({id:E.id,...E.data()})))}}catch(_){console.error("Error fetching services:",_)}finally{s(!1)}},m=async _=>{if(_.preventDefault(),!!h){a.id?r(e.map(b=>b.id===a.id?{...b,...a}:b)):r([...e,{...a,id:"ms"+Date.now(),vendor_id:h}]),o(!1),l({});return}},y=async _=>{if(confirm("Delete this service?")){r(e.filter(b=>b.id!==_));return}};return n?u.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading services..."}):h?u.jsxs("div",{className:"max-w-6xl mx-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-8",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900 font-serif",children:"Service Management"}),u.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Add and manage your wedding services and pricing"})]}),u.jsxs(pe,{onClick:()=>{o(!0),l({})},className:"flex items-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add New Service"]})]}),i&&u.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md border border-slate-100 mb-8 animate-in fade-in slide-in-from-top-4 duration-300",children:[u.jsx("h3",{className:"text-lg font-semibold mb-6 flex items-center gap-2",children:a.id?"Edit Service":"Create New Service"}),u.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Service Name"}),u.jsx(Qt,{value:a.name||"",onChange:_=>l({...a,name:_.target.value}),placeholder:"e.g., Full Wedding Photography Package",required:!0})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),u.jsx("textarea",{className:"w-full rounded-lg border-slate-200 focus:border-primary-500 focus:ring-primary-500 min-h-[100px] transition-shadow duration-200",value:a.description||"",onChange:_=>l({...a,description:_.target.value}),placeholder:"Describe what you offer in this service...",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Base Price ($)"}),u.jsx(Qt,{type:"number",value:a.price||"",onChange:_=>l({...a,price:parseFloat(_.target.value)}),placeholder:"0.00",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Discount Percentage (%)"}),u.jsx(Qt,{type:"number",value:a.discount_percentage||"",onChange:_=>l({...a,discount_percentage:parseFloat(_.target.value)}),placeholder:"0",min:"0",max:"100"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Image URL"}),u.jsx(Qt,{type:"url",value:a.image_url||"",onChange:_=>l({...a,image_url:_.target.value}),placeholder:"https://example.com/image.jpg"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Availability"}),u.jsx(Qt,{type:"text",value:a.availability||"",onChange:_=>l({...a,availability:_.target.value}),placeholder:"e.g., Always Available or Seasonally"})]}),u.jsxs("div",{className:"md:col-span-2 flex justify-end space-x-3 pt-4 border-t border-slate-50 mt-4",children:[u.jsx(pe,{type:"button",variant:"ghost",onClick:()=>o(!1),children:"Cancel"}),u.jsx(pe,{type:"submit",children:a.id?"Update Service":"Save Service"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.map(_=>u.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300 border border-slate-100 flex flex-col",children:[u.jsxs("div",{className:"h-48 relative overflow-hidden bg-slate-100",children:[_.image_url?u.jsx("img",{src:_.image_url,alt:_.name,className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:u.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),_.discount_percentage&&u.jsxs("div",{className:"absolute top-4 right-4 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow-lg",children:[_.discount_percentage,"% OFF"]})]}),u.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 line-clamp-1",children:_.name}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("button",{onClick:()=>{l(_),o(!0),window.scrollTo({top:0,behavior:"smooth"})},className:"p-1.5 text-slate-400 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),u.jsx("button",{onClick:()=>y(_.id),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("span",{className:"text-2xl font-bold text-primary-600",children:["$",_.price]}),_.discount_percentage&&u.jsxs("span",{className:"text-sm text-slate-400 line-through ml-2",children:["$",(_.price/(1-_.discount_percentage/100)).toFixed(0)]})]}),u.jsx("p",{className:"text-slate-600 text-sm line-clamp-3 mb-4 flex-1",children:_.description}),u.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-500 border-t border-slate-50 pt-4",children:[u.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),u.jsx("span",{children:_.availability||"Always Available"})]})]})]},_.id)),e.length===0&&!i&&u.jsxs("div",{className:"md:col-span-2 py-20 bg-white rounded-2xl border-2 border-dashed border-slate-200 flex flex-col items-center justify-center text-center px-4",children:[u.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-4",children:u.jsx("svg",{className:"w-8 h-8 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),u.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"No Services Yet"}),u.jsx("p",{className:"text-slate-500 max-w-xs mx-auto mt-1",children:"Start adding services to showcase your expertise to couples."}),u.jsx(pe,{onClick:()=>o(!0),className:"mt-6",children:"Add Your First Service"})]})]})]}):u.jsxs("div",{className:"text-center py-12",children:[u.jsx("h3",{className:"text-lg font-medium text-slate-900",children:"Vendor Profile Not Found"}),u.jsx("p",{className:"text-slate-500 mt-2",children:"Please complete your vendor profile first."}),u.jsx(pe,{className:"mt-4",onClick:()=>{},children:"Create Profile"})]})}function z6(){const{user:t}=Bt(),[e,r]=O.useState([]),[n,s]=O.useState(!0);O.useEffect(()=>{t&&i()},[t]);const i=async()=>{if(t)try{if(!is){r([{id:"enq1",message:"Interested in your Premium Photography package for August 2026.",status:"pending",created_at:new Date().toISOString(),user_name:"Sarah & Mark",user_email:"sarah@example.com",vendor_id:t.uid},{id:"enq2",message:"Do you offer custom packages for smaller weddings?",status:"responded",created_at:new Date(Date.now()-864e5).toISOString(),user_name:"Jessica Thompson",user_email:"jessica@example.com",vendor_id:t.uid}]),s(!1);return}const o=await ue(`/enquiries/vendor/${t.uid}`).catch(()=>[]);r(o.map(a=>({id:a.id,message:a.message,status:a.status||"pending",created_at:a.createdAt,user_name:a.userName||"Anonymous",user_email:a.userEmail||"",vendor_id:a.vendorId})))}catch(o){console.error("Error fetching enquiries:",o)}finally{s(!1)}};return n?u.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading enquiries..."}):u.jsxs("div",{className:"max-w-6xl mx-auto",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900 font-serif",children:"Customer Enquiries"}),u.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Manage and respond to your latest business opportunities"})]}),u.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Customer"}),u.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Inquiry"}),u.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Date"}),u.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Status"}),u.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider text-right",children:"Action"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-50",children:e.map(o=>u.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-50 text-primary-600 flex items-center justify-center font-bold text-lg",children:o.user_name[0]}),u.jsxs("div",{className:"ml-4",children:[u.jsx("div",{className:"text-sm font-bold text-slate-900",children:o.user_name}),u.jsx("div",{className:"text-xs text-slate-500",children:o.user_email})]})]})}),u.jsx("td",{className:"px-6 py-4",children:u.jsx("p",{className:"text-sm text-slate-600 line-clamp-1 max-w-xs",children:o.message})}),u.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:new Date(o.created_at).toLocaleDateString()}),u.jsx("td",{className:"px-6 py-4",children:u.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${o.status==="pending"?"bg-amber-100 text-amber-700":o.status==="responded"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:o.status.charAt(0).toUpperCase()+o.status.slice(1)})}),u.jsx("td",{className:"px-6 py-4 text-right",children:u.jsx("a",{href:`/negotiation/${o.id}`,className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700 transition-colors shadow-sm",children:"Negotiate"})})]},o.id))})]})}),e.length===0&&u.jsxs("div",{className:"py-20 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx("svg",{className:"w-8 h-8 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),u.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"No Inquiries Found"}),u.jsx("p",{className:"text-slate-500 mt-1",children:"When couples contact you, their messages will appear here."})]})]})]})}function q6(){const[t,e]=O.useState([]),[r,n]=O.useState(!0);Bt(),O.useEffect(()=>{s()},[]);const s=async()=>{try{const o=await ue("/vendors/bookings");e(o||[])}catch(o){console.error("Failed to fetch bookings",o)}finally{n(!1)}},i=async(o,a)=>{try{await ue(`/vendors/bookings/${o}/status`,{method:"PATCH",body:JSON.stringify({status:a})}),s()}catch(l){console.error("Failed to update status",l)}};return r?u.jsx("div",{className:"p-10 text-center text-slate-500",children:"Loading bookings..."}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex justify-between items-center bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold font-serif text-slate-900",children:"Bookings"}),u.jsx("p",{className:"text-slate-500 mt-1",children:"Manage your wedding reservations and client deals"})]}),u.jsxs("div",{className:"bg-primary-50 text-primary-700 px-4 py-2 rounded-full text-sm font-bold",children:[t.length," Total Bookings"]})]}),u.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden text-slate-900",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{className:"bg-slate-50/50 border-b border-slate-100",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-400 uppercase tracking-widest leading-none",children:"Client"}),u.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-400 uppercase tracking-widest leading-none",children:"Service"}),u.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-400 uppercase tracking-widest leading-none",children:"Event Date"}),u.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-400 uppercase tracking-widest leading-none",children:"Price"}),u.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-400 uppercase tracking-widest leading-none",children:"Status"}),u.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-400 uppercase tracking-widest leading-none text-right",children:"Actions"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-50",children:t.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-slate-400 italic",children:"No bookings found"})}):t.map(o=>{var a;return u.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-600 font-bold text-xs",children:(a=o.userName)==null?void 0:a.charAt(0)}),u.jsx("span",{className:"font-semibold text-slate-800",children:o.userName})]})}),u.jsx("td",{className:"px-6 py-4 text-slate-600 font-medium",children:o.serviceName}),u.jsx("td",{className:"px-6 py-4 text-slate-600 font-medium",children:new Date(o.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),u.jsx("td",{className:"px-6 py-4",children:u.jsxs("span",{className:"text-slate-900 font-bold",children:["$",o.price]})}),u.jsx("td",{className:"px-6 py-4",children:u.jsx("span",{className:`px-3 py-1 rounded-full text-[11px] font-bold uppercase tracking-wider ${o.status==="confirmed"?"bg-green-100 text-green-700":o.status==="pending"?"bg-yellow-100 text-yellow-700":o.status==="rejected"?"bg-red-100 text-red-700":"bg-slate-100 text-slate-600"}`,children:o.status})}),u.jsx("td",{className:"px-6 py-4 text-right",children:u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx(oe,{to:`/negotiation/${o.id}`,children:u.jsx(pe,{variant:"ghost",size:"sm",children:"Chat"})}),o.status==="pending"&&u.jsxs(u.Fragment,{children:[u.jsx(pe,{size:"sm",onClick:()=>i(o.id,"confirmed"),children:"Accept"}),u.jsx(pe,{variant:"outline",size:"sm",onClick:()=>i(o.id,"rejected"),children:"Reject"})]})]})})]},o.id)})})]})})})]})}function W6(){const{profile:t}=Bt(),[e,r]=O.useState(!1),[n,s]=O.useState(!1),[i,o]=O.useState(""),[a,l]=O.useState({name:"",businessName:"",email:"",phone:"",description:"",location:"",category:""});O.useEffect(()=>{t&&l({name:t.name||"",businessName:t.business_name||"",email:t.email||"",phone:t.phone||"",description:t.description||"",location:t.location||"",category:t.category||""})},[t]);const h=p=>{l(m=>({...m,[p.target.name]:p.target.value}))},d=async p=>{p.preventDefault(),r(!0),o(""),s(!1);try{await ue("/vendors/profile",{method:"PUT",body:JSON.stringify(a)}),s(!0)}catch(m){o(m.message||"Failed to update profile")}finally{r(!1)}};return u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold font-serif text-slate-900",children:"Profile Settings"}),u.jsx("p",{className:"text-slate-500 mt-2",children:"Manage your business profile and contact information"})]}),u.jsxs("form",{onSubmit:d,className:"space-y-6",children:[u.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden text-slate-900",children:[u.jsx("div",{className:"p-6 border-b border-slate-50 bg-slate-50/50",children:u.jsx("h2",{className:"font-bold text-slate-800",children:"Business Information"})}),u.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Business Name"}),u.jsx("input",{name:"businessName",value:a.businessName,onChange:h,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all outline-none",required:!0})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Category"}),u.jsxs("select",{name:"category",value:a.category,onChange:h,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all outline-none",required:!0,children:[u.jsx("option",{value:"",children:"Select a category"}),u.jsx("option",{value:"Photography",children:"Photography"}),u.jsx("option",{value:"Venue",children:"Venue"}),u.jsx("option",{value:"Catering",children:"Catering"}),u.jsx("option",{value:"Florist",children:"Florist"}),u.jsx("option",{value:"Music",children:"Music"}),u.jsx("option",{value:"Decor",children:"Decor"})]})]}),u.jsxs("div",{className:"md:col-span-2 space-y-2",children:[u.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Description"}),u.jsx("textarea",{name:"description",value:a.description,onChange:h,rows:4,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all outline-none resize-none",placeholder:"Tell couples about your services..."})]})]})]}),u.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden text-slate-900",children:[u.jsx("div",{className:"p-6 border-b border-slate-50 bg-slate-50/50",children:u.jsx("h2",{className:"font-bold text-slate-800",children:"Contact & Location"})}),u.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Contact Person"}),u.jsx("input",{name:"name",value:a.name,onChange:h,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all outline-none",required:!0})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Email Address"}),u.jsx("input",{name:"email",type:"email",value:a.email,onChange:h,className:"w-full px-4 py-2 border border-slate-200 rounded-lg bg-slate-50 text-slate-500 cursor-not-allowed",disabled:!0})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Phone Number"}),u.jsx("input",{name:"phone",value:a.phone,onChange:h,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all outline-none"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Location"}),u.jsx("input",{name:"location",value:a.location,onChange:h,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all outline-none",placeholder:"e.g. New York, NY"})]})]})]}),i&&u.jsx("div",{className:"p-4 bg-red-50 text-red-600 rounded-xl text-sm border border-red-100",children:i}),n&&u.jsx("div",{className:"p-4 bg-green-50 text-green-600 rounded-xl text-sm border border-green-100",children:"Profile updated successfully!"}),u.jsx("div",{className:"flex justify-end pt-4",children:u.jsx(pe,{type:"submit",loading:e,className:"px-10",children:"Save Changes"})})]})]})}function H6(){var o,a;const{user:t,profile:e,logout:r}=Bt(),[n,s]=O.useState(!1),i=()=>s(!1);return u.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-[100] bg-white/80 backdrop-blur-xl border-b border-slate-200/50",children:[u.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-12",children:u.jsxs("div",{className:"flex justify-between h-20",children:[u.jsxs("div",{className:"flex items-center space-x-12",children:[u.jsxs(oe,{to:"/",className:"flex items-center space-x-2 group",children:[u.jsx("span",{className:"font-serif text-3xl font-black text-primary-600 tracking-tighter group-hover:scale-105 transition-transform duration-300",children:"Bliss"}),u.jsx("div",{className:"h-2 w-2 rounded-full bg-primary-600 group-hover:animate-pulse"})]}),u.jsx("div",{className:"hidden lg:flex items-center space-x-8",children:[{to:"/",label:"Home"},{to:"/vendors",label:"Curated Vendors"},{to:"/about",label:"Our Story"},{to:"/contact",label:"Support"}].map(l=>u.jsxs(oe,{to:l.to,className:"text-slate-600 hover:text-primary-600 text-sm font-semibold tracking-wide transition-all duration-300 relative group",children:[l.label,u.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-primary-600 transition-all duration-300 group-hover:w-full"})]},l.to))})]}),u.jsxs("div",{className:"flex items-center space-x-6",children:[u.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[!t&&u.jsx(oe,{to:"/login?role=vendor",children:u.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-400 hover:text-primary-600 cursor-pointer transition-colors",children:"Vendor Portal"})}),t&&e?u.jsxs("div",{className:"flex items-center space-x-4 pl-4 border-l border-slate-200",children:[u.jsxs("div",{className:"text-right hidden xl:block leading-none",children:[u.jsx("p",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-tighter",children:"Welcome back,"}),u.jsx("p",{className:"text-sm font-black text-slate-900",children:e.name})]}),u.jsxs("div",{className:"relative group",children:[u.jsx("button",{className:"h-10 w-10 rounded-full bg-primary-50 border border-primary-100 flex items-center justify-center text-primary-600 font-black shadow-sm group-hover:ring-2 group-hover:ring-primary-500 transition-all",children:((o=e.name)==null?void 0:o.charAt(0))||"U"}),u.jsxs("div",{className:"absolute right-0 mt-3 w-56 bg-white rounded-2xl shadow-2xl border border-slate-100 py-2 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-all duration-300 z-[110]",children:[u.jsxs("div",{className:"px-4 py-2 border-b border-slate-50 mb-2",children:[u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"Account"}),u.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:e.email})]}),u.jsx(oe,{to:"/dashboard",className:"block px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-primary-600 font-medium",children:"Dashboard"}),e.role==="vendor"&&u.jsx(oe,{to:"/vendor/dashboard",className:"block px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-primary-600 font-medium",children:"Vendor Manager"}),e.role==="admin"&&u.jsx(oe,{to:"/admin",className:"block px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-primary-600 font-medium",children:"System Admin"}),u.jsx("button",{onClick:r,className:"w-full text-left px-4 py-2 text-sm text-red-500 hover:bg-red-50 font-medium mt-2 border-t border-slate-50 pt-3",children:"Finalize Session"})]})]})]}):u.jsx(oe,{to:"/login",children:u.jsx(pe,{className:"rounded-full px-6 bg-slate-900 text-white hover:bg-primary-600 shadow-lg shadow-slate-200 transition-all duration-500",children:"Sign In"})})]}),u.jsx("button",{onClick:()=>s(!n),className:"lg:hidden p-2 rounded-xl text-slate-600 hover:bg-slate-50 transition-colors",children:u.jsx("svg",{className:"w-6 h-6 outline-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:n?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]})}),n&&u.jsxs("div",{className:"lg:hidden bg-white/95 backdrop-blur-2xl border-b border-slate-200 animate-slide-down",children:[u.jsx("div",{className:"px-6 py-8 space-y-4",children:[{to:"/",label:"Home"},{to:"/vendors",label:"Curated Vendors"},{to:"/about",label:"Our Story"},{to:"/contact",label:"Support"}].map(l=>u.jsx(oe,{to:l.to,onClick:i,className:"block text-2xl font-serif font-bold text-slate-900 hover:text-primary-600 transition-colors",children:l.label},l.to))}),u.jsx("div",{className:"px-6 pb-12 pt-8 border-t border-slate-100",children:t&&e?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[u.jsx("div",{className:"h-12 w-12 rounded-full bg-primary-600 flex items-center justify-center text-white font-black",children:(a=e.name)==null?void 0:a.charAt(0)}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-slate-900",children:e.name}),u.jsx("p",{className:"text-xs text-slate-400",children:e.email})]})]}),u.jsx(oe,{to:"/dashboard",onClick:i,className:"block w-full py-3 text-center rounded-xl bg-slate-50 font-bold text-slate-600",children:"Access Dashboard"}),u.jsx("button",{onClick:r,className:"w-full py-3 text-center rounded-xl bg-red-50 font-bold text-red-600",children:"Sign Out"})]}):u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx(oe,{to:"/login",onClick:i,className:"py-4 text-center rounded-2xl bg-slate-900 text-white font-bold",children:"Sign In"}),u.jsx(oe,{to:"/login?role=vendor",onClick:i,className:"py-4 text-center rounded-2xl bg-primary-50 text-primary-600 font-bold",children:"Vendor Join"})]})})]})]})}function K6(){return u.jsx("footer",{className:"bg-white border-t border-slate-100 pt-20 pb-12 px-6",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 sm:gap-16 mb-20",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsxs(oe,{to:"/",className:"flex items-center space-x-2 group w-fit",children:[u.jsx("span",{className:"font-serif text-3xl font-black text-primary-600 tracking-tighter",children:"Bliss"}),u.jsx("div",{className:"h-2 w-2 rounded-full bg-primary-600"})]}),u.jsx("p",{className:"text-slate-500 font-light leading-relaxed max-w-xs",children:"Curating the world's most exceptional wedding experiences since 2026. Excellence is our only standard."})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-8",children:"Navigation"}),u.jsx("ul",{className:"space-y-4",children:[{to:"/",label:"Home"},{to:"/vendors",label:"Artisans"},{to:"/about",label:"Our Story"},{to:"/contact",label:"Support"}].map(t=>u.jsx("li",{children:u.jsx(oe,{to:t.to,className:"text-slate-600 hover:text-primary-600 transition-colors font-medium text-sm",children:t.label})},t.label))})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-8",children:"Collective"}),u.jsx("ul",{className:"space-y-4",children:["Partner Program","Safety Standards","Press Kit","Careers"].map(t=>u.jsx("li",{children:u.jsx("a",{href:"#",className:"text-slate-600 hover:text-primary-600 transition-colors font-medium text-sm",children:t})},t))})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-8",children:"Contact"}),u.jsx("p",{className:"text-slate-900 font-bold text-sm mb-2",children:"Concierge Support"}),u.jsx("p",{className:"text-slate-500 font-light text-sm mb-6",children:"hello@bliss-collective.com"}),u.jsx("div",{className:"flex space-x-6",children:["IG","FB","TW"].map(t=>u.jsx("a",{href:"#",className:"text-[10px] font-black text-slate-400 hover:text-primary-600 transition-colors tracking-widest",children:t},t))})]})]}),u.jsxs("div",{className:"pt-12 border-t border-slate-50 flex flex-col md:flex-row justify-between items-center gap-8",children:[u.jsx("p",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-widest whitespace-nowrap",children:" 2026 Bliss Collective. All rights reserved."}),u.jsxs("div",{className:"flex items-center space-x-8 text-[10px] font-black uppercase tracking-[0.15em] text-slate-400",children:[u.jsx("a",{href:"#",className:"hover:text-primary-600 transition-colors",children:"Privacy"}),u.jsx("a",{href:"#",className:"hover:text-primary-600 transition-colors",children:"Terms"}),u.jsx("a",{href:"#",className:"hover:text-primary-600 transition-colors",children:"Safety"})]})]})]})})}function G6(){return u.jsxs("div",{className:"min-h-screen flex flex-col bg-slate-50",children:[u.jsx(H6,{}),u.jsx("main",{className:"flex-grow",children:u.jsx(_m,{})}),u.jsx(cg,{}),u.jsx(K6,{})]})}function Q6(){const[t,e]=O.useState([]),[r,n]=O.useState(!0),s=gl();O.useEffect(()=>(i(),s&&(s.on("report-updated",a=>{e(l=>l.map(h=>h.id===a.id?a:h))}),s.on("new-report",i)),()=>{s&&(s.off("report-updated"),s.off("new-report"))}),[s]);const i=async()=>{try{n(!0);const a=await ue("/admin/reports");e(a)}catch(a){console.error("Error fetching reports:",a)}finally{n(!1)}},o=async(a,l)=>{try{await ue(`/admin/reports/${a}`,{method:"PATCH",body:JSON.stringify({status:l})})}catch(h){console.error("Error updating report:",h)}};return r?u.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading reports..."}):u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"User Reports & Moderation"}),u.jsxs("div",{className:"bg-white shadow-sm border border-slate-200 rounded-lg overflow-hidden",children:[u.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[u.jsx("thead",{className:"bg-slate-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Reporter"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Target"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Reason"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:t.map(a=>{var l,h,d;return u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:((l=a.reporter)==null?void 0:l.full_name)||"Anonymous"}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:((h=a.target_vendor)==null?void 0:h.business_name)||((d=a.target_user)==null?void 0:d.full_name)||"N/A"}),u.jsxs("td",{className:"px-6 py-4",children:[u.jsx("div",{className:"text-sm font-medium text-slate-900",children:a.reason}),u.jsx("div",{className:"text-xs text-slate-500 line-clamp-1",children:a.description})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${a.status==="resolved"?"bg-green-100 text-green-800":a.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-slate-100 text-slate-800"}`,children:a.status.toUpperCase()})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:u.jsxs("select",{className:"text-sm border-slate-200 rounded-md bg-slate-50 px-2 py-1",value:a.status,onChange:p=>o(a.id,p.target.value),children:[u.jsx("option",{value:"pending",children:"Pending"}),u.jsx("option",{value:"investigating",children:"Investigate"}),u.jsx("option",{value:"resolved",children:"Resolve"}),u.jsx("option",{value:"dismissed",children:"Dismiss"})]})})]},a.id)})})]}),t.length===0&&u.jsx("div",{className:"p-12 text-center text-slate-500",children:"No active reports."})]})]})}function J6(){const{user:t,profile:e}=Bt(),[r,n]=O.useState([]),[s,i]=O.useState(!0);O.useEffect(()=>{t&&o()},[t]);const o=async()=>{try{i(!0);const a=await ue("/bookings");n(a)}catch(a){console.warn("Dashboard fetch failed, showing mock bookings:",a),n(aN.slice(0,3))}finally{i(!1)}};return s?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(e==null?void 0:e.role)==="admin"?u.jsx(j0,{to:"/admin",replace:!0}):(e==null?void 0:e.role)==="vendor"?u.jsx(j0,{to:"/vendor/dashboard",replace:!0}):u.jsx("div",{className:"min-h-screen bg-slate-50/50 pt-32 pb-24",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[u.jsx("header",{className:"mb-16",children:u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-primary-600 font-black uppercase tracking-[0.4em] text-[10px] mb-4 block",children:"Workspace"}),u.jsxs("h1",{className:"text-5xl md:text-7xl font-serif font-bold text-slate-900 leading-tight italic",children:["Bonjour, ",(e==null?void 0:e.name)||"Planner"]}),u.jsxs("p",{className:"text-slate-400 font-medium mt-2",children:["Managing ",r.length," masterpieces in progress."]})]}),u.jsx(oe,{to:"/vendors",children:u.jsx(pe,{className:"h-14 px-10 rounded-2xl bg-slate-900 text-white font-bold hover:bg-primary-600 transition-all",children:"+ Curate More"})})]})}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[u.jsxs("div",{className:"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-10",children:[u.jsxs("div",{className:"p-10 rounded-[3rem] bg-white border border-slate-100 shadow-xl relative overflow-hidden group",children:[u.jsx("div",{className:"absolute top-0 right-0 p-8 text-primary-100 transition-transform group-hover:scale-110",children:u.jsx("svg",{className:"w-16 h-16",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"})})}),u.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-slate-400 mb-8",children:"Next Milestones"}),u.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Venue Tasting"}),u.jsx("p",{className:"text-primary-600 font-black text-sm",children:"Tomorrow at 2:00 PM"}),u.jsx("div",{className:"mt-10 pt-8 border-t border-slate-50",children:u.jsx("span",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest cursor-pointer hover:text-slate-900 transition-colors",children:"View Itinerary "})})]}),u.jsxs("div",{className:"p-10 rounded-[3rem] bg-slate-900 text-white shadow-2xl relative overflow-hidden group",children:[u.jsx("div",{className:"absolute bottom-0 right-0 w-32 h-32 bg-primary-600/20 rounded-full blur-3xl"}),u.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-slate-400 mb-8",children:"Investment Tracker"}),u.jsxs("div",{className:"flex items-end space-x-2 mb-2",children:[u.jsx("span",{className:"text-5xl font-serif font-black",children:"$42,500"}),u.jsx("span",{className:"text-slate-500 mb-2 font-bold uppercase tracking-tighter text-[10px]",children:"of $60k Budget"})]}),u.jsx("div",{className:"w-full bg-slate-800 h-1.5 rounded-full mt-6",children:u.jsx("div",{className:"bg-primary-500 h-full rounded-full w-[70%]"})}),u.jsx("div",{className:"mt-10 space-y-2",children:u.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Recent: Ritz Booking ($-15k)"})})]}),u.jsxs("div",{className:"md:col-span-2 p-10 rounded-[3rem] bg-white border border-slate-100 shadow-sm",children:[u.jsxs("div",{className:"flex justify-between items-center mb-12",children:[u.jsx("h3",{className:"text-2xl font-serif font-bold text-slate-900",children:"Your Reservations"}),u.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-primary-600 bg-primary-50 px-3 py-1 rounded-full",children:"Active Artisans"})]}),u.jsx("div",{className:"space-y-6",children:r.length>0?r.map(a=>{var l,h,d;return u.jsx(oe,{to:`/negotiation/${a.id}`,className:"block",children:u.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-6 rounded-3xl bg-slate-50/50 hover:bg-white hover:shadow-lg border border-transparent hover:border-slate-100 transition-all group gap-4",children:[u.jsxs("div",{className:"flex items-center gap-6",children:[u.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white shadow-sm overflow-hidden p-1 border border-slate-200",children:u.jsx("div",{className:"w-full h-full rounded-xl bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center text-primary-600 font-black text-xl",children:((h=(l=a.vendor)==null?void 0:l.business_name)==null?void 0:h.charAt(0))||"V"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-slate-900 text-lg group-hover:text-primary-600 transition-colors uppercase tracking-tight",children:((d=a.vendor)==null?void 0:d.business_name)||"Artisan Portfolio"}),u.jsxs("div",{className:"flex items-center gap-2",children:[a.isEnquiry&&u.jsx("span",{className:"text-[10px] bg-purple-100 text-purple-700 px-2 rounded-full font-bold",children:"INQUIRY"}),u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-[0.2em]",children:a.date})]})]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("span",{className:`inline-block px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest ${a.status==="confirmed"?"bg-green-50 text-green-600":a.status==="pending"?"bg-amber-50 text-amber-600":"bg-slate-100 text-slate-500"}`,children:a.status}),u.jsx("button",{className:"text-slate-400 hover:text-primary-600 transition-colors",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})})]})]})},a.id)}):u.jsx("div",{className:"py-20 text-center",children:u.jsx("p",{className:"text-slate-400 italic font-light",children:`"The collection is empty. Let's begin the curation."`})})})]})]}),u.jsxs("div",{className:"space-y-10",children:[u.jsxs("div",{className:"p-10 rounded-[3rem] bg-primary-600 text-white shadow-2xl group transition-transform hover:-rotate-1 relative overflow-hidden",children:[u.jsx("div",{className:"absolute -bottom-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-2xl group-hover:scale-150 transition-transform duration-1000"}),u.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-primary-100 mb-8",children:"Concierge Support"}),u.jsx("p",{className:"text-2xl font-serif font-bold mb-6 italic",children:"Need a Personal Planner?"}),u.jsx("p",{className:"text-primary-100 font-light text-sm mb-10 leading-relaxed",children:"Our elite planners are ready to take your vision to the next level."}),u.jsx(pe,{className:"w-full h-14 rounded-2xl bg-white text-primary-600 font-black hover:bg-slate-50 shadow-xl transition-all",children:"Request Advisor"})]}),u.jsxs("div",{className:"p-10 rounded-[3rem] bg-white border border-slate-100 shadow-sm",children:[u.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-slate-400 mb-8",children:"Recent Inquiries"}),u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex gap-4 items-start group cursor-pointer",children:[u.jsx("div",{className:"h-2 w-2 rounded-full bg-primary-600 mt-2 group-hover:scale-150 transition-transform"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-slate-900 group-hover:text-primary-600 transition-colors",children:"Royal Palace Venue"}),u.jsx("p",{className:"text-xs text-slate-400 font-medium tracking-tight",children:"Contract finalized. Reviewing catering menu."})]})]}),u.jsxs("div",{className:"flex gap-4 items-start group cursor-pointer",children:[u.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-200 mt-2"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-slate-600 group-hover:text-primary-600 transition-colors",children:"The Bloom Collective"}),u.jsx("p",{className:"text-xs text-slate-400 font-medium tracking-tight",children:"Availability confirmed for June 12th."})]})]})]}),u.jsx("div",{className:"mt-10 pt-8 border-t border-slate-50 text-center",children:u.jsx(oe,{to:"/messages",className:"text-[10px] font-black uppercase tracking-[0.2em] text-primary-600 hover:text-slate-900 transition-colors",children:"View All Portfolio Messaging "})})]})]})]})]})})}function sc({children:t,allowedRoles:e}){const{user:r,profile:n,loading:s}=Bt();return s?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):r?e&&n&&!e.includes(n.role)?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 p-4 text-center",children:u.jsxs("div",{className:"max-w-md space-y-4",children:[u.jsx("h1",{className:"text-4xl font-bold font-serif text-slate-900",children:"Access Denied"}),u.jsx("p",{className:"text-slate-600",children:"You do not have permission to view this page. If you believe this is an error, please contact support."}),u.jsx("a",{href:"/",className:"inline-block text-primary-600 hover:underline font-semibold",children:"Return Home"})]})}):u.jsx(u.Fragment,{children:t}):u.jsx(z1,{})}function Y6(){return u.jsx(r4,{children:u.jsx(O6,{children:u.jsx(SA,{children:u.jsxs(vA,{children:[u.jsxs(ke,{element:u.jsx(G6,{}),children:[u.jsx(ke,{path:"/",element:u.jsx(lN,{})}),u.jsx(ke,{path:"/vendors",element:u.jsx(uN,{})}),u.jsx(ke,{path:"/vendors/:id",element:u.jsx(n4,{})}),u.jsx(ke,{path:"/login",element:u.jsx(z1,{})}),u.jsx(ke,{path:"/about",element:u.jsx(i4,{})}),u.jsx(ke,{path:"/contact",element:u.jsx(o4,{})}),u.jsx(ke,{path:"/dashboard",element:u.jsx(sc,{children:u.jsx(J6,{})})}),u.jsx(ke,{path:"/negotiation/:id",element:u.jsx(sc,{children:u.jsx($L,{})})})]}),u.jsxs(ke,{path:"/admin",element:u.jsx(sc,{allowedRoles:["admin"],children:u.jsx(a4,{})}),children:[u.jsx(ke,{index:!0,element:u.jsx(D6,{})}),u.jsx(ke,{path:"vendors",element:u.jsx(L6,{})}),u.jsx(ke,{path:"users",element:u.jsx(V6,{})}),u.jsx(ke,{path:"bookings",element:u.jsx(M6,{})}),u.jsx(ke,{path:"reports",element:u.jsx(Q6,{})}),u.jsx(ke,{path:"settings",element:u.jsx(U6,{})})]}),u.jsxs(ke,{path:"/vendor",element:u.jsx(sc,{allowedRoles:["vendor"],children:u.jsx($6,{})}),children:[u.jsx(ke,{path:"dashboard",element:u.jsx(F6,{})}),u.jsx(ke,{path:"services",element:u.jsx(B6,{})}),u.jsx(ke,{path:"enquiries",element:u.jsx(z6,{})}),u.jsx(ke,{path:"bookings",element:u.jsx(q6,{})}),u.jsx(ke,{path:"profile",element:u.jsx(W6,{})})]})]})})})})}Pd.createRoot(document.getElementById("root")).render(u.jsx(rw.StrictMode,{children:u.jsx(Y6,{})}));
